"use strict";(self.webpackChunkchurchvest_v2=self.webpackChunkchurchvest_v2||[]).push([[431],{6314:(Z,p,a)=>{a.d(p,{a:()=>t});var c=a(8583),g=a(7716);let t=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=g.oAB({type:l}),l.\u0275inj=g.cJS({imports:[[c.ez]]}),l})()},3431:(Z,p,a)=>{a.r(p),a.d(p,{SettingsModule:()=>b});var c=a(8583),g=a(4655),t=a(7716),l=a(7556),m=a(2290),d=a(3251),_=a(5245),v=a(7423),C=a(773),u=a(3679);function T(e,s){1&e&&t._UZ(0,"mat-spinner")}function A(e,s){if(1&e&&(t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"p"),t._uU(3," Full Name "),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",22),t.TgZ(7,"div",23),t.TgZ(8,"p"),t._uU(9," Email address "),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"p"),t._uU(13," Phone number "),t.TgZ(14,"span"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(5),t.AsE("",n.userData.first_name," ",n.userData.last_name,""),t.xp6(6),t.Oqu(n.userData.email),t.xp6(4),t.hij("",n.userData.phone,"1")}}function M(e,s){1&e&&t._UZ(0,"mat-spinner")}function O(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",20),t.TgZ(2,"div",24),t.TgZ(3,"div",25),t.TgZ(4,"label"),t._uU(5,"Full name"),t.qZA(),t.TgZ(6,"input",26),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().fullname=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",24),t.TgZ(8,"div",25),t.TgZ(9,"label"),t._uU(10,"Email"),t.qZA(),t.TgZ(11,"input",27),t.NdJ("ngModelChange",function(o){return t.CHM(n),t.oxw().email=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",28),t.TgZ(13,"button",29),t.NdJ("click",function(){return t.CHM(n),t.oxw().onUpdate()}),t._uU(14," Update "),t.YNc(15,M,1,0,"mat-spinner",14),t.qZA(),t.qZA(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(6),t.Q6J("ngModel",n.fullname),t.xp6(5),t.Q6J("ngModel",n.email),t.xp6(4),t.Q6J("ngIf",n.isBusy)}}const y=function(e){return{background:e}};let q=(()=>{class e{constructor(n,i,o){this.authService=n,this.toastr=i,this.imgUp=o,this.isEditing=!1,this.isBusy=!1}ngOnInit(){this.userData=this.authService.getUserData(),this.fullname=`${this.userData.first_name} ${this.userData.last_name}`,this.email=`${this.userData.email}`,this.churchData=JSON.parse(localStorage.getItem("user_church")),this.profileImg=this.userData.memberships.filter(n=>n.id==this.userData.id)}toggleEdit(){this.isEditing=!this.isEditing}onUpdate(){if(this.isBusy=!0,null=={name:this.fullname})return void(this.isBusy=!1);const i=new FormData;i.append("name",this.fullname),i.append("email",this.email),this.authService.updateProfile(i).subscribe(({message:o})=>{this.toastr.success(o,"Message"),this.isBusy=!1,this.isEditing=!this.isEditing},o=>{this.isBusy=!1,this.toastr.error(o,"Message",{timeOut:3e3})},()=>{this.isBusy=!1})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.e),t.Y36(m._W),t.Y36(h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-overview"]],decls:50,vars:9,consts:[[1,"bg-white","px-4","py-3"],[1,"grid"],["animationDuration","0.5ms",1,"py-4"],["label","Profile Settings"],[1,"profile","py-3","px-2"],[1,"d-flex","align-items-center","justify-content-between"],[1,"avater","d-flex","align-items-center","mb-4"],["type","file","name","file","hidden","",3,"change"],["uploadAvatar",""],[1,"image",3,"ngStyle"],["uploadedAvatar",""],[3,"click"],["type","button","mat-stroked-button","",3,"click"],[1,"me-2"],[4,"ngIf"],[1,"section"],[1,"d-flex","justify-content-end"],["mat-mini-fab","","color","primary",3,"click"],["class","row",4,"ngIf"],["label","Church Settings"],[1,"row"],[1,"col-lg-4"],[1,"col-lg-8"],[1,"d-flex"],[1,"col-lg-6"],[1,"input"],["type","text","name","fullname","placeholder","Full name",3,"ngModel","ngModelChange"],["type","email","name","email","placeholder","Email address",3,"ngModel","ngModelChange"],[1,"d-flex","mt-2"],["type","button","mat-flat-button","",3,"click"]],template:function(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-tab-group",2),t.TgZ(3,"mat-tab",3),t.TgZ(4,"section",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"input",7,8),t.NdJ("change",function(f){t.CHM(o);const w=t.MAs(10);return i.imgUp.changeImageUploadListener(f,w)}),t.qZA(),t.TgZ(9,"div",9,10),t.TgZ(11,"span"),t.TgZ(12,"mat-icon",11),t.NdJ("click",function(){t.CHM(o);const f=t.MAs(8);return i.imgUp.addAvatar(f)}),t._uU(13,"edit"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div"),t.TgZ(15,"p"),t._uU(16,"Profile Photo "),t.TgZ(17,"span"),t._uU(18,"Click image to change it"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return i.imgUp.updateProfileImg()}),t.TgZ(20,"mat-icon",13),t._uU(21,"account_circle"),t.qZA(),t._uU(22," Update Profile "),t.YNc(23,T,1,0,"mat-spinner",14),t.qZA(),t.qZA(),t.TgZ(24,"div",15),t.TgZ(25,"div",16),t.TgZ(26,"button",17),t.NdJ("click",function(){return i.toggleEdit()}),t.TgZ(27,"mat-icon"),t._uU(28,"edit"),t.qZA(),t.qZA(),t.qZA(),t.YNc(29,A,16,4,"div",18),t.YNc(30,O,16,3,"ng-container",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"mat-tab",19),t.TgZ(32,"section",4),t.TgZ(33,"div",15),t.TgZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"p"),t._uU(37," Church Name "),t.TgZ(38,"span"),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",22),t.TgZ(41,"div",23),t.TgZ(42,"p"),t._uU(43," Church Location "),t.TgZ(44,"span"),t._uU(45),t.qZA(),t.qZA(),t.TgZ(46,"p"),t._uU(47," Church Address "),t.TgZ(48,"span"),t._uU(49),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(9),t.Q6J("ngStyle",t.VKq(7,y,null!=i.profileImg[0]&&i.profileImg[0].profile?"url("+(null==i.profileImg[0]?null:i.profileImg[0].profile)+")":"url(assets/img/png/avatar.png)")),t.xp6(14),t.Q6J("ngIf",i.imgUp.isBusy),t.xp6(6),t.Q6J("ngIf",!i.isEditing),t.xp6(1),t.Q6J("ngIf",i.isEditing),t.xp6(9),t.Oqu(i.churchData.name),t.xp6(6),t.Oqu(i.churchData.location),t.xp6(4),t.Oqu(i.churchData.address))},directives:[d.SP,d.uX,c.PC,_.Hw,v.lW,c.O5,C.Ou,u.Fj,u.JJ,u.On],styles:[".profile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;position:relative;background-repeat:no-repeat!important;background-size:cover!important;background-position:50%!important}.profile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;position:absolute;right:13px;bottom:0;width:29px;height:28px;border-radius:5px;background:rgba(7,20,40,.7);cursor:pointer}.profile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#fff}.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 1.5em;font-size:16px;color:#071428}.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:12px;color:#463e79}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{background:#f9f9f9;padding:2em;border-radius:5px;margin-bottom:2em}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#afafaf;font-size:14px;margin:0;width:-moz-fit-content;width:fit-content}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-right:5em}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{margin-bottom:2em}"]}),e})(),h=(()=>{class e{constructor(n,i,o){this.toastr=n,this.authService=i,this.renderer=o,this.isBusy=!1}ngOnInit(){}ngAfterViewInit(){}changeImageUploadListener(n,i){if(this.fileImage=n.target.files[0],this.fileImage){var o=new FileReader;o.onloadend=r=>{n.target.files[0].size/1024/1024>5?this.toastr.info("File size should be less than 5MB","Message"):"image/jpeg"==this.fileImage.type||"image/png"==this.fileImage.type?(this.renderer.setStyle(i,"background",`url(${r.target.result})`),this.toastr.success("File successfully added","Message")):this.toastr.error("File type not supported, only jpeg and png file is allowed","Message")},o.readAsDataURL(this.fileImage)}}updateProfileImg(){if(this.isBusy=!0,null==this.fileImage)return void(this.isBusy=!1);const n=new FormData;n.append("profile",this.fileImage),this.authService.updateProfile(n).subscribe(({message:i})=>{this.toastr.success(i,"Message"),this.isBusy=!1},i=>{this.isBusy=!1,this.toastr.error(i,"Message",{timeOut:3e3})},()=>{this.isBusy=!1})}addAvatar(n){n.click()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m._W),t.Y36(l.e),t.Y36(t.Qsj))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],inputs:{setImageFile:"setImageFile"},decls:0,vars:0,template:function(n,i){},encapsulation:2}),e})();const P=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-settings"]],decls:1,vars:0,template:function(n,i){1&n&&t._UZ(0,"router-outlet")},directives:[g.lC],styles:[""]}),e})(),children:[{path:"profile-settings",component:q}]}];let x=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(P)],g.Bz]}),e})();var U=a(8097),I=a(6314);let b=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[h],imports:[[c.ez,x,U.h,u.UX,u.u5,I.a]]}),e})()}}]);