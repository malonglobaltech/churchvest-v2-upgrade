"use strict";(self.webpackChunkchurchvest_v2=self.webpackChunkchurchvest_v2||[]).push([[607],{8607:(Be,T,l)=>{l.r(T),l.d(T,{SettingsModule:()=>Je});var m=l(8583),u=l(4655),M=l(449),C=l(6087),c=l(9222),f=l(3974),e=l(7716),O=l(6823),w=l(1641),p=l(2290),Z=l(5245),U=l(4834),h=l(7423),x=l(2118),A=l(5086),d=l(3251),v=l(773);const D=["closebtn"];function I(n,a){1&n&&(e.TgZ(0,"div",19),e.TgZ(1,"span",20),e._uU(2,"You do not have appropriate rights to access this resource."),e.qZA(),e.qZA())}function k(n,a){1&n&&(e.ynx(0),e._UZ(1,"app-loading-roller"),e.BQk())}function N(n,a){if(1&n&&(e.TgZ(0,"th",29),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t," ")}}function Q(n,a){if(1&n&&(e.TgZ(0,"td",31),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.user.first_name)}}function J(n,a){1&n&&(e.ynx(0),e.YNc(1,Q,3,1,"td",30),e.BQk())}function B(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",32),e.TgZ(1,"div",33),e.TgZ(2,"span",34),e.TgZ(3,"mat-icon"),e._uU(4,"more_horiz"),e.qZA(),e.qZA(),e.TgZ(5,"mat-menu",null,35),e.TgZ(7,"button",36),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).getMemberDetails(s.id)}),e._uU(8," View "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(6);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function P(n,a){1&n&&(e.ynx(0),e.YNc(1,B,9,1,"td",28),e.BQk())}function F(n,a){if(1&n&&(e.TgZ(0,"td",32),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.user.last_name)}}function S(n,a){1&n&&(e.ynx(0),e.YNc(1,F,3,1,"td",28),e.BQk())}const Y=function(n,a){return{green:n,purple:a}};function L(n,a){if(1&n&&(e.TgZ(0,"td",32),e.TgZ(1,"span",37),e._uU(2),e.qZA(),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(2,Y,"admin"==t.role,"member"==t.role)),e.xp6(1),e.Oqu(t.role)}}function j(n,a){1&n&&(e.ynx(0),e.YNc(1,L,3,5,"td",28),e.BQk())}function E(n,a){if(1&n&&(e.TgZ(0,"td",32),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.user.phone?t.user.phone:"---")}}function G(n,a){1&n&&(e.ynx(0),e.YNc(1,E,3,1,"td",28),e.BQk())}function R(n,a){if(1&n&&(e.TgZ(0,"td",32),e.TgZ(1,"span",38),e._uU(2),e.qZA(),e.qZA()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.user.email?t.user.email:"---")}}function $(n,a){1&n&&(e.ynx(0),e.YNc(1,R,3,1,"td",28),e.BQk())}function H(n,a){if(1&n&&(e.TgZ(0,"td",32),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=a.$implicit,i=e.oxw().$implicit,o=e.oxw(2);e.xp6(2),e.hij(" ",t[o._concatColumnString(i)],"")}}function z(n,a){if(1&n&&(e.ynx(0,26),e.YNc(1,N,2,1,"th",27),e.YNc(2,J,2,0,"ng-container",3),e.YNc(3,P,2,0,"ng-container",3),e.YNc(4,S,2,0,"ng-container",3),e.YNc(5,j,2,0,"ng-container",3),e.YNc(6,G,2,0,"ng-container",3),e.YNc(7,$,2,0,"ng-container",3),e.YNc(8,H,3,1,"td",28),e.BQk()),2&n){const t=a.$implicit,i=a.index,o=a.last;e.Q6J("matColumnDef",t),e.xp6(2),e.Q6J("ngIf",0===i),e.xp6(1),e.Q6J("ngIf",o),e.xp6(1),e.Q6J("ngIf","last name"==t),e.xp6(1),e.Q6J("ngIf","role"==t),e.xp6(1),e.Q6J("ngIf","phone"==t),e.xp6(1),e.Q6J("ngIf","email"==t)}}function V(n,a){1&n&&e._UZ(0,"tr",39)}const W=function(n){return{"bg-wrap":n}};function X(n,a){if(1&n&&e._UZ(0,"tr",40),2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(1,W,i.selection.isSelected(t)))}}function K(n,a){if(1&n&&(e.TgZ(0,"tr",41),e.TgZ(1,"td",42),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(' No data matching the search item: "',t.filterValue,'" ')}}function ee(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"table",21),e.YNc(2,z,9,7,"ng-container",22),e.YNc(3,V,1,0,"tr",23),e.YNc(4,X,1,3,"tr",24),e.YNc(5,K,3,1,"tr",25),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(1),e.Q6J("ngForOf",t.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}function te(n,a){1&n&&(e.ynx(0),e._UZ(1,"app-loading-roller"),e.BQk())}function ne(n,a){1&n&&e._UZ(0,"img",58)}function ie(n,a){if(1&n&&e._UZ(0,"img",59),2&n){const t=e.oxw(2);e.Q6J("src",t.itemDetails.profile,e.LSH)}}function ae(n,a){1&n&&e._UZ(0,"mat-spinner")}function oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(2);return s.changeRole(o.type,s.itemDetails.id)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("disabled",i.isBusy),e.xp6(1),e.hij(" ",t.label," ")}}function se(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(2);return s.changeRole(o.type,s.itemDetails.id)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("disabled",i.isBusy),e.xp6(1),e.hij(" ",t.label," ")}}function le(n,a){if(1&n&&(e.ynx(0),e.YNc(1,oe,2,2,"button",60),e.YNc(2,se,2,2,"button",61),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.itemDetails.role==t.type),e.xp6(1),e.Q6J("ngIf",i.itemDetails.role!==t.type)}}function re(n,a){if(1&n&&(e.TgZ(0,"mat-tab-group",43),e.TgZ(1,"mat-tab",44),e.ynx(2),e.TgZ(3,"div",45),e.TgZ(4,"div",46),e.TgZ(5,"div",47),e.YNc(6,ne,1,0,"img",48),e.YNc(7,ie,1,1,"img",49),e.qZA(),e.qZA(),e.TgZ(8,"div",50),e.TgZ(9,"label"),e._uU(10,"First Name"),e.TgZ(11,"span"),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"label"),e._uU(14,"Last Name"),e.TgZ(15,"span"),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",50),e.TgZ(18,"label"),e._uU(19,"Email Address"),e.TgZ(20,"span"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"label"),e._uU(23,"Phone Number"),e.TgZ(24,"span"),e._uU(25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",50),e.TgZ(27,"label"),e._uU(28,"Date of Birth"),e.TgZ(29,"span"),e._uU(30),e.qZA(),e.qZA(),e.TgZ(31,"label"),e._uU(32,"Residential Area"),e.TgZ(33,"span"),e._uU(34),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",50),e.TgZ(36,"label"),e._uU(37,"Residential Address"),e.TgZ(38,"span"),e._uU(39),e.qZA(),e.qZA(),e.TgZ(40,"label"),e._uU(41,"Closest Bus stop"),e.TgZ(42,"span"),e._uU(43),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",50),e.TgZ(45,"label"),e._uU(46,"Gender"),e.TgZ(47,"span"),e._uU(48),e.qZA(),e.qZA(),e.TgZ(49,"label"),e._uU(50,"Marital Status"),e.TgZ(51,"span"),e._uU(52),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",50),e.TgZ(54,"label"),e._uU(55,"Marital Date"),e.TgZ(56,"span"),e._uU(57),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.TgZ(58,"mat-tab",51),e.ynx(59),e.TgZ(60,"div",52),e.TgZ(61,"div",50),e.TgZ(62,"label"),e._uU(63,"Date of membership "),e.TgZ(64,"span"),e._uU(65),e.ALo(66,"date"),e.qZA(),e.qZA(),e.TgZ(67,"label"),e._uU(68,"Worker position"),e.TgZ(69,"span"),e._uU(70,"---"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.TgZ(71,"mat-tab",53),e.ynx(72),e.TgZ(73,"div",52),e.TgZ(74,"div",50),e.TgZ(75,"label"),e._uU(76,"Occupation of Member "),e.TgZ(77,"span"),e._uU(78),e.qZA(),e.qZA(),e.TgZ(79,"label"),e._uU(80,"Comment "),e.TgZ(81,"span"),e._uU(82),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.TgZ(83,"mat-tab",54),e.ynx(84),e.TgZ(85,"div",52),e.TgZ(86,"div",55),e.YNc(87,ae,1,0,"mat-spinner",3),e.qZA(),e.TgZ(88,"div",56),e.YNc(89,le,3,2,"ng-container",57),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",!t.itemDetails.profile),e.xp6(1),e.Q6J("ngIf",t.itemDetails.profile),e.xp6(5),e.Oqu(t.itemDetails.user.first_name),e.xp6(4),e.Oqu(t.itemDetails.user.last_name),e.xp6(5),e.Oqu(t.itemDetails.user.email),e.xp6(4),e.Oqu(null!==t.itemDetails.user.phone?t.itemDetails.user.phone:"---"),e.xp6(5),e.Oqu(null!==t.itemDetails.user.details.personal.date_of_birth?t.itemDetails.user.details.personal.date_of_birth:"---"),e.xp6(4),e.Oqu(null!==t.itemDetails.user.details.personal.residential_area?t.itemDetails.user.details.personal.residential_area:"---"),e.xp6(5),e.Oqu(null!==t.itemDetails.user.details.personal.address?t.itemDetails.user.details.personal.address:"---"),e.xp6(4),e.Oqu(null!==t.itemDetails.user.details.personal.nearest_bus_stop?t.itemDetails.user.details.personal.nearest_bus_stop:"---"),e.xp6(5),e.Oqu(null!==t.itemDetails.user.details.personal.gender?t.itemDetails.user.details.personal.gender:"---"),e.xp6(4),e.Oqu(null!==t.itemDetails.user.details.personal.relationship?t.itemDetails.user.details.personal.relationship:"---"),e.xp6(5),e.Oqu(null!==t.itemDetails.user.details.personal.date_of_marriage?t.itemDetails.user.details.personal.date_of_marriage:"---"),e.xp6(8),e.Oqu(null!=t.itemDetails.details&&null!=t.itemDetails.details.service&&t.itemDetails.details.service.date_of_membership?e.xi3(66,18,null==t.itemDetails.details?null:t.itemDetails.details.service.date_of_membership,"mediumDate"):"---"),e.xp6(13),e.Oqu(null!=t.itemDetails.details&&null!=t.itemDetails.details.other&&t.itemDetails.details.other.occupation?null==t.itemDetails.details?null:t.itemDetails.details.other.occupation:"---"),e.xp6(4),e.Oqu(null!=t.itemDetails.details&&null!=t.itemDetails.details.other&&t.itemDetails.details.other.comment?null==t.itemDetails.details?null:t.itemDetails.details.other.comment:"---"),e.xp6(5),e.Q6J("ngIf",t.isBusy),e.xp6(2),e.Q6J("ngForOf",t.roleList)}}const ce=function(n){return{hide:n}},ge=function(n){return{hidden:n}};let me=(()=>{class n{constructor(t,i,o,s){this.peopleService=t,this.exportService=i,this.router=o,this.toastr=s,this.memberList=[],this.pageSize=50,this.currentPage=0,this.isBusy=!1,this._loading=!1,this._loading_=!1,this.file_name="members_data",this.selectedMembers=[],this._isAllSelected=!1,this._isSingleSelected=!1,this.payload=[],this._printElement=f.sn,this._concatColumnString=f.kA,this.dataSource=new c.by,this.selection=new M.Ov(!0,[]),this.column=["first name","last name","role","phone","email","action"],this.roleList=[{type:"admin",label:"Admin"},{type:"reporting",label:"Viewer(Reporting)"},{type:"fellowship",label:"Viewer(Fellowship)"},{type:"evangelism",label:"Viewer(Evangelism)"},{type:"financials",label:"Viewer(Financials)"},{type:"member_connect",label:"Viewer(Member Connect)"},{type:"member",label:"Member"}]}ngOnInit(){this.getMembers(),this.displayedColumns=this.column}ngAfterViewInit(){this.dataSource.paginator=this.paginator}getMembers(){this._loading=!0,this.memberList=[],this.peopleService.fetchMembersRole(this.currentPage+1).subscribe(t=>{this._loading=!1;const{data:i,meta:o}=t;this.memberList=i,this.dataSource=new c.by(this.memberList),this.paginator.pageIndex=this.currentPage,this.paginator.length=o.total},t=>{t&&(this._loading=!1,this.memberList=[])})}getMemberDetails(t){this._loading_=!0,this.memberId=t,void 0!==this.memberId&&this.peopleService.fetchDetails(t,"members/member","").subscribe(i=>{this._loading_=!1;const{data:o}=i;this.itemDetails=o},i=>{this._loading_=!1})}changeRole(t,i){this.isBusy=!0,this.peopleService.assignMemberRole({role:t},i).subscribe(s=>{this.isBusy=!1;const{message:g}=s;this.toastr.success(g,"Message",{timeOut:3e3}),this.getMembers(),this.closebtn._elementRef.nativeElement.click()},s=>{this.isBusy=!1,this.toastr.error(s,"Message",{timeOut:3e3}),this.getMembers(),this.closebtn._elementRef.nativeElement.click()})}pageChanged(t){this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.getMembers()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.g),e.Y36(w.j),e.Y36(u.F0),e.Y36(p._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-module-access"]],viewQuery:function(t,i){if(1&t&&(e.Gf(C.NW,5),e.Gf(D,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first),e.iGM(o=e.CRH())&&(i.closebtn=o.first)}},decls:28,vars:13,consts:[[1,"header","d-flex","align-items-center","justify-content-between","mb-4"],[1,"title"],["class","d-flex justify-content-center align-items-center my-3 empty-state",4,"ngIf"],[4,"ngIf"],[1,"overflow--wrap","_visible",3,"ngClass"],[1,"table-wrapper","tbl-wrap"],["showFirstLastButton","",1,"visibility",3,"pageIndex","pageSize","ngClass","page"],["id","view-details","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-wrapper"],[1,"modal-content-wrap"],[1,"modal-body"],[1,"header-top","d-flex","justify-content-between","align-items-center","px-4","py-3"],["data-bs-dismiss","modal",1,"cursor"],[1,"container","px-0"],[1,"details-panel"],["animationDuration","0.5ms","class","py-4",4,"ngIf"],[1,"modal-footer","d-flex","justify-content-end","px-4"],["type","button","mat-stroked-button","","data-bs-dismiss","modal"],["closebtn",""],[1,"d-flex","justify-content-center","align-items-center","my-3","empty-state"],[1,"txt-grey","txt-md"],["mat-table","","id","print-section",1,"table","custom-table","w--100",2,"width","100%",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["style","padding-left: 3.5em",4,"matCellDef"],[2,"padding-left","3.5em"],["mat-cell",""],[3,"matMenuTriggerFor"],[1,"cursor"],["menu","matMenu"],["type","button","mat-menu-item","","data-bs-toggle","modal","data-bs-target","#view-details",3,"click"],[1,"tag",3,"ngClass"],[1,"lowercase"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["animationDuration","0.5ms",1,"py-4"],["label","Personal Information"],[1,"details-wrap-list","scroll"],[1,"grid","mb-3"],[1,"d-flex","avatar"],["src","assets/img/png/avatar.png","alt","avatar",4,"ngIf"],["alt","avatar",3,"src",4,"ngIf"],[1,"grid","grid--1fr--1fr","mb-3"],["label","Membership Information"],[1,"details-wrap-list"],["label","Other Information"],["label","Change Role"],[1,"d-flex","justify-content-end","my-2"],[1,"d-flex","align-items-center"],[4,"ngFor","ngForOf"],["src","assets/img/png/avatar.png","alt","avatar"],["alt","avatar",3,"src"],["mat-flat-button","",3,"disabled","click",4,"ngIf"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["mat-flat-button","",3,"disabled","click"],["mat-stroked-button","",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"section"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e._uU(3,"Member Access"),e.qZA(),e.qZA(),e.YNc(4,I,3,0,"div",2),e.YNc(5,k,2,0,"ng-container",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.YNc(8,ee,6,4,"ng-container",3),e.TgZ(9,"mat-paginator",6),e.NdJ("page",function(s){return i.pageChanged(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"div",1),e._uU(16,"Member Details"),e.qZA(),e.TgZ(17,"mat-icon",12),e._uU(18,"close"),e.qZA(),e.qZA(),e.TgZ(19,"div",13),e.YNc(20,te,2,0,"ng-container",3),e.TgZ(21,"div",14),e._UZ(22,"mat-divider"),e.YNc(23,re,90,21,"mat-tab-group",15),e.qZA(),e.qZA(),e.TgZ(24,"div",16),e.TgZ(25,"button",17,18),e._uU(27," Dismiss "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",!(i._loading||i.memberList&&0!==i.memberList.length)),e.xp6(1),e.Q6J("ngIf",i._loading),e.xp6(1),e.Q6J("ngClass",e.VKq(9,ce,0==i.memberList.length)),e.xp6(2),e.Q6J("ngIf",0!==i.memberList.length),e.xp6(1),e.Q6J("pageIndex",i.currentPage)("pageSize",i.pageSize)("ngClass",e.VKq(11,ge,0==i.memberList.length)),e.xp6(11),e.Q6J("ngIf",i._loading_),e.xp6(3),e.Q6J("ngIf",i.itemDetails&&!i._loading_))},directives:[m.O5,m.mk,C.NW,Z.Hw,U.d,h.lW,x.m,c.BZ,m.sg,c.as,c.nj,c.Ee,c.w1,c.fO,c.Dz,c.ge,c.ev,A.p6,A.VK,A.OP,c.XQ,c.Gk,d.SP,d.uX,v.Ou],pipes:[m.uU],styles:[".details-wrap-list[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-wrap:wrap;width:700px;grid-row-gap:15px;grid-column-gap:15px}"]}),n})();var r=l(3679),ue=l(8802),pe=l(4107),de=l(8908),_e=l(2368);const fe=["closebtn"];function Ze(n,a){1&n&&(e.TgZ(0,"div",29),e.TgZ(1,"span",30),e._uU(2,"No account added yet."),e.qZA(),e.qZA())}function he(n,a){1&n&&(e.ynx(0),e._UZ(1,"app-loading-roller"),e.BQk())}function Ae(n,a){1&n&&e._UZ(0,"mat-spinner")}const ve=function(n,a){return{green:n,grey:a}};function be(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"div",36),e._UZ(2,"img",37),e.qZA(),e.TgZ(3,"h3",38),e._uU(4),e.qZA(),e.TgZ(5,"p",39),e._uU(6),e.qZA(),e.TgZ(7,"div",40),e.TgZ(8,"div",41),e.TgZ(9,"span",42),e._uU(10),e.qZA(),e.TgZ(11,"div",43),e.TgZ(12,"mat-slide-toggle",44),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.is_active=o})("change",function(o){const g=e.CHM(t).$implicit;return e.oxw(2).toggleIsActive(o,g.id)}),e.qZA(),e.YNc(13,Ae,1,0,"mat-spinner",5),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("src","assets/img/png/bank-logos/"+t.bank_slug+".png",e.LSH)("alt",t.bank_code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.number),e.xp6(3),e.Q6J("ngClass",e.WLB(9,ve,1==t.is_active,0==t.is_active)),e.xp6(1),e.Oqu(1==t.is_active?"Active":"Inactive"),e.xp6(2),e.Q6J("disabled",i.isBusy_)("ngModel",t.is_active),e.xp6(1),e.Q6J("ngIf",i.isBusy_)}}function Te(n,a){if(1&n&&(e.TgZ(0,"div",31),e.ynx(1),e.TgZ(2,"div",32),e.TgZ(3,"div",33),e.YNc(4,be,14,12,"div",34),e.qZA(),e.qZA(),e.BQk(),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.accountList)}}function Ce(n,a){if(1&n&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.name)}}function xe(n,a){1&n&&e._UZ(0,"mat-spinner")}const b=function(n){return{"is-invalid":n}};let qe=(()=>{class n{constructor(t,i,o){this.givingService=t,this.toastr=i,this.fb=o,this._loading_=!1,this.isBusy=!1,this.isBusy_=!1,this.bankList=[],this.accountList=[],this.accountName="",this.newAccountForm=new r.cw({}),this._maxLengthCheck=f.EU,this.newAccountForm=this.fb.group({title:[null,r.kI.required],bank_code:[null],number:[null,r.kI.required],bank_slug:[null,r.kI.required],name:new r.NI({value:null,disabled:!0})})}ngOnInit(){this.getAccounts(),this.getBanks()}get accountFormValue(){return this.newAccountForm.getRawValue()}blurHandler(){let t;this.bankObj&&(t={bank_code:this.bankObj.code,number:this.newAccountForm.get("number").value},this.givingService.resolveAccount(t).subscribe(i=>{const{data:o,message:s}=i;this.accountName=o,this.newAccountForm.controls.name.setValue(o.account_name),this.toastr.info(s,"Message",{timeOut:3e3})},i=>{this.toastr.error("Could not resolve account name. Check parameters or try again.","Message",{timeOut:3e3})}))}handleBankChange(t){this.bankObj=t.value}getAccounts(){this._loading_=!0,this.givingService.fetchAccounts().subscribe(t=>{this._loading_=!1;const{data:i}=t;this.accountList=i},()=>{this._loading_=!1})}getBanks(){this.bankList=[],this.givingService.fetchBanks().subscribe(t=>{const{data:i}=t;this.bankList=i},t=>{t&&(this.bankList=[])})}addAccount(){this.isBusy=!0,this.newAccountForm.patchValue({bank_code:this.bankObj.code,bank_slug:this.bankObj.slug}),this.newAccountForm.invalid?this.isBusy=!1:this.newAccountForm.valid&&this.givingService.createAccount(this.accountFormValue).subscribe(({})=>{this.newAccountForm.reset(),this.isBusy=!1,this.closebtn._elementRef.nativeElement.click()},t=>{this.isBusy=!1,this.toastr.error(t,"Message",{timeOut:3e3})},()=>{this.isBusy=!1,this.newAccountForm.reset()})}toggleIsActive(t,i){let o;this.isBusy_=!0,o=1==t.checked?1:0,this.givingService.updateAccount({is_active:o},i).subscribe(g=>{this.isBusy_=!1;const{message:_}=g;this.toastr.info(_,"Message",{timeOut:3e3})},g=>{this.toastr.error("Could not resolve account name. Check parameters or try again.","Message",{timeOut:3e3})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ue.r),e.Y36(p._W),e.Y36(r.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-online-giving"]],viewQuery:function(t,i){if(1&t&&e.Gf(fe,5),2&t){let o;e.iGM(o=e.CRH())&&(i.closebtn=o.first)}},decls:50,vars:16,consts:[[1,"header","d-flex","align-items-center","justify-content-between","mb-3"],[1,"title","mb-0"],["mat-stroked-button","","data-bs-toggle","modal","data-bs-target","#addAccount"],[1,"me-2"],["class","d-flex justify-content-center align-items-center my-3 empty-state",4,"ngIf"],[4,"ngIf"],["class","bg-white p-3",4,"ngIf"],["id","addAccount","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-wrapper"],[1,"modal-content-wrap"],[1,"modal-body"],[1,"header-top","d-flex","justify-content-between","align-items-center","px-4","py-3"],[1,"title"],["data-bs-dismiss","modal",1,"cursor"],[1,"container"],[1,"pb-3",3,"formGroup","ngSubmit"],[1,"form-wrap","w--400"],[1,"grid","grid--1fr--1fr","grid-gap-15"],[1,"input"],["type","text","placeholder","Enter account title - Mr/Mrs/Ms","formControlName","title",3,"ngClass"],["placeholder","Select bank","formControlName","bank_slug",1,"select",3,"ngClass","selectionChange"],["disabled","","selected","","value",""],["class","capitalize",3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Enter account number","formControlName","number","maxLength","10",3,"ngClass","input","blur"],["type","text","placeholder","Enter account name","formControlName","name"],[1,"d-flex","align-items-center","mt-3"],["type","submit","mat-flat-button","",1,"me-3",3,"disabled"],["type","button","mat-stroked-button","","data-bs-dismiss","modal"],["closebtn",""],[1,"d-flex","justify-content-center","align-items-center","my-3","empty-state"],[1,"txt-grey","txt-md"],[1,"bg-white","p-3"],[1,"card-list-wrap"],[1,"items-wrap","grid","grid-rep-three"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"d-flex","justify-content-between","align-items-center"],[1,"icon",3,"src","alt"],[1,"title","md","mt-4"],[1,"f14","txt-grey"],[1,"mt-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"tag",3,"ngClass"],[1,"d-flex","align-items-center"],[3,"disabled","ngModel","ngModelChange","change"],[1,"capitalize",3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Online Giving Accounts"),e.qZA(),e.TgZ(3,"button",2),e.TgZ(4,"mat-icon",3),e._uU(5,"add"),e.qZA(),e._uU(6," Add New Account "),e.qZA(),e.qZA(),e.YNc(7,Ze,3,0,"div",4),e.YNc(8,he,2,0,"ng-container",5),e.YNc(9,Te,5,1,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e._uU(16,"Add New Account"),e.qZA(),e.TgZ(17,"mat-icon",13),e._uU(18,"close"),e.qZA(),e.qZA(),e.TgZ(19,"div",14),e.TgZ(20,"form",15),e.NdJ("ngSubmit",function(){return i.addAccount()}),e.TgZ(21,"div",16),e.TgZ(22,"div",17),e.TgZ(23,"div",18),e.TgZ(24,"label"),e._uU(25,"Title of Account"),e.qZA(),e._UZ(26,"input",19),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"label"),e._uU(29,"Bank "),e.qZA(),e.TgZ(30,"mat-select",20),e.NdJ("selectionChange",function(s){return i.handleBankChange(s)}),e.TgZ(31,"mat-option",21),e._uU(32,"Select bank"),e.qZA(),e.YNc(33,Ce,2,2,"mat-option",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",17),e.TgZ(35,"div",18),e.TgZ(36,"label"),e._uU(37,"Account Number"),e.qZA(),e.TgZ(38,"input",23),e.NdJ("input",function(s){return i._maxLengthCheck(s)})("blur",function(){return i.blurHandler()}),e.qZA(),e.qZA(),e.TgZ(39,"div",18),e.TgZ(40,"label"),e._uU(41,"Account Name"),e.qZA(),e._UZ(42,"input",24),e.qZA(),e.qZA(),e.TgZ(43,"div",25),e.TgZ(44,"button",26),e._uU(45," Create "),e.YNc(46,xe,1,0,"mat-spinner",5),e.qZA(),e.TgZ(47,"button",27,28),e._uU(49," Cancel "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngIf",!(i._loading_||i.accountList&&0!==i.accountList.length)),e.xp6(1),e.Q6J("ngIf",i._loading_),e.xp6(1),e.Q6J("ngIf",!i._loading_),e.xp6(11),e.Q6J("formGroup",i.newAccountForm),e.xp6(6),e.Q6J("ngClass",e.VKq(10,b,i.newAccountForm.controls.title.hasError("required")&&i.newAccountForm.controls.title.touched)),e.xp6(4),e.Q6J("ngClass",e.VKq(12,b,i.newAccountForm.controls.bank_slug.hasError("required")&&i.newAccountForm.controls.bank_slug.touched)),e.xp6(3),e.Q6J("ngForOf",i.bankList),e.xp6(5),e.Q6J("ngClass",e.VKq(14,b,i.newAccountForm.controls.number.hasError("required")&&i.newAccountForm.controls.number.touched)),e.xp6(6),e.Q6J("disabled",!i.newAccountForm.valid),e.xp6(2),e.Q6J("ngIf",i.isBusy))},directives:[h.lW,Z.Hw,m.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,m.mk,pe.gD,de.ey,m.sg,x.m,_e.Rr,r.On,v.Ou],styles:[".card-list-wrap[_ngcontent-%COMP%]   .items-wrap[_ngcontent-%COMP%]{grid-gap:1em;gap:1em}.card-list-wrap[_ngcontent-%COMP%]   .grid.grid-rep-three[_ngcontent-%COMP%]{grid-template-columns:repeat(3,32.3%)}.card-list-wrap[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:1em;height:208px;border:none;border-radius:10px;box-shadow:0 1px 15px 2px #d2daf5}.card-list-wrap[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px}.card-list-wrap[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-size:12px}.card-list-wrap[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tag.green[_ngcontent-%COMP%]{color:#5dd493}.card-list-wrap[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tag.grey[_ngcontent-%COMP%]{color:#343a4066}"]}),n})();var q=l(7556);function ye(n,a){1&n&&e._UZ(0,"mat-spinner")}function Me(n,a){if(1&n&&(e.TgZ(0,"div",20),e.TgZ(1,"div",21),e.TgZ(2,"p"),e._uU(3," Full Name "),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",22),e.TgZ(7,"div",23),e.TgZ(8,"p"),e._uU(9," Email address "),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"p"),e._uU(13," Phone number "),e.TgZ(14,"span"),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(5),e.AsE("",t.userData.first_name," ",t.userData.last_name,""),e.xp6(6),e.Oqu(t.userData.email),e.xp6(4),e.hij("",t.userData.phone,"1")}}function Oe(n,a){1&n&&e._UZ(0,"mat-spinner")}function we(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",20),e.TgZ(2,"div",24),e.TgZ(3,"div",25),e.TgZ(4,"label"),e._uU(5,"Full name"),e.qZA(),e.TgZ(6,"input",26),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().fullname=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",24),e.TgZ(8,"div",25),e.TgZ(9,"label"),e._uU(10,"Email"),e.qZA(),e.TgZ(11,"input",27),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().email=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",28),e.TgZ(13,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().onUpdate()}),e._uU(14," Update "),e.YNc(15,Oe,1,0,"mat-spinner",14),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.fullname),e.xp6(5),e.Q6J("ngModel",t.email),e.xp6(4),e.Q6J("ngIf",t.isBusy)}}const Ue=function(n){return{background:n}};let De=(()=>{class n{constructor(t,i,o){this.authService=t,this.toastr=i,this.imgUp=o,this.isEditing=!1,this.isBusy=!1}ngOnInit(){var t;this.userData=this.authService.getUserData(),this.fullname=`${this.userData.first_name} ${this.userData.last_name}`,this.email=`${this.userData.email}`,this.churchData=JSON.parse(localStorage.getItem("user_church")),this.profileImg=null===(t=this.userData.memberships[0])||void 0===t?void 0:t.profile}toggleEdit(){this.isEditing=!this.isEditing}onUpdate(){if(this.isBusy=!0,null=={name:this.fullname})return void(this.isBusy=!1);const i=new FormData;i.append("name",this.fullname),i.append("email",this.email),this.authService.updateProfile(i).subscribe(({message:o})=>{this.toastr.success(o,"Message"),this.isBusy=!1,this.isEditing=!this.isEditing},o=>{this.isBusy=!1,this.toastr.error(o,"Message",{timeOut:3e3})},()=>{this.isBusy=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.e),e.Y36(p._W),e.Y36(y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-overview"]],decls:50,vars:9,consts:[[1,"bg-white","px-4","py-3"],[1,"grid"],["animationDuration","0.5ms",1,"py-4"],["label","Profile Settings"],[1,"profile","py-3","px-2"],[1,"d-flex","align-items-center","justify-content-between"],[1,"avater","d-flex","align-items-center","mb-4"],["type","file","name","file","hidden","",3,"change"],["uploadAvatar",""],[1,"image",3,"ngStyle"],["uploadedAvatar",""],[3,"click"],["type","button","mat-stroked-button","",3,"click"],[1,"me-2"],[4,"ngIf"],[1,"section"],[1,"d-flex","justify-content-end"],["mat-mini-fab","","color","primary",3,"click"],["class","row",4,"ngIf"],["label","Church Settings"],[1,"row"],[1,"col-lg-4"],[1,"col-lg-8"],[1,"d-flex"],[1,"col-lg-6"],[1,"input"],["type","text","name","fullname","placeholder","Full name",3,"ngModel","ngModelChange"],["type","email","name","email","placeholder","Email address",3,"ngModel","ngModelChange"],[1,"d-flex","mt-2"],["type","button","mat-flat-button","",3,"click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-tab-group",2),e.TgZ(3,"mat-tab",3),e.TgZ(4,"section",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"input",7,8),e.NdJ("change",function(g){e.CHM(o);const _=e.MAs(10);return i.imgUp.changeImageUploadListener(g,_)}),e.qZA(),e.TgZ(9,"div",9,10),e.TgZ(11,"span"),e.TgZ(12,"mat-icon",11),e.NdJ("click",function(){e.CHM(o);const g=e.MAs(8);return i.imgUp.addAvatar(g)}),e._uU(13,"edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div"),e.TgZ(15,"p"),e._uU(16,"Profile Photo "),e.TgZ(17,"span"),e._uU(18,"Click image to change it"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"button",12),e.NdJ("click",function(){return i.imgUp.updateProfileImg()}),e.TgZ(20,"mat-icon",13),e._uU(21,"account_circle"),e.qZA(),e._uU(22," Update Profile "),e.YNc(23,ye,1,0,"mat-spinner",14),e.qZA(),e.qZA(),e.TgZ(24,"div",15),e.TgZ(25,"div",16),e.TgZ(26,"button",17),e.NdJ("click",function(){return i.toggleEdit()}),e.TgZ(27,"mat-icon"),e._uU(28,"edit"),e.qZA(),e.qZA(),e.qZA(),e.YNc(29,Me,16,4,"div",18),e.YNc(30,we,16,3,"ng-container",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"mat-tab",19),e.TgZ(32,"section",4),e.TgZ(33,"div",15),e.TgZ(34,"div",20),e.TgZ(35,"div",21),e.TgZ(36,"p"),e._uU(37," Church Name "),e.TgZ(38,"span"),e._uU(39),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",22),e.TgZ(41,"div",23),e.TgZ(42,"p"),e._uU(43," Church Location "),e.TgZ(44,"span"),e._uU(45),e.qZA(),e.qZA(),e.TgZ(46,"p"),e._uU(47," Church Address "),e.TgZ(48,"span"),e._uU(49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(9),e.Q6J("ngStyle",e.VKq(7,Ue,i.profileImg?"url("+i.profileImg+")":"url(assets/img/png/avatar.png)")),e.xp6(14),e.Q6J("ngIf",i.imgUp.isBusy),e.xp6(6),e.Q6J("ngIf",!i.isEditing),e.xp6(1),e.Q6J("ngIf",i.isEditing),e.xp6(9),e.Oqu(i.churchData.name),e.xp6(6),e.Oqu(i.churchData.location),e.xp6(4),e.Oqu(i.churchData.address))},directives:[d.SP,d.uX,m.PC,Z.Hw,h.lW,m.O5,v.Ou,r.Fj,r.JJ,r.On],styles:[".profile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;position:relative;background-repeat:no-repeat!important;background-size:cover!important;background-position:50%!important}.profile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;position:absolute;right:13px;bottom:0;width:29px;height:28px;border-radius:5px;background:rgba(7,20,40,.7);cursor:pointer}.profile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#fff}.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 1.5em;font-size:16px;color:#071428}.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:12px;color:#463e79}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{background:#f9f9f9;padding:2em;border-radius:5px;margin-bottom:2em}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#afafaf;font-size:14px;margin:0;width:-moz-fit-content;width:fit-content}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-right:5em}.profile[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{margin-bottom:2em}"]}),n})(),y=(()=>{class n{constructor(t,i,o){this.toastr=t,this.authService=i,this.renderer=o,this.isBusy=!1}ngOnInit(){}ngAfterViewInit(){}changeImageUploadListener(t,i){if(this.fileImage=t.target.files[0],this.fileImage){var o=new FileReader;o.onloadend=s=>{t.target.files[0].size/1024/1024>5?this.toastr.info("File size should be less than 5MB","Message"):"image/jpeg"==this.fileImage.type||"image/png"==this.fileImage.type?(this.renderer.setStyle(i,"background",`url(${s.target.result})`),this.toastr.success("File successfully added","Message")):this.toastr.error("File type not supported, only jpeg and png file is allowed","Message")},o.readAsDataURL(this.fileImage)}}updateProfileImg(){if(this.isBusy=!0,null==this.fileImage)return void(this.isBusy=!1);const t=new FormData;t.append("profile",this.fileImage),this.authService.updateProfile(t).subscribe(({message:i})=>{this.toastr.success(i,"Message"),this.isBusy=!1},i=>{this.isBusy=!1,this.toastr.error(i,"Message",{timeOut:3e3})},()=>{this.isBusy=!1})}addAvatar(t){t.click()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p._W),e.Y36(q.e),e.Y36(e.Qsj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{setImageFile:"setImageFile"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const Ie=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-settings"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},directives:[u.lC],styles:[""]}),n})(),children:[{path:"module-access",component:me},{path:"online-giving",component:qe},{path:"profile-settings",component:De}]}];let ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(Ie)],u.Bz]}),n})();var Ne=l(8824),Qe=l(6314);let Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[y],imports:[[m.ez,ke,Ne.h,r.UX,r.u5,Qe.a]]}),n})()}}]);