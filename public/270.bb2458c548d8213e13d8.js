"use strict";(self.webpackChunkchurchvest_v2=self.webpackChunkchurchvest_v2||[]).push([[270],{1270:(Ue,T,a)=>{a.r(T),a.d(T,{AuthModule:()=>be});var u=a(8583),l=a(4655),e=a(7716);let q=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-auth"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"router-outlet")},directives:[l.lC],styles:[""]}),t})();var s=a(3679),x=a(2340),d=a(3498),m=a(2290),p=a(5245),f=a(7446),h=a(7423),_=a(773);function b(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility_off"),e.qZA(),e.qZA()}}function w(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA(),e.qZA()}}function k(t,i){1&t&&e._UZ(0,"mat-spinner")}const y=function(t){return{"is-invalid":t}};let U=(()=>{class t{constructor(n,o,r,c){this.authServ=n,this.toastr=o,this.fb=r,this.router=c,this.show=!1,this.isBusy=!1,this.isChecked=!0,this.form=new s.cw({}),this.form=this.fb.group({email:["",[s.kI.email,s.kI.required]],password:["",s.kI.required]})}ngOnInit(){}get value(){return this.form.getRawValue()}password(){this.show=!this.show}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.login(this.value).subscribe(n=>{const{data:o}=n;this.form.reset(),localStorage.setItem("token",n.access_token),localStorage.setItem("user_details",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),this.getLink()},n=>{this.toastr.error(n,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}getLink(){this.url=`${x.N.managementbaseUrl}`;let r,n=window.location.origin;r=window.location.href.replace(`${n}/onboarding/api`,this.url),this.verifyUser(r)}verifyUser(n){this.authServ.verify(n).subscribe(o=>{if(this.isBusy=!1,"success"===o.status){this.toastr.success("Email Verification Successful","Message"),localStorage.setItem("user_details",JSON.stringify(o.data)),localStorage.setItem("isLoggedIn","true");let r=JSON.parse(localStorage.getItem("user_details"));if(0!==r.memberships.length){let c=r.memberships.filter(g=>"admin"===g.role);1===c.length?(localStorage.setItem("user_details",JSON.stringify(o.data)),localStorage.setItem("user_church",JSON.stringify(c[0])),this.router.navigate(["/admin/activity"])):(this.toastr.info("You are an admin in multiple churches. Kindly select a church to continue","Message"),this.router.navigate(["/onboarding/login"]))}}},o=>{o&&this.toastr.error("Oops! Email verification not successful","Message")})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.e),e.Y36(m._W),e.Y36(s.qu),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-account-verify"]],decls:37,vars:13,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass"],["placeholder","Enter password","formControlName","password",3,"type","ngClass"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],[1,"d-flex","align-items-center","my-4"],[3,"checked"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],[1,"toggle-btn","txt-grey",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"main",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"a",4),e.TgZ(5,"mat-icon"),e._uU(6,"keyboard_backspace"),e.qZA(),e._uU(7,"Home Page"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"form",6),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(10,"div",7),e.TgZ(11,"h2"),e._uU(12," Login To "),e._UZ(13,"br"),e._uU(14," Your Account "),e.qZA(),e.TgZ(15,"p",8),e._uU(16," Kindly complete the email verification process by logging in to your dashboard "),e.qZA(),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"label"),e._uU(19,"Email Address"),e.qZA(),e._UZ(20,"input",10),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"label"),e._uU(23,"Password"),e.qZA(),e._UZ(24,"input",11),e.YNc(25,b,3,0,"span",12),e.YNc(26,w,3,0,"span",12),e.qZA(),e.TgZ(27,"div",13),e.TgZ(28,"mat-checkbox",14),e._uU(29,"Stay signed in"),e.qZA(),e.qZA(),e.TgZ(30,"button",15),e._uU(31," Login To Account "),e.YNc(32,k,1,0,"mat-spinner",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",17),e.TgZ(34,"div",18),e.TgZ(35,"a",19),e._UZ(36,"img",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(9),e.Q6J("formGroup",o.form),e.xp6(11),e.Q6J("ngClass",e.VKq(9,y,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),e.xp6(4),e.Q6J("type",o.show?"text":"password")("ngClass",e.VKq(11,y,o.form.controls.password.hasError("required")&&o.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",!o.show),e.xp6(1),e.Q6J("ngIf",o.show),e.xp6(2),e.Q6J("checked",o.isChecked),e.xp6(2),e.Q6J("disabled",!o.form.valid),e.xp6(2),e.Q6J("ngIf",o.isBusy))},directives:[l.yS,p.Hw,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,u.mk,u.O5,f.oG,h.lW,_.Ou],styles:[""]}),t})(),I=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-forgot-password"]],decls:2,vars:0,template:function(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"forgot-password works!"),e.qZA())},styles:[""]}),t})();var S=a(4107),J=a(8908);function N(t,i){if(1&t&&(e.TgZ(0,"div",19),e.TgZ(1,"span",20),e._uU(2),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.recordMsg)}}function Y(t,i){1&t&&(e.TgZ(0,"span",21),e.TgZ(1,"mat-icon"),e._uU(2,"check_circle"),e.qZA(),e.qZA())}function Q(t,i){1&t&&e._UZ(0,"mat-spinner")}function E(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){return e.CHM(n),e.oxw().validateEmail()}),e._uU(2," Verify "),e.YNc(3,Q,1,0,"mat-spinner",14),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("disabled",!n.form.controls.email.valid),e.xp6(2),e.Q6J("ngIf",n.isBusy)}}function F(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"p",24),e._uU(3," No record found: "),e.TgZ(4,"a",9),e._uU(5,"Signup here"),e.qZA(),e.qZA(),e.qZA(),e.BQk())}function M(t,i){if(1&t&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n.church),e.xp6(1),e.Oqu(n.church.name)}}function L(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"label"),e._uU(2,"Select Church"),e.qZA(),e.TgZ(3,"mat-select",32),e.NdJ("selectionChange",function(r){return e.CHM(n),e.oxw(2).onChurchSelect(r)}),e.TgZ(4,"mat-option",33),e._uU(5," Select church "),e.qZA(),e.YNc(6,M,2,2,"mat-option",34),e.qZA(),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(6),e.Q6J("ngForOf",n.recordData.memberships)}}function O(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",36),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility_off"),e.qZA(),e.qZA()}}function P(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",36),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA(),e.qZA()}}function R(t,i){1&t&&e._UZ(0,"mat-spinner")}const C=function(t){return{"is-invalid":t}};function V(t,i){if(1&t&&(e.ynx(0),e.YNc(1,L,7,1,"div",25),e.TgZ(2,"div",11),e.TgZ(3,"label"),e._uU(4,"Password"),e.qZA(),e._UZ(5,"input",26),e.YNc(6,O,3,0,"span",27),e.YNc(7,P,3,0,"span",27),e.qZA(),e.TgZ(8,"div",28),e.TgZ(9,"mat-checkbox",29),e._uU(10,"Stay signed in"),e.qZA(),e.TgZ(11,"a",30),e._uU(12,"Reset password"),e.qZA(),e.qZA(),e.TgZ(13,"button",31),e._uU(14," Login "),e.YNc(15,R,1,0,"mat-spinner",14),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",0!==n.recordData.memberships.length),e.xp6(4),e.Q6J("type",n.show?"text":"password")("ngClass",e.VKq(8,C,n.form.controls.password.hasError("required")&&n.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",!n.show),e.xp6(1),e.Q6J("ngIf",n.show),e.xp6(2),e.Q6J("checked",n.isChecked),e.xp6(4),e.Q6J("disabled",!n.form.valid),e.xp6(2),e.Q6J("ngIf",n.isBusy)}}let B=(()=>{class t{constructor(n,o,r,c){this.authServ=n,this.toastr=o,this.fb=r,this.router=c,this.show=!1,this.isBusy=!1,this.validate=!1,this.recordFound=!1,this.isChecked=!0,this.form=new s.cw({}),this.form=this.fb.group({email:["",[s.kI.email,s.kI.required]],password:["",s.kI.required]})}ngOnInit(){}get value(){return this.form.getRawValue()}get emailCtrInstance(){return this.form.get("email")}password(){this.show=!this.show}onChurchSelect(n){this.selectedChurch=n.value}resetControl(){"INVALID"==this.emailCtrInstance.status&&(this.recordFound=!1)}validateEmail(){this.isBusy=!0,this.authServ.resolveUser({email:this.emailCtrInstance.value}).subscribe(({message:o,data:r})=>{this.isBusy=!1,0==r.length?(this.recordData=r,this.toastr.error(o,"Message",{timeOut:3e3})):(this.recordFound=!0,this.recordData=r,this.recordMsg=o,0!==this.recordData.memberships.length&&this.toastr.info(o,"Message",{timeOut:3e3}))},()=>{this.isBusy=!1,this.recordFound=!1})}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.login(this.value).subscribe(n=>{const{data:o}=n;this.recordFound=!1,this.toastr.success("Login successful","Message"),this.form.reset(),localStorage.setItem("token",n.access_token),localStorage.setItem("user_details",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user_church",JSON.stringify(this.selectedChurch))},n=>{this.toastr.error(n,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.e),e.Y36(m._W),e.Y36(s.qu),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:32,vars:9,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/register"],["class","panel mb-3",4,"ngIf"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass","input"],["class","toggle-btn txt-grey green",4,"ngIf"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],[1,"panel","mb-3"],[1,"f12","txt-green"],[1,"toggle-btn","txt-grey","green"],["type","submit","mat-stroked-button","",1,"w-100",3,"disabled","click"],[1,"d-flex","my-3"],[1,"f12","text-danger"],["class","input",4,"ngIf"],["placeholder","Enter password","formControlName","password",3,"type","ngClass"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","my-4"],[3,"checked"],["routerLink","/onboarding/forgot-password",1,"f12"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],["placeholder","Connect to church",1,"select",3,"selectionChange"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"toggle-btn","txt-grey",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"main",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"a",4),e.TgZ(5,"mat-icon"),e._uU(6,"keyboard_backspace"),e.qZA(),e._uU(7,"Home Page"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"form",6),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(10,"div",7),e.TgZ(11,"h2"),e._uU(12,"Log Back Into "),e._UZ(13,"br"),e._uU(14,"Your Account"),e.qZA(),e.TgZ(15,"p",8),e._uU(16," I don\u2019t have an account yet. "),e.TgZ(17,"a",9),e._uU(18,"GET STARTED"),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,N,3,1,"div",10),e.TgZ(20,"div",11),e.TgZ(21,"label"),e._uU(22,"Email Address"),e.qZA(),e.TgZ(23,"input",12),e.NdJ("input",function(){return o.resetControl()}),e.qZA(),e.YNc(24,Y,3,0,"span",13),e.qZA(),e.YNc(25,E,4,2,"ng-container",14),e.YNc(26,F,6,0,"ng-container",14),e.YNc(27,V,16,10,"ng-container",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",15),e.TgZ(29,"div",16),e.TgZ(30,"a",17),e._UZ(31,"img",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(9),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("ngIf",o.recordData&&o.recordFound&&0!==o.recordData.memberships.length),e.xp6(4),e.Q6J("ngClass",e.VKq(7,C,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),e.xp6(1),e.Q6J("ngIf",o.recordFound),e.xp6(1),e.Q6J("ngIf",!o.recordFound),e.xp6(1),e.Q6J("ngIf",o.recordData&&0==o.recordData.length),e.xp6(1),e.Q6J("ngIf",o.recordFound))},directives:[l.yS,p.Hw,s._Y,s.JL,s.sg,u.O5,s.Fj,s.JJ,s.u,u.mk,h.lW,_.Ou,f.oG,S.gD,J.ey,u.sg],styles:[""]}),t})();const D=t=>t==t.toLowerCase(),H=t=>/\d/.test(t),W=t=>!!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(t);var G=a(7322);function K(t,i){if(1&t&&(e.TgZ(0,"div",30),e.TgZ(1,"span",31),e._uU(2),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.recordMsg)}}function X(t,i){1&t&&(e.TgZ(0,"mat-icon",38),e._uU(1,"check_circle"),e.qZA())}function z(t,i){1&t&&(e.TgZ(0,"mat-icon",39),e._uU(1,"cancel"),e.qZA())}function $(t,i){1&t&&(e.TgZ(0,"mat-icon",38),e._uU(1,"check_circle"),e.qZA())}function j(t,i){1&t&&(e.TgZ(0,"mat-icon",39),e._uU(1,"cancel"),e.qZA())}function ee(t,i){1&t&&(e.TgZ(0,"mat-icon",38),e._uU(1,"check_circle"),e.qZA())}function te(t,i){1&t&&(e.TgZ(0,"mat-icon",39),e._uU(1,"cancel"),e.qZA())}function ne(t,i){1&t&&(e.TgZ(0,"mat-icon",38),e._uU(1,"check_circle"),e.qZA())}function oe(t,i){1&t&&(e.TgZ(0,"mat-icon",39),e._uU(1,"cancel"),e.qZA())}function ie(t,i){if(1&t&&(e.TgZ(0,"div",32),e.TgZ(1,"div",33),e.YNc(2,X,2,0,"mat-icon",34),e.YNc(3,z,2,0,"mat-icon",35),e.TgZ(4,"span",36),e._uU(5,"Passowrd should contain 8 characters or more"),e.qZA(),e.qZA(),e.TgZ(6,"div",33),e.YNc(7,$,2,0,"mat-icon",34),e.YNc(8,j,2,0,"mat-icon",35),e.TgZ(9,"span",36),e._uU(10,"Passowrd should contain at least one upper case character"),e.qZA(),e.qZA(),e.TgZ(11,"div",33),e.YNc(12,ee,2,0,"mat-icon",34),e.YNc(13,te,2,0,"mat-icon",35),e.TgZ(14,"span",36),e._uU(15,"Passowrd should contain at least a number"),e.qZA(),e.qZA(),e.TgZ(16,"div",37),e.YNc(17,ne,2,0,"mat-icon",34),e.YNc(18,oe,2,0,"mat-icon",35),e.TgZ(19,"span",36),e._uU(20,"Passowrd should contain at least one special character"),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.validatePassword.length>=8),e.xp6(1),e.Q6J("ngIf",n.validatePassword.length<8),e.xp6(4),e.Q6J("ngIf",!n.upperCaseChar),e.xp6(1),e.Q6J("ngIf",n.upperCaseChar),e.xp6(4),e.Q6J("ngIf",n.numberChar),e.xp6(1),e.Q6J("ngIf",!n.numberChar),e.xp6(4),e.Q6J("ngIf",n.specialChar),e.xp6(1),e.Q6J("ngIf",!n.specialChar)}}function re(t,i){1&t&&(e.TgZ(0,"span",40),e.TgZ(1,"mat-icon"),e._uU(2,"check_circle"),e.qZA(),e.qZA())}function se(t,i){1&t&&e._UZ(0,"mat-spinner")}function ae(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",41),e.NdJ("click",function(){return e.CHM(n),e.oxw().validateEmail()}),e._uU(2," Verify "),e.YNc(3,se,1,0,"mat-spinner",15),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("disabled",!n.form.controls.email.valid),e.xp6(2),e.Q6J("ngIf",n.isBusy)}}function ce(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",52),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility_off"),e.qZA(),e.qZA()}}function le(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",52),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA(),e.qZA()}}function ue(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",52),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility_off"),e.qZA(),e.qZA()}}function ge(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"span",52),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).password()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA(),e.qZA()}}function me(t,i){1&t&&(e.TgZ(0,"mat-error",53),e._uU(1," Passwords do not match "),e.qZA())}function de(t,i){1&t&&e._UZ(0,"mat-spinner")}const Z=function(t){return{"is-invalid":t}};function pe(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",12),e.TgZ(2,"label"),e._uU(3,"Full Name"),e.qZA(),e._UZ(4,"input",42),e.qZA(),e.TgZ(5,"div",12),e.TgZ(6,"label"),e._uU(7,"Password"),e.qZA(),e.TgZ(8,"input",43),e.NdJ("input",function(){e.CHM(n);const r=e.oxw();return r.checkPassword(r.passwordValue)}),e.qZA(),e.YNc(9,ce,3,0,"span",44),e.YNc(10,le,3,0,"span",44),e.qZA(),e.TgZ(11,"div",12),e.TgZ(12,"label"),e._uU(13,"Confirm Password"),e.qZA(),e._UZ(14,"input",45),e.YNc(15,ue,3,0,"span",44),e.YNc(16,ge,3,0,"span",44),e.YNc(17,me,2,0,"mat-error",46),e.qZA(),e.TgZ(18,"div",47),e.TgZ(19,"mat-checkbox",48),e._uU(20,"I agree to the"),e.qZA(),e.TgZ(21,"span",49),e.TgZ(22,"a",50),e._uU(23,"terms & conditions"),e.qZA(),e._uU(24,"of churchvest"),e.qZA(),e.qZA(),e.TgZ(25,"button",51),e._uU(26," Create Account "),e.YNc(27,de,1,0,"mat-spinner",15),e.qZA(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(13,Z,n.form.controls.name.hasError("required")&&n.form.controls.name.touched)),e.xp6(4),e.Q6J("type",n.show?"text":"password")("ngClass",e.VKq(15,Z,n.form.controls.password.hasError("required")&&n.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",!n.show),e.xp6(1),e.Q6J("ngIf",n.show),e.xp6(4),e.Q6J("type",n.show?"text":"password")("errorStateMatcher",n.matcher),e.xp6(1),e.Q6J("ngIf",!n.show),e.xp6(1),e.Q6J("ngIf",n.show),e.xp6(1),e.Q6J("ngIf",n.form.hasError("notSame")&&n.form.controls.confirmPassword.touched),e.xp6(2),e.Q6J("checked",n.isChecked),e.xp6(6),e.Q6J("disabled",!n.form.valid),e.xp6(2),e.Q6J("ngIf",n.isBusy)}}function he(t,i){1&t&&(e.ynx(0),e.TgZ(1,"p",54),e._uU(2,"This email already exists."),e.qZA(),e.TgZ(3,"div",55),e.TgZ(4,"a",56),e._uU(5,"Login to Existing Church"),e.qZA(),e.qZA(),e.BQk())}let fe=(()=>{class t{constructor(n,o,r,c){this.authServ=n,this.toastr=o,this.fb=r,this.router=c,this.show=!1,this.isBusy=!1,this.validate=!1,this.recordFound=!1,this.isChecked=!0,this.matcher=new _e,this._validateCaps=D,this._hasNumber=H,this._checkForSpecialChars=W,this.form=new s.cw({}),this.checkPasswordMatch=g=>g.get("password").value===g.get("confirmPassword").value?null:{notSame:!0},this.form=this.fb.group({email:["",[s.kI.email,s.kI.required]],name:["",s.kI.required],password:["",s.kI.required],confirmPassword:[""]},{validators:this.checkPasswordMatch})}ngOnInit(){}get value(){return this.form.getRawValue()}get passwordValue(){return this.form.controls.password.value}checkPassword(n){this.validatePassword=n,this.upperCaseChar=this._validateCaps(n),this.numberChar=this._hasNumber(n),this.specialChar=this._checkForSpecialChars(n)}get emailCtrInstance(){return this.form.get("email")}password(){this.show=!this.show}resetControl(){"INVALID"==this.emailCtrInstance.status&&(this.recordFound=!1)}validateEmail(){this.isBusy=!0,this.authServ.resolveUser({email:this.emailCtrInstance.value}).subscribe(({message:o,data:r})=>{this.isBusy=!1,0==r.length?(this.recordData=r,this.recordFound=!0):(this.recordFound=!0,this.recordData=r,this.recordMsg=o,this.toastr.info(o,"Message",{timeOut:3e3}))},()=>{this.isBusy=!1,this.recordFound=!1})}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.register(this.value).subscribe(n=>{const{data:o}=n;this.recordFound=!1,this.toastr.success("Registration successful","Message"),this.form.reset(),localStorage.setItem("token",n.access_token),localStorage.setItem("user_details",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user_church",JSON.stringify(this.selectedChurch)),this.navigate(n.data.email)},n=>{this.toastr.error(n,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}navigate(n){this.router.navigate(["/onboarding/verify-email"],{queryParams:{query:n}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.e),e.Y36(m._W),e.Y36(s.qu),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:75,vars:10,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/login"],["class","mb-3",4,"ngIf"],["class","panel mb-3 p-3",4,"ngIf"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass","input"],["class","toggle-btn txt-grey green",4,"ngIf"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],["id","terms-condition","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-wrapper"],[1,"modal-content-wrap"],[1,"modal-body"],[1,"header-top","d-flex","justify-content-between","align-items-center","px-4","py-3"],[1,"title"],["data-bs-dismiss","modal",1,"cursor"],[1,"scroll","content","mt-2","w--600","p-2"],[1,"f12"],[1,"unordered"],[1,"mb-3"],[1,"f12","txt-green"],[1,"panel","mb-3","p-3"],[1,"d-flex","align-items-center","mb-2"],["class","txt-green",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"f12","text-grey","ms-2"],[1,"d-flex","align-items-center"],[1,"txt-green"],[1,"text-danger"],[1,"toggle-btn","txt-grey","green"],["type","submit","mat-stroked-button","",1,"w-100",3,"disabled","click"],["type","text","placeholder","Enter full name","formControlName","name",3,"ngClass"],["placeholder","Enter password","formControlName","password",3,"type","ngClass","input"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],["formControlName","confirmPassword","placeholder","Confirm password",3,"type","errorStateMatcher"],["class","f12 my-2",4,"ngIf"],[1,"d-flex","align-items-center","my-4"],[3,"checked"],[1,"link"],["data-bs-toggle","modal","data-bs-target","#terms-condition"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[1,"toggle-btn","txt-grey",3,"click"],[1,"f12","my-2"],[1,"f12","text-danger","my-3"],[1,"panel","d-flex","align-items-center","justify-content-center"],["routerLink","/onboarding/login",1,"f12"]],template:function(n,o){1&n&&(e.TgZ(0,"main",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"a",4),e.TgZ(5,"mat-icon"),e._uU(6,"keyboard_backspace"),e.qZA(),e._uU(7,"Home Page"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"form",6),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(10,"div",7),e.TgZ(11,"h2"),e._uU(12," Sign Up To "),e._UZ(13,"br"),e._uU(14," Use Churchvest "),e.qZA(),e.TgZ(15,"p",8),e._uU(16," I have an account already. "),e.TgZ(17,"a",9),e._uU(18,"LOGIN HERE"),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,K,3,1,"div",10),e.YNc(20,ie,21,8,"div",11),e.TgZ(21,"div",12),e.TgZ(22,"label"),e._uU(23,"Email Address"),e.qZA(),e.TgZ(24,"input",13),e.NdJ("input",function(){return o.resetControl()}),e.qZA(),e.YNc(25,re,3,0,"span",14),e.qZA(),e.YNc(26,ae,4,2,"ng-container",15),e.YNc(27,pe,28,17,"ng-container",15),e.YNc(28,he,6,0,"ng-container",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",16),e.TgZ(30,"div",17),e.TgZ(31,"a",18),e._UZ(32,"img",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",20),e.TgZ(34,"div",21),e.TgZ(35,"div",22),e.TgZ(36,"div",23),e.TgZ(37,"div",24),e.TgZ(38,"div",25),e._uU(39,"Terms & Conditions"),e.qZA(),e.TgZ(40,"mat-icon",26),e._uU(41,"close"),e.qZA(),e.qZA(),e.TgZ(42,"div",2),e.TgZ(43,"div",27),e.TgZ(44,"p",28),e._uU(45,"Last modified on 1 August 2021"),e.qZA(),e.TgZ(46,"p"),e.TgZ(47,"strong"),e._uU(48,"Note"),e.qZA(),e._uU(49," \u2013 These terms are applicable to the Churchvest trade site, where you can buy and sell your products. If you require Terms for the Churchvest (where you can buy/sell products) please go to www.churchvest/terms-conditions Welcome to Churchvest Please read these website Terms & Conditions carefully before using this website (the \u201cWebsite\u201d or \u201cChurchvest\u201d) and the services and tools offered by Haningburg Dreams Limited. (\u201cChurchvest\u201d). These Website Terms & Conditions (the \u201cTerms & Conditions\u201d) govern your access to and use of the Website, Churchvest products and services, and Churchvest.com mobile applications (together, \u201cChurchvest Services\u201d). Churchvest\u2019s Privacy Statement and its Consent to Arbitration and Governing Law are incorporated in the Terms & Conditions by reference and form part of the Terms & Conditions. Please read the Terms & Conditions carefully. By clicking as indicated below, you accept and agree to be bound by these Terms & Conditions. If you do not agree to be bound by these Terms & Conditions, you must not access or use the Website or any Churchvest Services. "),e.qZA(),e.TgZ(50,"h3"),e._uU(51,"General"),e.qZA(),e.TgZ(52,"p"),e._uU(53," Churchvest Services are for the use of persons who are 18 years of age or older only. When using Churchvest Services, you agree that: "),e.qZA(),e.TgZ(54,"ul",29),e.TgZ(55,"li"),e._uU(56," You are the legal owner or have permission of the owner to sell the items you are attempting to sell through Churchvest; "),e.qZA(),e.TgZ(57,"li"),e._uU(58," You are at least 18 years of age and reside in the Nigeria or one of its territories or possessions. If you do not meet these eligibility requirements, you must not access or use the Website; "),e.qZA(),e.TgZ(59,"li"),e._uU(60," You will not violate any laws, third party rights or our Terms & Conditions or other policies; "),e.qZA(),e.TgZ(61,"li"),e._uU(62," The information you provide will be truthful and accurate; "),e.qZA(),e.TgZ(63,"li"),e._uU(64," You will not impersonate any individual or provide false registration information; You will not transfer your account or user ID to another party without Churchvest\u2019s consent; "),e.qZA(),e.TgZ(65,"li"),e._uU(66," You will open and use no more than one account with Churchvest (multiple accounts are not permitted); "),e.qZA(),e.TgZ(67,"li"),e._uU(68," You are responsible for maintaining the confidentiality of your account information including your password; and "),e.qZA(),e.TgZ(69,"li"),e._uU(70,' You will not copy, modify, creative derivative works of, distribute, publicly perform or display, or otherwise exploit any content from Churchvest Services, except as explicitly permitted by these Terms & Conditions (see the section below titled "License" for more detail). '),e.qZA(),e.qZA(),e.TgZ(71,"p"),e._uU(72," We may transfer, assign, sub-contract or otherwise dispose of this contract, or any of our rights or obligations arising under it, at any time during the term of the contract at our discretion. You may not transfer, assign, or in any way dispose of this contract or any of your rights or obligations arising under it, without our express written prior consent, which may be electronically communicated by way of email. Churchvest reserves the absolute right to close your account, terminate this agreement, and cease doing business with you at its sole discretion and for any reason it determines. "),e.qZA(),e.TgZ(73,"p"),e._uU(74," Changes To The Terms And Conditions We may revise and update these Terms and Conditions from time to time in our sole discretion. All changes are effective immediately when we post them, and apply to all access to and use of the Website thereafter. Your continued use of the Website following the posting of revised Terms and Conditions means that you accept and agree to the changes. You are expected to check this each time you access this Website so you are aware of any changes, as they are binding on you. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(9),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("ngIf",o.recordData&&0!==o.recordData.length),e.xp6(1),e.Q6J("ngIf",o.validatePassword),e.xp6(4),e.Q6J("ngClass",e.VKq(8,Z,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),e.xp6(1),e.Q6J("ngIf",o.recordFound),e.xp6(1),e.Q6J("ngIf",!o.recordFound),e.xp6(1),e.Q6J("ngIf",o.recordFound&&o.recordData&&0==o.recordData.length),e.xp6(1),e.Q6J("ngIf",o.recordData&&0!==o.recordData.length))},directives:[l.yS,p.Hw,s._Y,s.JL,s.sg,u.O5,s.Fj,s.JJ,s.u,u.mk,h.lW,_.Ou,f.oG,G.TO],styles:[".panel[_ngcontent-%COMP%]{padding:.5em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}.link[_ngcontent-%COMP%]{line-height:27px;font-size:14px}.link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 6px;cursor:pointer}"]}),t})();class _e{isErrorState(i){var n,o,r;const c=!(!(null==i?void 0:i.invalid)||!(null===(n=null==i?void 0:i.parent)||void 0===n?void 0:n.dirty)),g=!(!(null===(o=null==i?void 0:i.parent)||void 0===o?void 0:o.invalid)||!(null===(r=null==i?void 0:i.parent)||void 0===r?void 0:r.dirty));return c||g}}var Ze=a(5435),v=a(7970);let ve=(()=>{class t{constructor(n,o){this._bottomSheetRef=n,this.data=o}ngOnInit(){}dismiss(n){this._bottomSheetRef.dismiss(),n.preventDefault()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.oL),e.Y36(v.OG))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-bottom-sheet"]],decls:13,vars:1,consts:[[1,"center","h-250"],[1,"d-flex","my-2"],[1,"f12","txt-grey"],[1,"ms-2"],[1,"d-flex","mt-auto"],["mat-stroked-button","",1,"w-100",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"mat-nav-list"),e.TgZ(1,"div",0),e.TgZ(2,"h2"),e._uU(3,"Check Your Mail!"),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"span",2),e._uU(6," Verification email sent to:"),e.qZA(),e.TgZ(7,"a"),e.TgZ(8,"span",3),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"button",5),e.NdJ("click",function(c){return o.dismiss(c)}),e._uU(12," Dismiss "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(9),e.Oqu(o.data))},directives:[h.lW],styles:[".center[_ngcontent-%COMP%]{display:flex;padding:2em;flex-direction:column;justify-content:center}.center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:34px;color:#ccc6}.center[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5c278b}.center.h-250[_ngcontent-%COMP%]{height:250px}"]}),t})();function Te(t,i){if(1&t&&(e.TgZ(0,"div"),e.TgZ(1,"p",6),e._uU(2),e.qZA(),e.TgZ(3,"div",15),e.TgZ(4,"p",16),e._uU(5," Please check your email to confirm your account and complete your account creation process. "),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.hij(" We sent a verification email to ",n.queryString,". ")}}function ye(t,i){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"p",16),e._uU(2,"You have not verified your email."),e.qZA(),e.TgZ(3,"p",16),e._uU(4," Please check your email to confirm your account or click on the text below to resend the verification link "),e.qZA(),e.qZA())}function Ce(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"p",17),e._uU(1," Didn\u2019t get the email? "),e.TgZ(2,"a",18),e.NdJ("click",function(){return e.CHM(n),e.oxw().resend()}),e._uU(3," Resend it"),e.qZA(),e.qZA()}}function Ae(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"Sending another email..."),e.qZA())}const qe=[{path:"",component:q,children:[{path:"login",component:B,data:{title:"ChurchVest - Login"}},{path:"forgot-password",component:I,data:{title:"ChurchVest - Forgot Password"}},{path:"register",component:fe,data:{title:"ChurchVest - Create Account"}},{path:"verify-email",component:(()=>{class t{constructor(n,o,r,c){this.authService=n,this.route=o,this.router=r,this._bottomSheet=c,this.loading=!1}ngOnInit(){this.token=JSON.parse(localStorage.getItem("token")),this.getRoutes()}getRoutes(){this.route.queryParams.pipe((0,Ze.h)(n=>n.query)).subscribe(n=>{this.queryString=n.query}),""===this.queryString&&this.router.navigate(["/onboarding/register"])}resend(){this.loading=!0,this.authService.resendVerification().subscribe(n=>{this.loading=!1,"success"===n.status&&this.openBottomSheet()},()=>{this.loading=!1})}openBottomSheet(){this._bottomSheet.open(ve,{data:this.queryString})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.e),e.Y36(l.gz),e.Y36(l.F0),e.Y36(v.ch))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-verify-email"]],decls:23,vars:4,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-450","pt-5"],["routerLink","/",1,"return-link"],[1,"content","w-450","mt-5","d-flex","flex-column"],[1,"txt-grey","my-2"],[1,"my-3"],["src","assets/img/svg/mail.svg","alt","mail"],[4,"ngIf"],["class","txt-grey d-flex",4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],[1,"my-5"],[1,"txt-grey"],[1,"txt-grey","d-flex"],[1,"ms-2","cursor",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"main",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"a",4),e.TgZ(5,"mat-icon"),e._uU(6,"keyboard_backspace"),e.qZA(),e._uU(7,"Home Page"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"h2"),e._uU(10,"Verify Your Account"),e.qZA(),e.TgZ(11,"p",6),e._uU(12,"Hello there, welcome to Churchvest!"),e.qZA(),e.TgZ(13,"div",7),e._UZ(14,"img",8),e.qZA(),e.YNc(15,Te,6,1,"div",9),e.YNc(16,ye,5,0,"div",9),e.YNc(17,Ce,4,0,"p",10),e.YNc(18,Ae,2,0,"p",9),e.qZA(),e.qZA(),e.TgZ(19,"div",11),e.TgZ(20,"div",12),e.TgZ(21,"a",13),e._UZ(22,"img",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(15),e.Q6J("ngIf",!o.token),e.xp6(1),e.Q6J("ngIf",o.token),e.xp6(1),e.Q6J("ngIf",o.token&&!o.loading),e.xp6(1),e.Q6J("ngIf",o.token&&o.loading))},directives:[l.yS,p.Hw,u.O5],styles:[".grid[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:0 auto}.grid[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;color:#080730;font-weight:300;font-size:48px}.grid[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{position:relative;background:url(/assets/img/png/keyboard-keys.png);background-position:center}"]}),t})(),data:{title:"ChurchVest - Email Verification"}},{path:"api/email/verify/:*/:*",component:U,data:{title:"ChurchVest - Account Verification"}},{path:"",redirectTo:"login"}]}];let xe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.Bz.forChild(qe)],l.Bz]}),t})();var A=a(3291);let be=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[{provide:m._W}],imports:[[u.ez,xe,A.h,A.h,s.UX,s.u5,m.Rh.forRoot()]]}),t})()}}]);