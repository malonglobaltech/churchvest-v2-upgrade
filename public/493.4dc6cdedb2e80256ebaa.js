"use strict";(self.webpackChunkchurchvest_v2=self.webpackChunkchurchvest_v2||[]).push([[493],{2493:(R,q,l)=>{l.r(q),l.d(q,{AuthModule:()=>Xt});var p=l(8583),m=l(4655),Q=l(7388),t=l(7716);let k=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auth"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[m.lC],styles:[""]}),n})();var i=l(3679),I=l(2340),h=l(7556),_=l(2290),f=l(5245),w=l(7446),Z=l(7423),y=l(773);function S(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function F(n,s){1&n&&t._UZ(0,"mat-spinner")}const b=function(n){return{"is-invalid":n}};let N=(()=>{class n{constructor(e,o,r,g){this.authServ=e,this.toastr=o,this.fb=r,this.router=g,this.show=!1,this.isBusy=!1,this.isChecked=!0,this.form=new i.cw({}),this.form=this.fb.group({email:["",[i.kI.email,i.kI.required]],password:["",i.kI.required]})}ngOnInit(){}get value(){return this.form.getRawValue()}password(){this.show=!this.show}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.login(this.value).subscribe(e=>{const{data:o}=e;this.form.reset(),localStorage.setItem("token",e.access_token),localStorage.setItem("user_details",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),this.getLink()},e=>{this.toastr.error(e,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}getLink(){this.url=`${I.N.managementbaseUrl}`;let r,e=window.location.origin;r=window.location.href.replace(`${e}/onboarding/api`,this.url),this.verifyUser(r)}verifyUser(e){this.authServ.verify(e).subscribe(o=>{if(this.isBusy=!1,"success"===o.status){this.toastr.success("Email Verification Successful","Message");let r=JSON.parse(localStorage.getItem("user_details"));if(0===r.memberships.length)this.router.navigateByUrl("/onboarding/church-setup");else{let g=r.memberships.filter(T=>"admin"===T.role);1===g.length?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user_details",JSON.stringify(o.data)),localStorage.setItem("user_church",JSON.stringify(g[0])),this.router.navigate(["/portal/activity"])):(this.toastr.info("You are an admin in multiple churches. Kindly select a church to continue","Message"),this.router.navigate(["/onboarding/login"]))}}},o=>{o&&this.toastr.error("Oops! Email verification not successful","Message")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(_._W),t.Y36(i.qu),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-account-verify"]],decls:39,vars:13,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass"],["placeholder","Enter password","formControlName","password",3,"type","ngClass"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],[1,"d-flex","align-items-center","my-4"],[3,"checked"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/",1,"d-flex","align-items-center"],["src","assets/img/png/church_logo.png","alt","logo",1,"logo"],[1,"ms-1"],[1,"toggle-btn","txt-grey",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",7),t.TgZ(11,"h2"),t._uU(12," Login To "),t._UZ(13,"br"),t._uU(14," Your Account "),t.qZA(),t.TgZ(15,"p",8),t._uU(16," Kindly complete the email verification process by logging in to your dashboard "),t.qZA(),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"label"),t._uU(19,"Email Address"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"label"),t._uU(23,"Password"),t.qZA(),t._UZ(24,"input",11),t.YNc(25,S,3,0,"span",12),t.YNc(26,J,3,0,"span",12),t.qZA(),t.TgZ(27,"div",13),t.TgZ(28,"mat-checkbox",14),t._uU(29,"Stay signed in"),t.qZA(),t.qZA(),t.TgZ(30,"button",15),t._uU(31," Login To Account "),t.YNc(32,F,1,0,"mat-spinner",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",17),t.TgZ(34,"div",18),t.TgZ(35,"a",19),t._UZ(36,"img",20),t.TgZ(37,"span",21),t._uU(38,"Churchvest"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngClass",t.VKq(9,b,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),t.xp6(4),t.Q6J("type",o.show?"text":"password")("ngClass",t.VKq(11,b,o.form.controls.password.hasError("required")&&o.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!o.show),t.xp6(1),t.Q6J("ngIf",o.show),t.xp6(2),t.Q6J("checked",o.isChecked),t.xp6(2),t.Q6J("disabled",!o.form.valid),t.xp6(2),t.Q6J("ngIf",o.isBusy))},directives:[m.yS,f.Hw,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,p.mk,p.O5,w.oG,Z.lW,y.Ou],styles:[""]}),n})();function a(n,s){1&n&&t._UZ(0,"mat-spinner")}let c=(()=>{class n{constructor(e,o,r,g){this.authServ=e,this.toastr=o,this.fb=r,this.router=g,this.show=!1,this.isBusy=!1,this.form=new i.cw({}),this.form=this.fb.group({name:["",i.kI.required],location:[""],address:[""]})}ngOnInit(){}get value(){return this.form.getRawValue()}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.setupChurch(this.value).subscribe(e=>{const{data:o}=e;o&&(this.toastr.success("Login successful","Message"),this.form.reset(),localStorage.setItem("user_church",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),this.router.navigate(["/portal/activity"]))},e=>{this.toastr.error(e,"Message"),this.isBusy=!1},()=>{this.isBusy=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(_._W),t.Y36(i.qu),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-church-setup"]],decls:38,vars:3,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],[1,"input"],["type","text","placeholder","Enter church name","formControlName","name"],["type","text","placeholder","Enter church location","formControlName","location"],["type","text","placeholder","Enter church address","formControlName","address"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/",1,"d-flex","align-items-center"],["src","assets/img/png/church_logo.png","alt","logo",1,"logo"],[1,"ms-1"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",7),t.TgZ(11,"h2"),t._uU(12,"Setup Your "),t._UZ(13,"br"),t._uU(14,"Church Information"),t.qZA(),t.TgZ(15,"p",8),t._uU(16," Create your virtual church space, broaden your impact! "),t.qZA(),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"label"),t._uU(19,"Church Name"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"label"),t._uU(23,"Church Location"),t.qZA(),t._UZ(24,"input",11),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"label"),t._uU(27,"Church Address"),t.qZA(),t._UZ(28,"input",12),t.qZA(),t.TgZ(29,"button",13),t._uU(30," Go to Dashboard "),t.YNc(31,a,1,0,"mat-spinner",14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",15),t.TgZ(33,"div",16),t.TgZ(34,"a",17),t._UZ(35,"img",18),t.TgZ(36,"span",19),t._uU(37,"Churchvest"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(20),t.Q6J("disabled",!o.form.valid),t.xp6(2),t.Q6J("ngIf",o.isBusy))},directives:[m.yS,f.Hw,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,Z.lW,p.O5,y.Ou],styles:[""]}),n})();var u=l(3974),d=l(7399);function C(n,s){1&n&&(t.ynx(0),t.TgZ(1,"span",6),t._uU(2," Verification email sent to:"),t.qZA(),t.BQk())}function v(n,s){1&n&&(t.ynx(0),t.TgZ(1,"span",6),t._uU(2," Password reset link sent to:"),t.qZA(),t.BQk())}let A=(()=>{class n{constructor(e,o){this._bottomSheetRef=e,this.data=o}ngOnInit(){}dismiss(e){this._bottomSheetRef.dismiss(),e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.oL),t.Y36(d.OG))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bottom-sheet"]],decls:13,vars:3,consts:[[1,"center","h-250"],[1,"d-flex","my-2"],[4,"ngIf"],[1,"ms-2"],[1,"d-flex","mt-auto"],["mat-stroked-button","",1,"w-100",3,"click"],[1,"f12","txt-grey"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-nav-list"),t.TgZ(1,"div",0),t.TgZ(2,"h2"),t._uU(3,"Check Your Mail!"),t.qZA(),t.TgZ(4,"div",1),t.YNc(5,C,3,0,"ng-container",2),t.YNc(6,v,3,0,"ng-container",2),t.TgZ(7,"a"),t.TgZ(8,"span",3),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"button",5),t.NdJ("click",function(g){return o.dismiss(g)}),t._uU(12," Dismiss "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf","verification_link"==o.data.type),t.xp6(1),t.Q6J("ngIf","reset_link"==o.data.type),t.xp6(3),t.Oqu(o.data.data))},directives:[p.O5,Z.lW],styles:[".center[_ngcontent-%COMP%]{display:flex;padding:2em;flex-direction:column;justify-content:center}.center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:34px;color:#ccc6}.center[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5c278b}.center.h-250[_ngcontent-%COMP%]{height:250px}"]}),n})();var x=l(7322);function V(n,s){if(1&n&&(t.TgZ(0,"div",31),t.TgZ(1,"span",32),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.recordMsg)}}function D(n,s){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"check_circle"),t.qZA())}function H(n,s){1&n&&(t.TgZ(0,"mat-icon",40),t._uU(1,"cancel"),t.qZA())}function W(n,s){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"check_circle"),t.qZA())}function G(n,s){1&n&&(t.TgZ(0,"mat-icon",40),t._uU(1,"cancel"),t.qZA())}function K(n,s){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"check_circle"),t.qZA())}function z(n,s){1&n&&(t.TgZ(0,"mat-icon",40),t._uU(1,"cancel"),t.qZA())}function X(n,s){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"check_circle"),t.qZA())}function j(n,s){1&n&&(t.TgZ(0,"mat-icon",40),t._uU(1,"cancel"),t.qZA())}function $(n,s){if(1&n&&(t.TgZ(0,"div",33),t.TgZ(1,"div",34),t.YNc(2,D,2,0,"mat-icon",35),t.YNc(3,H,2,0,"mat-icon",36),t.TgZ(4,"span",37),t._uU(5,"Password should contain 8 characters or more"),t.qZA(),t.qZA(),t.TgZ(6,"div",34),t.YNc(7,W,2,0,"mat-icon",35),t.YNc(8,G,2,0,"mat-icon",36),t.TgZ(9,"span",37),t._uU(10,"Password should contain at least one upper case character"),t.qZA(),t.qZA(),t.TgZ(11,"div",34),t.YNc(12,K,2,0,"mat-icon",35),t.YNc(13,z,2,0,"mat-icon",36),t.TgZ(14,"span",37),t._uU(15,"Password should contain at least a number"),t.qZA(),t.qZA(),t.TgZ(16,"div",38),t.YNc(17,X,2,0,"mat-icon",35),t.YNc(18,j,2,0,"mat-icon",36),t.TgZ(19,"span",37),t._uU(20,"Password should contain at least one special character"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.validatePassword.length>=8),t.xp6(1),t.Q6J("ngIf",e.validatePassword.length<8),t.xp6(4),t.Q6J("ngIf",!e.upperCaseChar),t.xp6(1),t.Q6J("ngIf",e.upperCaseChar),t.xp6(4),t.Q6J("ngIf",e.numberChar),t.xp6(1),t.Q6J("ngIf",!e.numberChar),t.xp6(4),t.Q6J("ngIf",e.specialChar),t.xp6(1),t.Q6J("ngIf",!e.specialChar)}}function tt(n,s){1&n&&(t.TgZ(0,"span",41),t.TgZ(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.qZA())}function et(n,s){1&n&&t._UZ(0,"mat-spinner")}function nt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",42),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateEmail()}),t._uU(2," Verify "),t.YNc(3,et,1,0,"mat-spinner",15),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.form.controls.email.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function ot(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",53),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function st(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",53),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function rt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",53),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function it(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",53),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function at(n,s){1&n&&(t.TgZ(0,"mat-error",54),t._uU(1," Passwords do not match "),t.qZA())}function ct(n,s){1&n&&t._UZ(0,"mat-spinner")}const P=function(n){return{"is-invalid":n}};function lt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12),t.TgZ(2,"label"),t._uU(3,"Full Name"),t.qZA(),t._UZ(4,"input",43),t.qZA(),t.TgZ(5,"div",12),t.TgZ(6,"label"),t._uU(7,"Password"),t.qZA(),t.TgZ(8,"input",44),t.NdJ("input",function(){t.CHM(e);const r=t.oxw();return r.checkPassword(r.passwordValue)}),t.qZA(),t.YNc(9,ot,3,0,"span",45),t.YNc(10,st,3,0,"span",45),t.qZA(),t.TgZ(11,"div",12),t.TgZ(12,"label"),t._uU(13,"Confirm Password"),t.qZA(),t._UZ(14,"input",46),t.YNc(15,rt,3,0,"span",45),t.YNc(16,it,3,0,"span",45),t.YNc(17,at,2,0,"mat-error",47),t.qZA(),t.TgZ(18,"div",48),t.TgZ(19,"mat-checkbox",49),t._uU(20,"I agree to the"),t.qZA(),t.TgZ(21,"span",50),t.TgZ(22,"a",51),t._uU(23,"terms & conditions"),t.qZA(),t._uU(24,"of churchvest"),t.qZA(),t.qZA(),t.TgZ(25,"button",52),t._uU(26," Create Account "),t.YNc(27,ct,1,0,"mat-spinner",15),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.VKq(13,P,e.form.controls.name.hasError("required")&&e.form.controls.name.touched)),t.xp6(4),t.Q6J("type",e.show?"text":"password")("ngClass",t.VKq(15,P,e.form.controls.password.hasError("required")&&e.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(4),t.Q6J("type",e.show?"text":"password")("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(1),t.Q6J("ngIf",e.form.hasError("notSame")&&e.form.controls.confirmPassword.touched),t.xp6(2),t.Q6J("checked",e.isChecked),t.xp6(6),t.Q6J("disabled",!e.form.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function ut(n,s){1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2,"This email already exists."),t.qZA(),t.TgZ(3,"div",56),t.TgZ(4,"a",57),t._uU(5,"Login to Existing Church"),t.qZA(),t.qZA(),t.BQk())}let gt=(()=>{class n{constructor(e,o,r,g){this.authServ=e,this.toastr=o,this.fb=r,this.router=g,this.show=!1,this.isBusy=!1,this.validate=!1,this.recordFound=!1,this.isChecked=!0,this.matcher=new E,this._validateCaps=u.SJ,this._hasNumber=u.Yo,this._checkForSpecialChars=u.vA,this.form=new i.cw({}),this.checkPasswordMatch=T=>T.get("password").value===T.get("confirmPassword").value?null:{notSame:!0},this.form=this.fb.group({email:["",[i.kI.email,i.kI.required]],name:["",i.kI.required],password:["",i.kI.required],confirmPassword:[""]},{validators:this.checkPasswordMatch})}ngOnInit(){}get value(){return this.form.getRawValue()}get passwordValue(){return this.form.controls.password.value}checkPassword(e){this.validatePassword=e,this.upperCaseChar=this._validateCaps(e),this.numberChar=this._hasNumber(e),this.specialChar=this._checkForSpecialChars(e)}get emailCtrInstance(){return this.form.get("email")}password(){this.show=!this.show}resetControl(){"INVALID"==this.emailCtrInstance.status&&(this.recordFound=!1)}validateEmail(){this.isBusy=!0,this.authServ.resolveUser({email:this.emailCtrInstance.value}).subscribe(({message:o,data:r})=>{this.isBusy=!1,0==r.length?(this.recordData=r,this.recordFound=!0):(this.recordFound=!0,this.recordData=r,this.recordMsg=o,this.toastr.info(o,"Message",{timeOut:3e3}))},()=>{this.isBusy=!1,this.recordFound=!1})}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.register(this.value).subscribe(e=>{const{data:o}=e;this.recordFound=!1,this.toastr.success("Registration successful","Message"),this.form.reset(),this.navigate(o.email)},e=>{this.toastr.error(e,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}navigate(e){this.router.navigate(["/onboarding/verify-email"],{queryParams:{query:e}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(_._W),t.Y36(i.qu),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-register"]],decls:77,vars:10,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/login"],["class","mb-3",4,"ngIf"],["class","panel mb-3 p-3",4,"ngIf"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass","input"],["class","toggle-btn txt-grey green",4,"ngIf"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/",1,"d-flex","align-items-center"],["src","assets/img/png/church_logo.png","alt","logo",1,"logo"],[1,"ms-1"],["id","terms-condition","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-wrapper"],[1,"modal-content-wrap"],[1,"modal-body"],[1,"header-top","d-flex","justify-content-between","align-items-center","px-4","py-3"],[1,"title"],["data-bs-dismiss","modal",1,"cursor"],[1,"scroll","content","mt-2","w--600","p-2"],[1,"f12"],[1,"unordered"],[1,"mb-3"],[1,"f12","txt-green"],[1,"panel","mb-3","p-3"],[1,"d-flex","align-items-center","mb-2"],["class","txt-green",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"f12","text-grey","ms-2"],[1,"d-flex","align-items-center"],[1,"txt-green"],[1,"text-danger"],[1,"toggle-btn","txt-grey","green"],["type","submit","mat-stroked-button","",1,"w-100",3,"disabled","click"],["type","text","placeholder","Enter full name","formControlName","name",3,"ngClass"],["placeholder","Enter password","formControlName","password",3,"type","ngClass","input"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],["formControlName","confirmPassword","placeholder","Confirm password",3,"type","errorStateMatcher"],["class","f12 my-2",4,"ngIf"],[1,"d-flex","align-items-center","my-4"],[3,"checked"],[1,"link"],["data-bs-toggle","modal","data-bs-target","#terms-condition"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[1,"toggle-btn","txt-grey",3,"click"],[1,"f12","my-2"],[1,"f12","text-danger","my-3"],[1,"panel","d-flex","align-items-center","justify-content-center"],["routerLink","/onboarding/login",1,"f12"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",7),t.TgZ(11,"h2"),t._uU(12," Sign Up To "),t._UZ(13,"br"),t._uU(14," Use Churchvest "),t.qZA(),t.TgZ(15,"p",8),t._uU(16," I have an account already. "),t.TgZ(17,"a",9),t._uU(18,"LOGIN HERE"),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,V,3,1,"div",10),t.YNc(20,$,21,8,"div",11),t.TgZ(21,"div",12),t.TgZ(22,"label"),t._uU(23,"Email Address"),t.qZA(),t.TgZ(24,"input",13),t.NdJ("input",function(){return o.resetControl()}),t.qZA(),t.YNc(25,tt,3,0,"span",14),t.qZA(),t.YNc(26,nt,4,2,"ng-container",15),t.YNc(27,lt,28,17,"ng-container",15),t.YNc(28,ut,6,0,"ng-container",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",16),t.TgZ(30,"div",17),t.TgZ(31,"a",18),t._UZ(32,"img",19),t.TgZ(33,"span",20),t._uU(34,"Churchvest"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.TgZ(37,"div",23),t.TgZ(38,"div",24),t.TgZ(39,"div",25),t.TgZ(40,"div",26),t._uU(41,"Terms & Conditions"),t.qZA(),t.TgZ(42,"mat-icon",27),t._uU(43,"close"),t.qZA(),t.qZA(),t.TgZ(44,"div",2),t.TgZ(45,"div",28),t.TgZ(46,"p",29),t._uU(47,"Last modified on 1 August 2021"),t.qZA(),t.TgZ(48,"p"),t.TgZ(49,"strong"),t._uU(50,"Note"),t.qZA(),t._uU(51," \u2013 These terms are applicable to the Churchvest trade site, where you can buy and sell your products. If you require Terms for the Churchvest (where you can buy/sell products) please go to www.churchvest/terms-conditions Welcome to Churchvest Please read these website Terms & Conditions carefully before using this website (the \u201cWebsite\u201d or \u201cChurchvest\u201d) and the services and tools offered by Haningburg Dreams Limited. (\u201cChurchvest\u201d). These Website Terms & Conditions (the \u201cTerms & Conditions\u201d) govern your access to and use of the Website, Churchvest products and services, and Churchvest.com mobile applications (together, \u201cChurchvest Services\u201d). Churchvest\u2019s Privacy Statement and its Consent to Arbitration and Governing Law are incorporated in the Terms & Conditions by reference and form part of the Terms & Conditions. Please read the Terms & Conditions carefully. By clicking as indicated below, you accept and agree to be bound by these Terms & Conditions. If you do not agree to be bound by these Terms & Conditions, you must not access or use the Website or any Churchvest Services. "),t.qZA(),t.TgZ(52,"h3"),t._uU(53,"General"),t.qZA(),t.TgZ(54,"p"),t._uU(55," Churchvest Services are for the use of persons who are 18 years of age or older only. When using Churchvest Services, you agree that: "),t.qZA(),t.TgZ(56,"ul",30),t.TgZ(57,"li"),t._uU(58," You are the legal owner or have permission of the owner to sell the items you are attempting to sell through Churchvest; "),t.qZA(),t.TgZ(59,"li"),t._uU(60," You are at least 18 years of age and reside in the Nigeria or one of its territories or possessions. If you do not meet these eligibility requirements, you must not access or use the Website; "),t.qZA(),t.TgZ(61,"li"),t._uU(62," You will not violate any laws, third party rights or our Terms & Conditions or other policies; "),t.qZA(),t.TgZ(63,"li"),t._uU(64," The information you provide will be truthful and accurate; "),t.qZA(),t.TgZ(65,"li"),t._uU(66," You will not impersonate any individual or provide false registration information; You will not transfer your account or user ID to another party without Churchvest\u2019s consent; "),t.qZA(),t.TgZ(67,"li"),t._uU(68," You will open and use no more than one account with Churchvest (multiple accounts are not permitted); "),t.qZA(),t.TgZ(69,"li"),t._uU(70," You are responsible for maintaining the confidentiality of your account information including your password; and "),t.qZA(),t.TgZ(71,"li"),t._uU(72,' You will not copy, modify, creative derivative works of, distribute, publicly perform or display, or otherwise exploit any content from Churchvest Services, except as explicitly permitted by these Terms & Conditions (see the section below titled "License" for more detail). '),t.qZA(),t.qZA(),t.TgZ(73,"p"),t._uU(74," We may transfer, assign, sub-contract or otherwise dispose of this contract, or any of our rights or obligations arising under it, at any time during the term of the contract at our discretion. You may not transfer, assign, or in any way dispose of this contract or any of your rights or obligations arising under it, without our express written prior consent, which may be electronically communicated by way of email. Churchvest reserves the absolute right to close your account, terminate this agreement, and cease doing business with you at its sole discretion and for any reason it determines. "),t.qZA(),t.TgZ(75,"p"),t._uU(76," Changes To The Terms And Conditions We may revise and update these Terms and Conditions from time to time in our sole discretion. All changes are effective immediately when we post them, and apply to all access to and use of the Website thereafter. Your continued use of the Website following the posting of revised Terms and Conditions means that you accept and agree to the changes. You are expected to check this each time you access this Website so you are aware of any changes, as they are binding on you. "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",o.recordData&&0!==o.recordData.length),t.xp6(1),t.Q6J("ngIf",o.validatePassword),t.xp6(4),t.Q6J("ngClass",t.VKq(8,P,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",o.recordFound),t.xp6(1),t.Q6J("ngIf",!o.recordFound),t.xp6(1),t.Q6J("ngIf",o.recordFound&&o.recordData&&0==o.recordData.length),t.xp6(1),t.Q6J("ngIf",o.recordData&&0!==o.recordData.length))},directives:[m.yS,f.Hw,i._Y,i.JL,i.sg,p.O5,i.Fj,i.JJ,i.u,p.mk,Z.lW,y.Ou,w.oG,x.TO],styles:[".panel[_ngcontent-%COMP%]{padding:.5em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}.link[_ngcontent-%COMP%]{line-height:27px;font-size:14px}.link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 6px;cursor:pointer}"]}),n})();class E{isErrorState(s){var e,o,r;const g=!(!(null==s?void 0:s.invalid)||!(null===(e=null==s?void 0:s.parent)||void 0===e?void 0:e.dirty)),T=!(!(null===(o=null==s?void 0:s.parent)||void 0===o?void 0:o.invalid)||!(null===(r=null==s?void 0:s.parent)||void 0===r?void 0:r.dirty));return g||T}}function mt(n,s){1&n&&(t.TgZ(0,"span",20),t.TgZ(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.qZA())}function pt(n,s){1&n&&t._UZ(0,"mat-spinner")}const M=function(n){return{"is-invalid":n}};function dt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t.TgZ(2,"form",12),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onResetEmail()}),t.TgZ(3,"div",13),t.TgZ(4,"h2"),t._uU(5,"Claim Back "),t._UZ(6,"br"),t._uU(7,"Your Account"),t.qZA(),t.TgZ(8,"p",14),t._uU(9," I remember my password now. "),t.TgZ(10,"a",15),t._uU(11,"LOGIN HERE"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",16),t.TgZ(13,"label"),t._uU(14,"Email Address"),t.qZA(),t._UZ(15,"input",17),t.YNc(16,mt,3,0,"span",18),t.qZA(),t.TgZ(17,"button",19),t._uU(18," Send Reset Link "),t.YNc(19,pt,1,0,"mat-spinner",5),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.resetEmailForm),t.xp6(13),t.Q6J("ngClass",t.VKq(5,M,e.resetEmailForm.controls.email.hasError("required")&&!e.resetEmailForm.controls.email.valid&&e.resetEmailForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",e.recordFound),t.xp6(1),t.Q6J("disabled",!e.resetEmailForm.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function _t(n,s){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"check_circle"),t.qZA())}function ht(n,s){1&n&&(t.TgZ(0,"mat-icon",33),t._uU(1,"cancel"),t.qZA())}function ft(n,s){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"check_circle"),t.qZA())}function Zt(n,s){1&n&&(t.TgZ(0,"mat-icon",33),t._uU(1,"cancel"),t.qZA())}function Tt(n,s){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"check_circle"),t.qZA())}function vt(n,s){1&n&&(t.TgZ(0,"mat-icon",33),t._uU(1,"cancel"),t.qZA())}function yt(n,s){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"check_circle"),t.qZA())}function Ct(n,s){1&n&&(t.TgZ(0,"mat-icon",33),t._uU(1,"cancel"),t.qZA())}function wt(n,s){if(1&n&&(t.TgZ(0,"div",26),t.TgZ(1,"div",27),t.YNc(2,_t,2,0,"mat-icon",28),t.YNc(3,ht,2,0,"mat-icon",29),t.TgZ(4,"span",30),t._uU(5,"Password should contain 8 characters or more"),t.qZA(),t.qZA(),t.TgZ(6,"div",27),t.YNc(7,ft,2,0,"mat-icon",28),t.YNc(8,Zt,2,0,"mat-icon",29),t.TgZ(9,"span",30),t._uU(10,"Password should contain at least one upper case character"),t.qZA(),t.qZA(),t.TgZ(11,"div",27),t.YNc(12,Tt,2,0,"mat-icon",28),t.YNc(13,vt,2,0,"mat-icon",29),t.TgZ(14,"span",30),t._uU(15,"Password should contain at least a number"),t.qZA(),t.qZA(),t.TgZ(16,"div",31),t.YNc(17,yt,2,0,"mat-icon",28),t.YNc(18,Ct,2,0,"mat-icon",29),t.TgZ(19,"span",30),t._uU(20,"Password should contain at least one special character"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.validatePassword.length>=8),t.xp6(1),t.Q6J("ngIf",e.validatePassword.length<8),t.xp6(4),t.Q6J("ngIf",!e.upperCaseChar),t.xp6(1),t.Q6J("ngIf",e.upperCaseChar),t.xp6(4),t.Q6J("ngIf",e.numberChar),t.xp6(1),t.Q6J("ngIf",!e.numberChar),t.xp6(4),t.Q6J("ngIf",e.specialChar),t.xp6(1),t.Q6J("ngIf",!e.specialChar)}}function At(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function xt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function qt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function bt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function Ut(n,s){1&n&&(t.TgZ(0,"mat-error",35),t._uU(1," Passwords do not match "),t.qZA())}function kt(n,s){1&n&&t._UZ(0,"mat-spinner")}function It(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t.TgZ(2,"form",12),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onResetPassword()}),t.TgZ(3,"div",13),t.TgZ(4,"h2"),t._uU(5,"Enter Your "),t._UZ(6,"br"),t._uU(7,"New Password"),t.qZA(),t.qZA(),t.YNc(8,wt,21,8,"div",21),t.TgZ(9,"div",16),t.TgZ(10,"label"),t._uU(11,"Password"),t.qZA(),t.TgZ(12,"input",22),t.NdJ("input",function(){t.CHM(e);const r=t.oxw();return r.checkPassword(r.passwordTrueValue)}),t.qZA(),t.YNc(13,At,3,0,"span",23),t.YNc(14,xt,3,0,"span",23),t.qZA(),t.TgZ(15,"div",16),t.TgZ(16,"label"),t._uU(17,"Confirm Password"),t.qZA(),t._UZ(18,"input",24),t.YNc(19,qt,3,0,"span",23),t.YNc(20,bt,3,0,"span",23),t.YNc(21,Ut,2,0,"mat-error",25),t.qZA(),t.TgZ(22,"button",19),t._uU(23," Reset Password "),t.YNc(24,kt,1,0,"mat-spinner",5),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.resetPasswordForm),t.xp6(6),t.Q6J("ngIf",e.validatePassword),t.xp6(4),t.Q6J("type",e.show?"text":"password")("ngClass",t.VKq(13,M,e.resetPasswordForm.controls.password.hasError("required")&&e.resetPasswordForm.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(4),t.Q6J("type",e.show?"text":"password")("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(1),t.Q6J("ngIf",e.resetPasswordForm.hasError("notSame")&&e.resetPasswordForm.controls.password_confirmation.touched),t.xp6(1),t.Q6J("disabled",!e.resetPasswordForm.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}let L=(()=>{class n{constructor(e,o,r,g,T,Y){this.authService=e,this.route=o,this.router=r,this.fb=g,this.toastr=T,this._bottomSheet=Y,this.showContentType=!1,this.show=!1,this.isBusy=!1,this.matcher=new E,this._validateCaps=u.SJ,this._hasNumber=u.Yo,this._checkForSpecialChars=u.vA,this.resetEmailForm=new i.cw({}),this.resetPasswordForm=new i.cw({}),this.checkPasswordMatch=U=>U.get("password").value===U.get("password_confirmation").value?null:{notSame:!0},this.resetEmailForm=this.fb.group({email:[null,[i.kI.required,i.kI.email]]}),this.resetPasswordForm=this.fb.group({email:[null],password:["",i.kI.required],password_confirmation:[],token:[null]},{validators:this.checkPasswordMatch})}ngOnInit(){this.getRoutes()}get emailValue(){return this.resetEmailForm.getRawValue()}get emailTrueValue(){return this.resetEmailForm.controls.email.value}get passwordValue(){return this.resetPasswordForm.getRawValue()}get passwordTrueValue(){return this.resetPasswordForm.controls.password.value}password(){this.show=!this.show}checkPassword(e){this.validatePassword=e,this.upperCaseChar=this._validateCaps(e),this.numberChar=this._hasNumber(e),this.specialChar=this._checkForSpecialChars(e)}getRoutes(){this.router.url.includes("reset-password")?(this.showContentType=!0,this.route.paramMap.subscribe(e=>{this.token=e.get("token")}),this.route.queryParamMap.subscribe(e=>{this.reset_email=e.get("email")})):this.showContentType=!1}navigate(e){this.router.navigate(["/onboarding/verify-email"],{queryParams:{query:e}})}onResetEmail(){this.isBusy=!0,this.resetEmailForm.invalid?this.isBusy=!1:this.resetEmailForm.valid&&this.authService.resetEmail(this.emailValue).subscribe(e=>{this.isBusy=!1,this.toastr.success(e.message,"Message"),this.openBottomSheet(this.emailTrueValue),this.resetEmailForm.reset()},e=>{this.isBusy=!1,this.toastr.error(e,"Message")},()=>{this.isBusy=!1,this.resetEmailForm.reset()})}onResetPassword(){this.isBusy=!0,this.resetPasswordForm.invalid?this.isBusy=!1:(this.resetPasswordForm.patchValue({email:this.reset_email,token:this.token}),this.resetPasswordForm.valid&&this.authService.resetPassword(this.passwordValue).subscribe(e=>{this.isBusy=!1,this.toastr.success(e.message,"Message"),this.autoLogUserIn()},e=>{this.isBusy=!1,this.toastr.error(e,"Message")}))}autoLogUserIn(){this.authService.login({email:this.reset_email,password:this.passwordTrueValue}).subscribe(o=>{const{data:r}=o;"success"===o.status&&(this.toastr.success("Login successful","Message"),localStorage.setItem("token",o.access_token),localStorage.setItem("user_details",JSON.stringify(r)),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user_church",JSON.stringify(o.data.memberships[0])),null!==o.data.email_verified_at&&o.data.email_verified_at?this.router.navigate(["/portal/activity"]):this.navigate(o.data.email))},o=>{this.toastr.error(o,"Message"),this.isBusy=!1},()=>{this.isBusy=!1})}openBottomSheet(e){this._bottomSheet.open(A,{data:{data:e,type:"reset_link"}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(m.gz),t.Y36(m.F0),t.Y36(i.qu),t.Y36(_._W),t.Y36(d.ch))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-forgot-password"]],decls:16,vars:2,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/",1,"d-flex","align-items-center"],["src","assets/img/png/church_logo.png","alt","logo",1,"logo"],[1,"ms-1"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/login"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass"],["class","toggle-btn txt-grey green",4,"ngIf"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[1,"toggle-btn","txt-grey","green"],["class","panel mb-3 p-3",4,"ngIf"],["placeholder","Enter password","formControlName","password",3,"type","ngClass","input"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],["formControlName","password_confirmation","placeholder","Confirm password",3,"type","errorStateMatcher"],["class","f12 my-2",4,"ngIf"],[1,"panel","mb-3","p-3"],[1,"d-flex","align-items-center","mb-2"],["class","txt-green",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"f12","text-grey","ms-2"],[1,"d-flex","align-items-center"],[1,"txt-green"],[1,"text-danger"],[1,"toggle-btn","txt-grey",3,"click"],[1,"f12","my-2"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.YNc(8,dt,20,7,"ng-container",5),t.YNc(9,It,25,15,"ng-container",5),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"a",8),t._UZ(13,"img",9),t.TgZ(14,"span",10),t._uU(15,"Churchvest"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngIf",!o.showContentType),t.xp6(1),t.Q6J("ngIf",o.showContentType))},directives:[m.yS,f.Hw,p.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,p.mk,Z.lW,y.Ou,x.TO],styles:[".panel[_ngcontent-%COMP%]{padding:.5em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}"]}),n})();var St=l(4107),Jt=l(8908);function Ft(n,s){if(1&n&&(t.TgZ(0,"div",20),t.TgZ(1,"span",21),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.recordMsg)}}function Nt(n,s){1&n&&(t.TgZ(0,"span",22),t.TgZ(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.qZA())}function Pt(n,s){1&n&&t._UZ(0,"mat-spinner")}function Yt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateEmail()}),t._uU(2," Verify "),t.YNc(3,Pt,1,0,"mat-spinner",14),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.form.controls.email.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function Qt(n,s){1&n&&(t.ynx(0),t.TgZ(1,"div",24),t.TgZ(2,"p",25),t._uU(3," No record found: "),t.TgZ(4,"a",9),t._uU(5,"Signup here"),t.qZA(),t.qZA(),t.qZA(),t.BQk())}function Et(n,s){if(1&n&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.church),t.xp6(1),t.Oqu(e.church.name)}}function Mt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"label"),t._uU(2,"Select Church"),t.qZA(),t.TgZ(3,"mat-select",33),t.NdJ("selectionChange",function(r){return t.CHM(e),t.oxw(2).onChurchSelect(r)}),t.TgZ(4,"mat-option",34),t._uU(5," Select church "),t.qZA(),t.YNc(6,Et,2,2,"mat-option",35),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("ngForOf",e.recordData.memberships)}}function Lt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function Bt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function Ot(n,s){1&n&&t._UZ(0,"mat-spinner")}const B=function(n){return{"is-invalid":n}};function Rt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,Mt,7,1,"div",26),t.TgZ(2,"div",11),t.TgZ(3,"label"),t._uU(4,"Password"),t.qZA(),t._UZ(5,"input",27),t.YNc(6,Lt,3,0,"span",28),t.YNc(7,Bt,3,0,"span",28),t.qZA(),t.TgZ(8,"div",29),t.TgZ(9,"mat-checkbox",30),t._uU(10,"Stay signed in"),t.qZA(),t.TgZ(11,"a",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearStorage()}),t._uU(12,"Reset password"),t.qZA(),t.qZA(),t.TgZ(13,"button",32),t._uU(14," Login "),t.YNc(15,Ot,1,0,"mat-spinner",14),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!==e.recordData.memberships.length),t.xp6(4),t.Q6J("type",e.show?"text":"password")("ngClass",t.VKq(8,B,e.form.controls.password.hasError("required")&&e.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(2),t.Q6J("checked",e.isChecked),t.xp6(4),t.Q6J("disabled",!e.form.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}let Vt=(()=>{class n{constructor(e,o,r,g){this.authServ=e,this.toastr=o,this.fb=r,this.router=g,this.show=!1,this.isBusy=!1,this.validate=!1,this.recordFound=!1,this.isChecked=!0,this.form=new i.cw({}),this.form=this.fb.group({email:["",[i.kI.email,i.kI.required]],password:["",i.kI.required]})}ngOnInit(){}get value(){return this.form.getRawValue()}get emailCtrInstance(){return this.form.get("email")}password(){this.show=!this.show}onChurchSelect(e){this.selectedChurch=e.value}clearStorage(){localStorage.clear()}resetControl(){"INVALID"==this.emailCtrInstance.status&&(this.recordFound=!1)}validateEmail(){this.isBusy=!0,this.authServ.resolveUser({email:this.emailCtrInstance.value}).subscribe(({message:o,data:r})=>{this.isBusy=!1,0==r.length?(this.recordData=r,this.toastr.error(o,"Message",{timeOut:3e3})):(this.recordFound=!0,this.recordData=r,this.recordMsg=o,0!==this.recordData.memberships.length&&this.toastr.info(o,"Message",{timeOut:3e3}))},()=>{this.isBusy=!1,this.recordFound=!1})}navigate(e){this.router.navigate(["/onboarding/verify-email"],{queryParams:{query:e}})}onSubmit(){this.isBusy=!0,null!=this.recordData&&this.form.valid&&this.authServ.login(this.value).subscribe(e=>{const{data:o,status:r,access_token:g}=e;if("success"===r){if(localStorage.setItem("token",g),localStorage.setItem("user_details",JSON.stringify(o)),0!==o.memberships.length&&!this.selectedChurch)return this.toastr.info("Please select a church","Message"),void(this.isBusy=!1);0!==o.memberships.length&&(this.recordFound=!1,this.form.reset(),this.toastr.success("Login successful","Message"),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user_church",JSON.stringify(this.selectedChurch)),this.router.navigate(["/portal/activity"])),(null===o.email_verified_at||!o.email_verified_at)&&this.navigate(o.email),null!==o.email_verified_at&&!this.selectedChurch&&this.router.navigateByUrl("/onboarding/church-setup")}},e=>{this.toastr.error(e,"Message"),this.isBusy=!1},()=>{this.isBusy=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(_._W),t.Y36(i.qu),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:34,vars:9,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/register"],["class","panel mb-3",4,"ngIf"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass","input"],["class","toggle-btn txt-grey green",4,"ngIf"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/",1,"d-flex","align-items-center"],["src","assets/img/png/church_logo.png","alt","logo",1,"logo"],[1,"ms-1"],[1,"panel","mb-3"],[1,"f12","txt-green"],[1,"toggle-btn","txt-grey","green"],["type","submit","mat-stroked-button","",1,"w-100",3,"disabled","click"],[1,"d-flex","my-3"],[1,"f12","text-danger"],["class","input",4,"ngIf"],["placeholder","Enter password","formControlName","password",3,"type","ngClass"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","my-4"],[3,"checked"],["routerLink","/onboarding/forgot-password",1,"f12",3,"click"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],["placeholder","Connect to church",1,"select",3,"selectionChange"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"toggle-btn","txt-grey",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",7),t.TgZ(11,"h2"),t._uU(12,"Log Back Into "),t._UZ(13,"br"),t._uU(14,"Your Account"),t.qZA(),t.TgZ(15,"p",8),t._uU(16," I don\u2019t have an account yet. "),t.TgZ(17,"a",9),t._uU(18,"GET STARTED"),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,Ft,3,1,"div",10),t.TgZ(20,"div",11),t.TgZ(21,"label"),t._uU(22,"Email Address"),t.qZA(),t.TgZ(23,"input",12),t.NdJ("input",function(){return o.resetControl()}),t.qZA(),t.YNc(24,Nt,3,0,"span",13),t.qZA(),t.YNc(25,Yt,4,2,"ng-container",14),t.YNc(26,Qt,6,0,"ng-container",14),t.YNc(27,Rt,16,10,"ng-container",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"div",16),t.TgZ(30,"a",17),t._UZ(31,"img",18),t.TgZ(32,"span",19),t._uU(33,"Churchvest"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",o.recordData&&o.recordFound&&0!==o.recordData.memberships.length),t.xp6(4),t.Q6J("ngClass",t.VKq(7,B,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",o.recordFound),t.xp6(1),t.Q6J("ngIf",!o.recordFound),t.xp6(1),t.Q6J("ngIf",o.recordData&&0==o.recordData.length),t.xp6(1),t.Q6J("ngIf",o.recordFound))},directives:[m.yS,f.Hw,i._Y,i.JL,i.sg,p.O5,i.Fj,i.JJ,i.u,p.mk,Z.lW,y.Ou,w.oG,St.gD,Jt.ey,p.sg],styles:[""]}),n})();var Dt=l(5435);function Ht(n,s){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"p",6),t._uU(2," We sent a verification email to "),t.TgZ(3,"span",15),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"div",16),t.TgZ(6,"p",17),t._uU(7," Please check your email to confirm your account and complete your account creation process. "),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.hij("",e.queryString,",")}}function Wt(n,s){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"p",17),t._uU(2,"You have not verified your email."),t.qZA(),t.TgZ(3,"p",17),t._uU(4," Please check your email to confirm your account. "),t.qZA(),t.qZA())}const Kt=[{path:"",component:k,canActivate:[Q.d],children:[{path:"api/email/verify/:*/:*",component:N,data:{title:"ChurchVest - Account Verification"}},{path:"church-setup",component:c,data:{title:"ChurchVest - Church Setup"}},{path:"login",component:Vt,data:{title:"ChurchVest - Login"}},{path:"forgot-password",component:L,data:{title:"ChurchVest - Forgot Password"}},{path:"register",component:gt,data:{title:"ChurchVest - Create Account"}},{path:"reset-password/:token",component:L,data:{title:"ChurchVest - Reset Your Password"}},{path:"verify-email",component:(()=>{class n{constructor(e,o,r,g){this.authService=e,this.route=o,this.router=r,this._bottomSheet=g,this.loading=!1}ngOnInit(){this.getRoutes(),this.token=localStorage.getItem("token")}getRoutes(){this.route.queryParams.pipe((0,Dt.h)(e=>e.query)).subscribe(e=>{this.queryString=e.query}),""===this.queryString&&this.router.navigate(["/onboarding/register"])}resend(){this.loading=!0,this.authService.resendVerificationEmail().subscribe(e=>{this.loading=!1,"success"===e.status&&this.openBottomSheet()},()=>{this.loading=!1})}openBottomSheet(){this._bottomSheet.open(A,{data:{data:this.queryString,type:"verification_link"}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(m.gz),t.Y36(m.F0),t.Y36(d.ch))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-verify-email"]],decls:23,vars:2,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-450","pt-5"],["routerLink","/",1,"return-link"],[1,"content","w-450","mt-5","d-flex","flex-column"],[1,"txt-grey","my-2"],[1,"my-3"],["src","assets/img/svg/mail.svg","alt","mail"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/",1,"d-flex","align-items-center"],["src","assets/img/png/church_logo.png","alt","logo",1,"logo"],[1,"ms-1"],[1,"f12","text-success"],[1,"my-5"],[1,"txt-grey"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"h2"),t._uU(10,"Verify Your Account"),t.qZA(),t.TgZ(11,"p",6),t._uU(12,"Hello there, welcome to Churchvest!"),t.qZA(),t.TgZ(13,"div",7),t._UZ(14,"img",8),t.qZA(),t.YNc(15,Ht,8,1,"div",9),t.YNc(16,Wt,5,0,"div",9),t.qZA(),t.qZA(),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"a",12),t._UZ(20,"img",13),t.TgZ(21,"span",14),t._uU(22,"Churchvest"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(15),t.Q6J("ngIf",!o.token),t.xp6(1),t.Q6J("ngIf",o.token))},directives:[m.yS,f.Hw,p.O5],styles:[".grid[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:0 auto}.grid[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;color:#080730;font-weight:300;font-size:48px}.grid[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{position:relative;background:url(/assets/img/png/keyboard-keys.png);background-position:center}"]}),n})(),data:{title:"ChurchVest - Email Verification"}},{path:"",redirectTo:"login"}]}];let zt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(Kt)],m.Bz]}),n})();var O=l(8097);let Xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:_._W}],imports:[[p.ez,zt,O.h,O.h,i.UX,i.u5,_.Rh.forRoot()]]}),n})()},3974:(R,q,l)=>{l.d(q,{t:()=>t,p6:()=>k,SJ:()=>i,Yo:()=>I,aS:()=>h,vA:()=>_,sn:()=>f,kA:()=>w,Vz:()=>Z,JT:()=>S,gr:()=>J,xU:()=>F,gw:()=>b,EU:()=>N});const t=(a,c)=>(null==a?void 0:a.first_name)==(null==c?void 0:c.first_name)&&(null==a?void 0:a.id)==(null==c?void 0:c.id),k=a=>a.split("T")[0],i=a=>a==a.toLowerCase(),I=a=>/\d/.test(a),h=(a,c)=>a.length>c?a.slice(0,c)+"...":a,_=a=>!!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(a),f=a=>{let c=document.getElementById(a).outerHTML;document.body.outerHTML="<html><head><title></title></head><body>"+c+"</body>",window.print(),document.location.reload()},w=a=>a.split(" ").join(""),Z=(a,c)=>{c.map((u,d)=>(d==a-2&&(u.isCompleted=!0),d==a-1&&(u.isCompleted=!1),u.isCompleted))},S=a=>{let c=new Date(a),u=new Date,d=u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2);return""!==a&&void 0!==a&&(c.setDate(c.getDate()+1),d=c.toISOString().split("T")[0]),d},J=a=>{const c=a.split(/[- :]/);let C,v,A,x,u=c[1],d=c[2];return C=new Date,v=new Date(C.getFullYear(),u-1,d),C.getTime()>v.getTime()&&v.setFullYear(v.getFullYear()+1),A=v.getTime()-C.getTime(),x=Math.floor(A/864e5)+1,x},F=()=>["January","February","March","April","May","June","July","August","September","October","November","December"],b=()=>["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],N=a=>{a.target.value.length>a.target.maxLength&&(a.target.value=a.target.value.slice(0,a.target.maxLength))}}}]);