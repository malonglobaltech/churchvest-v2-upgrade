"use strict";(self.webpackChunkchurchvest_v2=self.webpackChunkchurchvest_v2||[]).push([[745],{8745:(Zt,b,r)=>{r.r(b),r.d(b,{ReportingModule:()=>dt});var s=r(8583),f=r(4655),x=r(449),a=r(9222),l=r(3974),y=r(8259),Z=r.n(y),n=r(7716),w=r(5304),v=r(2592),Q=r(2340),k=r(1841),Y=r(7556);let T=(()=>{class e{constructor(t,_){this.http=t,this.authService=_,this.authService.getChurchSlug()}fetchMembershipJournal(t,_){return this.http.get(`${Q.N.managementbaseUrl}/${this.authService.getChurchSlug()}/reporting/${t}/?date=${_}`).pipe((0,w.K)(v.S))}fetchJournal(t,_){return this.http.get(`${Q.N.managementbaseUrl}/${this.authService.getChurchSlug()}/reporting/${t}/?date=${_}`).pipe((0,w.K)(v.S))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(k.eN),n.LFG(Y.e))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=r(1641),C=r(7423),d=r(5245),u=r(7322),J=r(115),c=r(6856),A=r(2118),p=r(5086);function U(e,o){1&e&&(n.ynx(0),n._UZ(1,"app-loading-roller"),n.BQk())}function O(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",16),n.TgZ(2,"div",17),n.TgZ(3,"h3",18),n._uU(4,"Income Information"),n.qZA(),n.TgZ(5,"div",19),n.TgZ(6,"span"),n.TgZ(7,"mat-icon"),n._uU(8,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(9,"mat-menu",null,20),n.TgZ(11,"button",21),n.NdJ("click",function(){return n.CHM(t),n.oxw().onPreview("expenses")}),n._uU(12," Preview "),n.qZA(),n.TgZ(13,"button",21),n.NdJ("click",function(){return n.CHM(t),n.oxw()._printElement("print-icome")}),n._uU(14," Print "),n.qZA(),n.TgZ(15,"button",22),n.NdJ("click",function(){return n.CHM(t),n.oxw().exportIncomeToExcel()}),n._uU(16," Download as Excel "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",23),n.TgZ(18,"p",24),n._uU(19," See in detail the income(revenue) transaction history of the church. "),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(10);n.xp6(5),n.Q6J("mat-menu-trigger-for",t)}}function I(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",16),n.TgZ(2,"div",17),n.TgZ(3,"h3",18),n._uU(4,"Expenses Information"),n.qZA(),n.TgZ(5,"div",19),n.TgZ(6,"span"),n.TgZ(7,"mat-icon"),n._uU(8,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(9,"mat-menu",null,20),n.TgZ(11,"button",21),n.NdJ("click",function(){return n.CHM(t),n.oxw().onPreview("expenses-data")}),n._uU(12," Preview "),n.qZA(),n.TgZ(13,"button",21),n.NdJ("click",function(){return n.CHM(t),n.oxw()._printElement("print-expenses")}),n._uU(14," Print "),n.qZA(),n.TgZ(15,"button",22),n.NdJ("click",function(){return n.CHM(t),n.oxw().exportExpensesToExcel()}),n._uU(16," Download as Excel "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",25),n.TgZ(18,"p",24),n._uU(19,"See in detail the transaction history on expenses of the church."),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(10);n.xp6(5),n.Q6J("mat-menu-trigger-for",t)}}let S=(()=>{class e{constructor(t,_,i){this.reportService=t,this.exportService=_,this._location=i,this.incomeList=[],this.expensesList=[],this._loading_=!1,this._printElement=l.sn,this._setDateQuery=l.JT,this._trancateString=l.aS,this._concatColumnString=l.kA,this.dataSource=new a.by,this.selection=new x.Ov(!0,[])}ngOnInit(){this.getFinancialJournal()}gotoBack(){this._location.back()}onPreview(t){this._query=t}getFinancialJournal(t){this._loading_=!0;let _=(0,l.JT)(t);this.reportService.fetchJournal("financial_journal",_).subscribe(i=>{this._loading_=!1,console.log("res",i)},i=>{this._loading_=!1,Z().fire("Server error",i,"error")})}exportIncomeToExcel(){}exportExpensesToExcel(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(T),n.Y36(h.j),n.Y36(s.Ye))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-financial-journal"]],decls:29,vars:5,consts:[[1,"header","d-flex","align-items-center","mb-4"],[1,"d-flex","align-items-center","cursor","me-3",3,"click"],["mat-icon-button","",1,"me-2","return-link-wrap"],[1,"title-sm"],[1,"title","md"],[1,"bg-white","p-3"],[1,"financial","py-3","px-2"],[1,"my-3"],["matInput","",3,"matDatepicker","dateChange"],["ref",""],["matSuffix","",3,"for"],["datepicker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],[4,"ngIf"],[1,"grid","grid--1fr--1fr","gap","mt-5"],[1,"journal"],[1,"d-flex","align-items-center","justify-content-between"],[1,"title","md","pt-3"],[1,"cursor",3,"mat-menu-trigger-for"],["menu","matMenu"],["type","button","mat-menu-item","",3,"click"],["mat-menu-item","",3,"click"],[1,"d-md-flex","align-items-center","justify-content-between","py-3"],[1,""],[1,"d-flex","align-items-center","justify-content-between","py-3"]],template:function(t,_){if(1&t){const i=n.EpF();n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.NdJ("click",function(){return _.gotoBack()}),n.TgZ(2,"button",2),n.TgZ(3,"mat-icon"),n._uU(4,"west"),n.qZA(),n.qZA(),n.TgZ(5,"div",3),n._uU(6,"Back"),n.qZA(),n.qZA(),n.TgZ(7,"div",4),n._uU(8,"Financial Journal"),n.qZA(),n.qZA(),n.TgZ(9,"div",5),n.TgZ(10,"section",6),n.TgZ(11,"div",7),n.TgZ(12,"mat-form-field"),n.TgZ(13,"mat-label"),n._uU(14,"Query by date"),n.qZA(),n.TgZ(15,"input",8,9),n.NdJ("dateChange",function(){n.CHM(i);const m=n.MAs(16);return _.getFinancialJournal(m.value)}),n.qZA(),n._UZ(17,"mat-datepicker-toggle",10),n.TgZ(18,"mat-datepicker",null,11),n.TgZ(20,"mat-datepicker-actions"),n.TgZ(21,"button",12),n._uU(22,"Cancel"),n.qZA(),n.TgZ(23,"button",13),n._uU(24," Apply "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(25,U,2,0,"ng-container",14),n.TgZ(26,"div",15),n.YNc(27,O,20,1,"ng-container",14),n.YNc(28,I,20,1,"ng-container",14),n.qZA(),n.qZA(),n.qZA()}if(2&t){const i=n.MAs(19);n.xp6(15),n.Q6J("matDatepicker",i),n.xp6(2),n.Q6J("for",i),n.xp6(8),n.Q6J("ngIf",_._loading_),n.xp6(2),n.Q6J("ngIf",!_._loading_),n.xp6(1),n.Q6J("ngIf",!_._loading_)}},directives:[C.lW,d.Hw,u.KE,u.hX,J.Nt,c.hl,c.nW,u.R9,c.Mq,c.M5,c.dp,c.DK,s.O5,A.m,p.p6,p.VK,p.OP],styles:[".financial[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{grid-gap:1em;gap:1em}.financial[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .journal[_ngcontent-%COMP%]{padding:.5em 1.2em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}.financial[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .journal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0;color:#343a4080}"]}),e})();var B=r(6087);function D(e,o){1&e&&(n.ynx(0),n._UZ(1,"app-loading-roller"),n.BQk())}function E(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",19),n.TgZ(2,"div",20),n.TgZ(3,"h3",21),n._uU(4,"Regular Members"),n.qZA(),n.TgZ(5,"div",22),n.TgZ(6,"span"),n.TgZ(7,"mat-icon"),n._uU(8,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(9,"mat-menu",null,23),n.TgZ(11,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw().onPreview("reg_members")}),n._uU(12," Preview "),n.qZA(),n.TgZ(13,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw()._printElement("print-reg-members")}),n._uU(14," Print "),n.qZA(),n.TgZ(15,"button",25),n._uU(16,"Download as Excel"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",26),n.TgZ(18,"p",27),n._uU(19," View and download report of the regular members for the period selected "),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(10);n.xp6(5),n.Q6J("mat-menu-trigger-for",t)}}function F(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",19),n.TgZ(2,"div",20),n.TgZ(3,"h3",21),n._uU(4,"First Timers"),n.qZA(),n.TgZ(5,"div",22),n.TgZ(6,"span"),n.TgZ(7,"mat-icon"),n._uU(8,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(9,"mat-menu",null,23),n.TgZ(11,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw().onPreview("first-timer")}),n._uU(12," Preview "),n.qZA(),n.TgZ(13,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw()._printElement("print-first-timer")}),n._uU(14," Print "),n.qZA(),n.TgZ(15,"button",25),n._uU(16,"Download as Excel"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",26),n.TgZ(18,"p",27),n._uU(19,"See in detail the number of first timers."),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(10);n.xp6(5),n.Q6J("mat-menu-trigger-for",t)}}function $(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",19),n.TgZ(2,"div",20),n.TgZ(3,"h3",21),n._uU(4,"New Converts"),n.qZA(),n.TgZ(5,"div",22),n.TgZ(6,"span"),n.TgZ(7,"mat-icon"),n._uU(8,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(9,"mat-menu",null,23),n.TgZ(11,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw().onPreview("new-convert")}),n._uU(12," Preview "),n.qZA(),n.TgZ(13,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw()._printElement("print-new-convert")}),n._uU(14," Print "),n.qZA(),n.TgZ(15,"button",25),n._uU(16,"Download as Excel"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",26),n.TgZ(18,"p",27),n._uU(19," See in detail of the newly converted souls in church. "),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(10);n.xp6(5),n.Q6J("mat-menu-trigger-for",t)}}function P(e,o){1&e&&n.GkF(0)}function j(e,o){if(1&e&&(n.ynx(0),n.YNc(1,P,1,0,"ng-container",28),n.BQk()),2&e){n.oxw();const t=n.MAs(34);n.xp6(1),n.Q6J("ngTemplateOutlet",t)}}function R(e,o){1&e&&n.GkF(0)}function L(e,o){if(1&e&&(n.ynx(0),n.YNc(1,R,1,0,"ng-container",28),n.BQk()),2&e){n.oxw();const t=n.MAs(36);n.xp6(1),n.Q6J("ngTemplateOutlet",t)}}function H(e,o){1&e&&n.GkF(0)}function V(e,o){if(1&e&&(n.ynx(0),n.YNc(1,H,1,0,"ng-container",28),n.BQk()),2&e){n.oxw();const t=n.MAs(38);n.xp6(1),n.Q6J("ngTemplateOutlet",t)}}function z(e,o){if(1&e&&(n.TgZ(0,"th",39),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t," ")}}function K(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.first_name)}}function W(e,o){1&e&&(n.ynx(0),n.YNc(1,K,3,1,"td",40),n.BQk())}function G(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.last_name)}}function X(e,o){1&e&&(n.ynx(0),n.YNc(1,G,3,1,"td",38),n.BQk())}const M=function(e,o){return{green:e,purple:o}};function nn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span",43),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngClass",n.WLB(2,M,"admin"==t.role,"member"==t.role)),n.xp6(1),n.Oqu(t.role)}}function en(e,o){1&e&&(n.ynx(0),n.YNc(1,nn,3,5,"td",38),n.BQk())}function tn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.phone?t.user.phone:"---")}}function on(e,o){1&e&&(n.ynx(0),n.YNc(1,tn,3,1,"td",38),n.BQk())}function _n(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span",44),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.email?t.user.email:"---")}}function an(e,o){1&e&&(n.ynx(0),n.YNc(1,_n,3,1,"td",38),n.BQk())}function rn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.oxw().$implicit,i=n.oxw(3);n.xp6(2),n.hij(" ",t[i._concatColumnString(_)],"")}}function cn(e,o){if(1&e&&(n.ynx(0,36),n.YNc(1,z,2,1,"th",37),n.YNc(2,W,2,0,"ng-container",14),n.YNc(3,X,2,0,"ng-container",14),n.YNc(4,en,2,0,"ng-container",14),n.YNc(5,on,2,0,"ng-container",14),n.YNc(6,an,2,0,"ng-container",14),n.YNc(7,rn,3,1,"td",38),n.BQk()),2&e){const t=o.$implicit,_=o.index;n.Q6J("matColumnDef",t),n.xp6(2),n.Q6J("ngIf",0===_),n.xp6(1),n.Q6J("ngIf","last name"==t),n.xp6(1),n.Q6J("ngIf","role"==t),n.xp6(1),n.Q6J("ngIf","phone"==t),n.xp6(1),n.Q6J("ngIf","email"==t)}}function sn(e,o){1&e&&n._UZ(0,"tr",45)}const q=function(e){return{"bg-wrap":e}};function ln(e,o){if(1&e&&n._UZ(0,"tr",46),2&e){const t=o.$implicit,_=n.oxw(3);n.Q6J("ngClass",n.VKq(1,q,_.selection.isSelected(t)))}}function gn(e,o){if(1&e&&(n.TgZ(0,"tr",47),n.TgZ(1,"td",48),n._uU(2),n.qZA(),n.qZA()),2&e){const t=n.oxw(3);n.xp6(2),n.hij(' No data matching the search item: "',t.filterValue,'" ')}}function mn(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"table",31),n.YNc(2,cn,8,6,"ng-container",32),n.YNc(3,sn,1,0,"tr",33),n.YNc(4,ln,1,3,"tr",34),n.YNc(5,gn,3,1,"tr",35),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("dataSource",t.dataSource),n.xp6(1),n.Q6J("ngForOf",t.displayedColumns),n.xp6(1),n.Q6J("matHeaderRowDef",t.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",t.displayedColumns)}}function pn(e,o){if(1&e&&(n.TgZ(0,"div",29),n.TgZ(1,"div",30),n.YNc(2,mn,6,4,"ng-container",14),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",0!==t.regularMemberList.length)}}function un(e,o){1&e&&(n.ynx(0),n.TgZ(1,"span",49),n._uU(2,"No record found!"),n.qZA(),n.BQk())}function fn(e,o){if(1&e&&(n.TgZ(0,"th",39),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t," ")}}function dn(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.first_name)}}function xn(e,o){1&e&&(n.ynx(0),n.YNc(1,dn,3,1,"td",40),n.BQk())}function Zn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.last_name)}}function Tn(e,o){1&e&&(n.ynx(0),n.YNc(1,Zn,3,1,"td",38),n.BQk())}function hn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span",43),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngClass",n.WLB(2,M,"admin"==t.role,"member"==t.role)),n.xp6(1),n.Oqu(t.role)}}function Cn(e,o){1&e&&(n.ynx(0),n.YNc(1,hn,3,5,"td",38),n.BQk())}function Jn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.phone?t.user.phone:"---")}}function An(e,o){1&e&&(n.ynx(0),n.YNc(1,Jn,3,1,"td",38),n.BQk())}function Mn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span",44),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.email?t.user.email:"---")}}function qn(e,o){1&e&&(n.ynx(0),n.YNc(1,Mn,3,1,"td",38),n.BQk())}function bn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.oxw().$implicit,i=n.oxw(3);n.xp6(2),n.hij(" ",t[i._concatColumnString(_)],"")}}function wn(e,o){if(1&e&&(n.ynx(0,36),n.YNc(1,fn,2,1,"th",37),n.YNc(2,xn,2,0,"ng-container",14),n.YNc(3,Tn,2,0,"ng-container",14),n.YNc(4,Cn,2,0,"ng-container",14),n.YNc(5,An,2,0,"ng-container",14),n.YNc(6,qn,2,0,"ng-container",14),n.YNc(7,bn,3,1,"td",38),n.BQk()),2&e){const t=o.$implicit,_=o.index;n.Q6J("matColumnDef",t),n.xp6(2),n.Q6J("ngIf",0===_),n.xp6(1),n.Q6J("ngIf","last name"==t),n.xp6(1),n.Q6J("ngIf","role"==t),n.xp6(1),n.Q6J("ngIf","phone"==t),n.xp6(1),n.Q6J("ngIf","email"==t)}}function vn(e,o){1&e&&n._UZ(0,"tr",45)}function Qn(e,o){if(1&e&&n._UZ(0,"tr",46),2&e){const t=o.$implicit,_=n.oxw(3);n.Q6J("ngClass",n.VKq(1,q,_.selection.isSelected(t)))}}function Nn(e,o){if(1&e&&(n.TgZ(0,"tr",47),n.TgZ(1,"td",48),n._uU(2),n.qZA(),n.qZA()),2&e){const t=n.oxw(3);n.xp6(2),n.hij(' No data matching the search item: "',t.filterValue,'" ')}}function yn(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"table",50),n.YNc(2,wn,8,6,"ng-container",32),n.YNc(3,vn,1,0,"tr",33),n.YNc(4,Qn,1,3,"tr",34),n.YNc(5,Nn,3,1,"tr",35),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("dataSource",t.dataSource),n.xp6(1),n.Q6J("ngForOf",t.displayedColumns),n.xp6(1),n.Q6J("matHeaderRowDef",t.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",t.displayedColumns)}}function kn(e,o){if(1&e&&(n.TgZ(0,"div",29),n.TgZ(1,"div",30),n.YNc(2,un,3,0,"ng-container",14),n.YNc(3,yn,6,4,"ng-container",14),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",0==t.firstTimersList.length),n.xp6(1),n.Q6J("ngIf",0!==t.firstTimersList.length)}}function Yn(e,o){1&e&&(n.ynx(0),n.TgZ(1,"span",49),n._uU(2,"No record found!"),n.qZA(),n.BQk())}function Un(e,o){if(1&e&&(n.TgZ(0,"th",39),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t," ")}}function On(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.first_name)}}function In(e,o){1&e&&(n.ynx(0),n.YNc(1,On,3,1,"td",40),n.BQk())}function Sn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.last_name)}}function Bn(e,o){1&e&&(n.ynx(0),n.YNc(1,Sn,3,1,"td",38),n.BQk())}function Dn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span",43),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngClass",n.WLB(2,M,"admin"==t.role,"member"==t.role)),n.xp6(1),n.Oqu(t.role)}}function En(e,o){1&e&&(n.ynx(0),n.YNc(1,Dn,3,5,"td",38),n.BQk())}function Fn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.phone?t.user.phone:"---")}}function $n(e,o){1&e&&(n.ynx(0),n.YNc(1,Fn,3,1,"td",38),n.BQk())}function Pn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span",44),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.user.email?t.user.email:"---")}}function jn(e,o){1&e&&(n.ynx(0),n.YNc(1,Pn,3,1,"td",38),n.BQk())}function Rn(e,o){if(1&e&&(n.TgZ(0,"td",42),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.oxw().$implicit,i=n.oxw(3);n.xp6(2),n.hij(" ",t[i._concatColumnString(_)],"")}}function Ln(e,o){if(1&e&&(n.ynx(0,36),n.YNc(1,Un,2,1,"th",37),n.YNc(2,In,2,0,"ng-container",14),n.YNc(3,Bn,2,0,"ng-container",14),n.YNc(4,En,2,0,"ng-container",14),n.YNc(5,$n,2,0,"ng-container",14),n.YNc(6,jn,2,0,"ng-container",14),n.YNc(7,Rn,3,1,"td",38),n.BQk()),2&e){const t=o.$implicit,_=o.index;n.Q6J("matColumnDef",t),n.xp6(2),n.Q6J("ngIf",0===_),n.xp6(1),n.Q6J("ngIf","last name"==t),n.xp6(1),n.Q6J("ngIf","role"==t),n.xp6(1),n.Q6J("ngIf","phone"==t),n.xp6(1),n.Q6J("ngIf","email"==t)}}function Hn(e,o){1&e&&n._UZ(0,"tr",45)}function Vn(e,o){if(1&e&&n._UZ(0,"tr",46),2&e){const t=o.$implicit,_=n.oxw(3);n.Q6J("ngClass",n.VKq(1,q,_.selection.isSelected(t)))}}function zn(e,o){if(1&e&&(n.TgZ(0,"tr",47),n.TgZ(1,"td",48),n._uU(2),n.qZA(),n.qZA()),2&e){const t=n.oxw(3);n.xp6(2),n.hij(' No data matching the search item: "',t.filterValue,'" ')}}function Kn(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"table",51),n.YNc(2,Ln,8,6,"ng-container",32),n.YNc(3,Hn,1,0,"tr",33),n.YNc(4,Vn,1,3,"tr",34),n.YNc(5,zn,3,1,"tr",35),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("dataSource",t.dataSource),n.xp6(1),n.Q6J("ngForOf",t.displayedColumns),n.xp6(1),n.Q6J("matHeaderRowDef",t.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",t.displayedColumns)}}function Wn(e,o){if(1&e&&(n.TgZ(0,"div",29),n.TgZ(1,"div",30),n.YNc(2,Yn,3,0,"ng-container",14),n.YNc(3,Kn,6,4,"ng-container",14),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",0==t.newConvertList.length),n.xp6(1),n.Q6J("ngIf",0!==t.newConvertList.length)}}let Gn=(()=>{class e{constructor(t,_,i){this.reportService=t,this.exportService=_,this._location=i,this.pageSize=50,this.currentPage=0,this.firstTimersList=[],this.regularMemberList=[],this.newConvertList=[],this._loading_=!1,this._printElement=l.sn,this._setDateQuery=l.JT,this.dateQuery=new Date,this._concatColumnString=l.kA,this.dataSource=new a.by,this.selection=new x.Ov(!0,[]),this.column=["first name","last name","role","phone","email"]}ngOnInit(){this.getMemberShipJournal(),this.displayedColumns=this.column}ngAfterViewInit(){this.dataSource.paginator=this.paginator}gotoBack(){this._location.back()}onPreview(t){switch(this._query=t,t){case t="reg_members":return this.dataSource=new a.by(this.regularMemberList);case t="first-timer":return this.dataSource=new a.by(this.firstTimersList);case t="new-convert":return this.dataSource=new a.by(this.newConvertList);default:return}}getMemberShipJournal(t){this._loading_=!0;let _=(0,l.JT)(t);this.reportService.fetchMembershipJournal("membership_journal",_).subscribe(i=>{this._loading_=!1;const{first_timers:g,regular_members:m,new_converts:xt}=i;this.firstTimersList=g,this.newConvertList=xt,this.regularMemberList=m},i=>{this._loading_=!1,Z().fire("Server error",i,"error"),this.firstTimersList=[],this.newConvertList=[],this.regularMemberList=[]})}exportFirstTimersToExcel(){const t=[],_={data:[{A:"FIRST TIMERS DATA"},{A:"#",B:"First Name",C:"Last Name",D:"Phone Number",E:"Membership Information",F:"Convert Status"}],skipHeader:!0};this.firstTimersList.forEach(i=>{_.data.push({A:i.id,B:i.first_name,C:i.last_name,D:i.phone,E:i.membership_info,F:i.convert_status})}),t.push(_),this.exportService.exportTableElmToExcel(t,"First Timer data")}exportNewConvertsToExcel(){const t=[],_={data:[{A:"CONVERTS DATA"},{A:"#",B:"First Name",C:"Last Name",D:"Membership Info",E:"Convert Status"}],skipHeader:!0};this.newConvertList.forEach(i=>{_.data.push({A:i.id,B:i.first_name,C:i.last_name,D:i.membership_info,E:i.convert_status})}),t.push(_),this.exportService.exportTableElmToExcel(t,"New converts Journal Data")}exportRegularMembersToExcel(){const t=[],_={data:[{A:"REGULAR MEMBERS JOURNAL DATA"},{A:"#",B:"First Name",C:"Last Name",D:"Phone",E:"Email"}],skipHeader:!0};this.regularMemberList.forEach(i=>{_.data.push({A:i.id,B:i.user.first_name,C:i.user.last_name,D:i.user.phone,E:i.user.email})}),t.push(_),this.exportService.exportTableElmToExcel(t,"Regular members Journal Data")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(T),n.Y36(h.j),n.Y36(s.Ye))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-membership-journal"]],viewQuery:function(t,_){if(1&t&&n.Gf(B.NW,5),2&t){let i;n.iGM(i=n.CRH())&&(_.paginator=i.first)}},decls:39,vars:9,consts:[[1,"header","d-flex","align-items-center","mb-4"],[1,"d-flex","align-items-center","cursor","me-3",3,"click"],["mat-icon-button","",1,"me-2","return-link-wrap"],[1,"title-sm"],[1,"title","md"],[1,"bg-white","p-3"],[1,"membership","py-3","px-2"],[1,"my-3"],["matInput","",3,"matDatepicker","dateChange"],["ref",""],["matSuffix","",3,"for"],["datepicker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],[4,"ngIf"],[1,"grid","grid--1fr--1fr","gap","mt-5"],["regMembers",""],["firstTimer",""],["newConvert",""],[1,"journal"],[1,"d-flex","align-items-center","justify-content-between"],[1,"title","md","pt-3"],[1,"cursor",3,"mat-menu-trigger-for"],["menu","matMenu"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item",""],[1,"d-flex","align-items-center","justify-content-between","py-3"],[1,""],[4,"ngTemplateOutlet"],[1,"overflow--wrap","_visible"],[1,"table-wrapper","tbl-wrap"],["mat-table","","id","print-reg-members",1,"table","custom-table","w--100",2,"width","100%",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["style","padding-left: 3.5em",4,"matCellDef"],[2,"padding-left","3.5em"],["mat-cell",""],[1,"tag",3,"ngClass"],[1,"lowercase"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell"],[1,"f12","txt-grey","d-flex","justify-content-center"],["mat-table","","id","print-first-timer",1,"table","custom-table","w--100",2,"width","100%",3,"dataSource"],["mat-table","","id","print-new-convert",1,"table","custom-table","w--100",2,"width","100%",3,"dataSource"]],template:function(t,_){if(1&t){const i=n.EpF();n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.NdJ("click",function(){return _.gotoBack()}),n.TgZ(2,"button",2),n.TgZ(3,"mat-icon"),n._uU(4,"west"),n.qZA(),n.qZA(),n.TgZ(5,"div",3),n._uU(6,"Back"),n.qZA(),n.qZA(),n.TgZ(7,"div",4),n._uU(8,"Membership Journal"),n.qZA(),n.qZA(),n.TgZ(9,"div",5),n.TgZ(10,"section",6),n.TgZ(11,"div",7),n.TgZ(12,"mat-form-field"),n.TgZ(13,"mat-label"),n._uU(14,"Query by date"),n.qZA(),n.TgZ(15,"input",8,9),n.NdJ("dateChange",function(){n.CHM(i);const m=n.MAs(16);return _.getMemberShipJournal(m.value)}),n.qZA(),n._UZ(17,"mat-datepicker-toggle",10),n.TgZ(18,"mat-datepicker",null,11),n.TgZ(20,"mat-datepicker-actions"),n.TgZ(21,"button",12),n._uU(22,"Cancel"),n.qZA(),n.TgZ(23,"button",13),n._uU(24," Apply "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(25,D,2,0,"ng-container",14),n.TgZ(26,"div",15),n.YNc(27,E,20,1,"ng-container",14),n.YNc(28,F,20,1,"ng-container",14),n.YNc(29,$,20,1,"ng-container",14),n.qZA(),n.qZA(),n.qZA(),n.YNc(30,j,2,1,"ng-container",14),n.YNc(31,L,2,1,"ng-container",14),n.YNc(32,V,2,1,"ng-container",14),n.YNc(33,pn,3,1,"ng-template",null,16,n.W1O),n.YNc(35,kn,4,2,"ng-template",null,17,n.W1O),n.YNc(37,Wn,4,2,"ng-template",null,18,n.W1O)}if(2&t){const i=n.MAs(19);n.xp6(15),n.Q6J("matDatepicker",i),n.xp6(2),n.Q6J("for",i),n.xp6(8),n.Q6J("ngIf",_._loading_),n.xp6(2),n.Q6J("ngIf",!_._loading_),n.xp6(1),n.Q6J("ngIf",!_._loading_),n.xp6(1),n.Q6J("ngIf",!_._loading_),n.xp6(1),n.Q6J("ngIf","reg_members"==_._query),n.xp6(1),n.Q6J("ngIf","first-timer"==_._query),n.xp6(1),n.Q6J("ngIf","new-convert"==_._query)}},directives:[C.lW,d.Hw,u.KE,u.hX,J.Nt,c.hl,c.nW,u.R9,c.Mq,c.M5,c.dp,c.DK,s.O5,A.m,p.p6,p.VK,p.OP,s.tP,a.BZ,s.sg,a.as,a.nj,a.Ee,a.w1,a.fO,a.Dz,a.ge,a.ev,s.mk,a.XQ,a.Gk],styles:[".membership[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{grid-gap:1em;gap:1em}.membership[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .journal[_ngcontent-%COMP%]{padding:.5em 1.2em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}.membership[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .journal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0;color:#343a4080}"]}),e})();function Xn(e,o){1&e&&(n.ynx(0),n._UZ(1,"app-loading-roller"),n.BQk())}function ne(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",18),n.TgZ(2,"div",19),n.TgZ(3,"h3",20),n._uU(4,"SMS Message"),n.qZA(),n.TgZ(5,"div",21),n.TgZ(6,"span"),n.TgZ(7,"mat-icon"),n._uU(8,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(9,"mat-menu",null,22),n.TgZ(11,"button",23),n.NdJ("click",function(){return n.CHM(t),n.oxw().onPreview("sms_messages")}),n._uU(12," Preview "),n.qZA(),n.TgZ(13,"button",23),n.NdJ("click",function(){return n.CHM(t),n.oxw()._printElement("print-sms-messages")}),n._uU(14," Print "),n.qZA(),n.TgZ(15,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw().exportSmsToExcel()}),n._uU(16," Download as Excel "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",25),n.TgZ(18,"p",26),n._uU(19," View and download report of the regular members for the period selected "),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(10);n.xp6(5),n.Q6J("mat-menu-trigger-for",t)}}function ee(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",18),n.TgZ(2,"div",19),n.TgZ(3,"h3",20),n._uU(4,"Email Message"),n.qZA(),n.TgZ(5,"div",21),n.TgZ(6,"span"),n.TgZ(7,"mat-icon"),n._uU(8,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(9,"mat-menu",null,22),n.TgZ(11,"button",23),n.NdJ("click",function(){return n.CHM(t),n.oxw().onPreview("email_messages")}),n._uU(12," Preview "),n.qZA(),n.TgZ(13,"button",23),n.NdJ("click",function(){return n.CHM(t),n.oxw()._printElement("print-email-messages")}),n._uU(14," Print "),n.qZA(),n.TgZ(15,"button",24),n.NdJ("click",function(){return n.CHM(t),n.oxw().exportEmailToExcel()}),n._uU(16," Download as Excel "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",27),n.TgZ(18,"p",26),n._uU(19,"See in detail the number of email messsages sent."),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(10);n.xp6(5),n.Q6J("mat-menu-trigger-for",t)}}function te(e,o){1&e&&n.GkF(0)}function oe(e,o){if(1&e&&(n.ynx(0),n.YNc(1,te,1,0,"ng-container",28),n.BQk()),2&e){n.oxw();const t=n.MAs(32);n.xp6(1),n.Q6J("ngTemplateOutlet",t)}}function _e(e,o){1&e&&n.GkF(0)}function ie(e,o){if(1&e&&(n.ynx(0),n.YNc(1,_e,1,0,"ng-container",28),n.BQk()),2&e){n.oxw();const t=n.MAs(34);n.xp6(1),n.Q6J("ngTemplateOutlet",t)}}function ae(e,o){if(1&e&&(n.TgZ(0,"th",39),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t," ")}}function re(e,o){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.from)}}function ce(e,o){if(1&e&&(n.TgZ(0,"td"),n.YNc(1,re,2,1,"span",14),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngIf","sms"==t.type)}}function se(e,o){1&e&&(n.ynx(0),n.YNc(1,ce,2,1,"td",40),n.BQk())}function le(e,o){if(1&e&&(n.TgZ(0,"span",43),n._uU(1),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.hij(" ",t,", ")}}function ge(e,o){if(1&e&&(n.ynx(0),n.YNc(1,le,2,1,"span",42),n.BQk()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngForOf",t.to.slice(0,2))}}function me(e,o){if(1&e&&(n.TgZ(0,"span",43),n._uU(1),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.hij(" ",t,", ")}}function pe(e,o){if(1&e&&(n.TgZ(0,"span",45),n._uU(1),n.qZA()),2&e){const t=n.oxw(2).$implicit;n.xp6(1),n.hij(" +",t.to.length-2," others ")}}function ue(e,o){if(1&e&&(n.ynx(0),n.YNc(1,me,2,1,"span",42),n.YNc(2,pe,2,1,"span",44),n.BQk()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngForOf",t.to.slice(0,2)),n.xp6(1),n.Q6J("ngIf",t.to.length>2)}}function fe(e,o){if(1&e&&(n.TgZ(0,"td",41),n.YNc(1,ge,2,1,"ng-container",14),n.YNc(2,ue,3,2,"ng-container",14),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngIf",t.to&&t.to.length<3),n.xp6(1),n.Q6J("ngIf",t.to&&t.to.length>2)}}function de(e,o){1&e&&(n.ynx(0),n.YNc(1,fe,3,2,"td",38),n.BQk())}function xe(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.oxw(5);n.xp6(2),n.Oqu(_._truncateString(t.message,40))}}function Ze(e,o){1&e&&(n.ynx(0),n.YNc(1,xe,3,1,"td",38),n.BQk())}function Te(e,o){1&e&&(n.TgZ(0,"span",49),n._uU(1,"Delivered"),n.qZA())}function he(e,o){1&e&&(n.TgZ(0,"span",50),n._uU(1,"Failed"),n.qZA())}function Ce(e,o){1&e&&(n.TgZ(0,"span",51),n._uU(1,"---"),n.qZA())}function Je(e,o){if(1&e&&(n.TgZ(0,"td",41),n.YNc(1,Te,2,0,"span",46),n.YNc(2,he,2,0,"span",47),n.YNc(3,Ce,2,0,"span",48),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngIf",1==t.status),n.xp6(1),n.Q6J("ngIf",0==t.status),n.xp6(1),n.Q6J("ngIf",null==t.status)}}function Ae(e,o){1&e&&(n.ynx(0),n.YNc(1,Je,4,3,"td",38),n.BQk())}function Me(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span",52),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.type)}}function qe(e,o){1&e&&(n.ynx(0),n.YNc(1,Me,3,1,"td",38),n.BQk())}function be(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.ALo(3,"date"),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(n.xi3(3,1,t.created_at,"mediumDate"))}}function we(e,o){1&e&&(n.ynx(0),n.YNc(1,be,4,4,"td",38),n.BQk())}function ve(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.oxw().$implicit,i=n.oxw(3);n.xp6(2),n.hij(" ",t[i._concatColumnString(_)],"")}}function Qe(e,o){if(1&e&&(n.ynx(0,36),n.YNc(1,ae,2,1,"th",37),n.YNc(2,se,2,0,"ng-container",14),n.YNc(3,de,2,0,"ng-container",14),n.YNc(4,Ze,2,0,"ng-container",14),n.YNc(5,Ae,2,0,"ng-container",14),n.YNc(6,qe,2,0,"ng-container",14),n.YNc(7,we,2,0,"ng-container",14),n.YNc(8,ve,3,1,"td",38),n.BQk()),2&e){const t=o.$implicit,_=o.index;n.Q6J("matColumnDef",t),n.xp6(2),n.Q6J("ngIf",0===_),n.xp6(1),n.Q6J("ngIf","to"==t),n.xp6(1),n.Q6J("ngIf","message"==t),n.xp6(1),n.Q6J("ngIf","status"==t),n.xp6(1),n.Q6J("ngIf","type"==t),n.xp6(1),n.Q6J("ngIf","created at"==t)}}function Ne(e,o){1&e&&n._UZ(0,"tr",53)}const N=function(e){return{"bg-wrap":e}};function ye(e,o){if(1&e&&n._UZ(0,"tr",54),2&e){const t=o.$implicit,_=n.oxw(3);n.Q6J("ngClass",n.VKq(1,N,_.selection.isSelected(t)))}}function ke(e,o){if(1&e&&(n.TgZ(0,"tr",55),n.TgZ(1,"td",56),n._uU(2),n.qZA(),n.qZA()),2&e){const t=n.oxw(3);n.xp6(2),n.hij(' No data matching the search item: "',t.filterValue,'" ')}}function Ye(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"table",31),n.YNc(2,Qe,9,7,"ng-container",32),n.YNc(3,Ne,1,0,"tr",33),n.YNc(4,ye,1,3,"tr",34),n.YNc(5,ke,3,1,"tr",35),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("dataSource",t.dataSource),n.xp6(1),n.Q6J("ngForOf",t.displayedColumns),n.xp6(1),n.Q6J("matHeaderRowDef",t.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",t.displayedColumns)}}function Ue(e,o){if(1&e&&(n.TgZ(0,"div",29),n.TgZ(1,"div",30),n.YNc(2,Ye,6,4,"ng-container",14),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",0!==t.smsMessagesList.length)}}function Oe(e,o){if(1&e&&(n.TgZ(0,"th",39),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t," ")}}function Ie(e,o){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.from)}}function Se(e,o){if(1&e&&(n.TgZ(0,"td"),n.YNc(1,Ie,2,1,"span",14),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngIf","email"==t.type)}}function Be(e,o){1&e&&(n.ynx(0),n.YNc(1,Se,2,1,"td",40),n.BQk())}function De(e,o){if(1&e&&(n.TgZ(0,"span",43),n._uU(1),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.hij(" ",t,", ")}}function Ee(e,o){if(1&e&&(n.ynx(0),n.YNc(1,De,2,1,"span",42),n.BQk()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngForOf",t.to.slice(0,2))}}function Fe(e,o){if(1&e&&(n.TgZ(0,"span",43),n._uU(1),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.hij(" ",t,", ")}}function $e(e,o){if(1&e&&(n.TgZ(0,"span",45),n._uU(1),n.qZA()),2&e){const t=n.oxw(2).$implicit;n.xp6(1),n.hij(" +",t.to.length-2," others ")}}function Pe(e,o){if(1&e&&(n.ynx(0),n.YNc(1,Fe,2,1,"span",42),n.YNc(2,$e,2,1,"span",44),n.BQk()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngForOf",t.to.slice(0,2)),n.xp6(1),n.Q6J("ngIf",t.to.length>2)}}function je(e,o){if(1&e&&(n.TgZ(0,"td",41),n.YNc(1,Ee,2,1,"ng-container",14),n.YNc(2,Pe,3,2,"ng-container",14),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngIf",t.to&&t.to.length<3),n.xp6(1),n.Q6J("ngIf",t.to&&t.to.length>2)}}function Re(e,o){1&e&&(n.ynx(0),n.YNc(1,je,3,2,"td",38),n.BQk())}function Le(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.oxw(5);n.xp6(2),n.Oqu(_._truncateString(t.message,40))}}function He(e,o){1&e&&(n.ynx(0),n.YNc(1,Le,3,1,"td",38),n.BQk())}function Ve(e,o){1&e&&(n.TgZ(0,"span",49),n._uU(1,"Delivered"),n.qZA())}function ze(e,o){1&e&&(n.TgZ(0,"span",50),n._uU(1,"Failed"),n.qZA())}function Ke(e,o){1&e&&(n.TgZ(0,"span",51),n._uU(1,"---"),n.qZA())}function We(e,o){if(1&e&&(n.TgZ(0,"td",41),n.YNc(1,Ve,2,0,"span",46),n.YNc(2,ze,2,0,"span",47),n.YNc(3,Ke,2,0,"span",48),n.qZA()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngIf",1==t.status),n.xp6(1),n.Q6J("ngIf",0==t.status),n.xp6(1),n.Q6J("ngIf",null==t.status)}}function Ge(e,o){1&e&&(n.ynx(0),n.YNc(1,We,4,3,"td",38),n.BQk())}function Xe(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span",52),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.type)}}function nt(e,o){1&e&&(n.ynx(0),n.YNc(1,Xe,3,1,"td",38),n.BQk())}function et(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.ALo(3,"date"),n.qZA(),n.qZA()),2&e){const t=o.$implicit;n.xp6(2),n.Oqu(n.xi3(3,1,t.created_at,"mediumDate"))}}function tt(e,o){1&e&&(n.ynx(0),n.YNc(1,et,4,4,"td",38),n.BQk())}function ot(e,o){if(1&e&&(n.TgZ(0,"td",41),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.oxw().$implicit,i=n.oxw(3);n.xp6(2),n.hij(" ",t[i._concatColumnString(_)],"")}}function _t(e,o){if(1&e&&(n.ynx(0,36),n.YNc(1,Oe,2,1,"th",37),n.YNc(2,Be,2,0,"ng-container",14),n.YNc(3,Re,2,0,"ng-container",14),n.YNc(4,He,2,0,"ng-container",14),n.YNc(5,Ge,2,0,"ng-container",14),n.YNc(6,nt,2,0,"ng-container",14),n.YNc(7,tt,2,0,"ng-container",14),n.YNc(8,ot,3,1,"td",38),n.BQk()),2&e){const t=o.$implicit,_=o.index;n.Q6J("matColumnDef",t),n.xp6(2),n.Q6J("ngIf",0===_),n.xp6(1),n.Q6J("ngIf","to"==t),n.xp6(1),n.Q6J("ngIf","message"==t),n.xp6(1),n.Q6J("ngIf","status"==t),n.xp6(1),n.Q6J("ngIf","type"==t),n.xp6(1),n.Q6J("ngIf","created at"==t)}}function it(e,o){1&e&&n._UZ(0,"tr",53)}function at(e,o){if(1&e&&n._UZ(0,"tr",54),2&e){const t=o.$implicit,_=n.oxw(3);n.Q6J("ngClass",n.VKq(1,N,_.selection.isSelected(t)))}}function rt(e,o){if(1&e&&(n.TgZ(0,"tr",55),n.TgZ(1,"td",56),n._uU(2),n.qZA(),n.qZA()),2&e){const t=n.oxw(3);n.xp6(2),n.hij(' No data matching the search item: "',t.filterValue,'" ')}}function ct(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"table",57),n.YNc(2,_t,9,7,"ng-container",32),n.YNc(3,it,1,0,"tr",33),n.YNc(4,at,1,3,"tr",34),n.YNc(5,rt,3,1,"tr",35),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("dataSource",t.dataSource),n.xp6(1),n.Q6J("ngForOf",t.displayedColumns),n.xp6(1),n.Q6J("matHeaderRowDef",t.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",t.displayedColumns)}}function st(e,o){if(1&e&&(n.TgZ(0,"div",29),n.TgZ(1,"div",30),n.YNc(2,ct,6,4,"ng-container",14),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",0!==t.emailMessagesList.length)}}let lt=(()=>{class e{constructor(t,_,i){this.reportService=t,this.exportService=_,this._location=i,this.emailMessagesList=[],this.smsMessagesList=[],this.newConvertList=[],this._loading_=!1,this._printElement=l.sn,this._setDateQuery=l.JT,this._truncateString=l.aS,this._concatColumnString=l.kA,this.dataSource=new a.by,this.selection=new x.Ov(!0,[]),this.column=["from","to","message","status","type","created at"]}ngOnInit(){this.getMessageJournal(),this.displayedColumns=this.column}gotoBack(){this._location.back()}onPreview(t){switch(this._query=t,t){case t="sms_messages":return this.dataSource=new a.by(this.smsMessagesList);case t="email_messages":return this.dataSource=new a.by(this.emailMessagesList);default:return}}getMessageJournal(t){this._loading_=!0;let _=(0,l.JT)(t);this.reportService.fetchJournal("message_journal",_).subscribe(i=>{this._loading_=!1;const{message_by_mail:g,message_by_sms:m}=i;this.emailMessagesList=g,this.smsMessagesList=m},i=>{this._loading_=!1,Z().fire("Server error",i,"error"),this.emailMessagesList=[],this.smsMessagesList=[]})}exportEmailToExcel(){const t=[],_={data:[{A:"MEDIA DATA"},{A:"#",B:"From",C:"To",D:"Message"}],skipHeader:!0};this.emailMessagesList.forEach(i=>{let g=i.to.map(m=>m);_.data.push({A:i.id,B:i.from,C:g.toString(),D:i.message})}),t.push(_),this.exportService.exportTableElmToExcel(t,"Email message journal data")}exportSmsToExcel(){const t=[],_={data:[{A:"MEDIA DATA"},{A:"#",B:"From",C:"To",D:"Message"}],skipHeader:!0};this.smsMessagesList.forEach(i=>{let g=i.to.map(m=>m);_.data.push({A:i.id,B:i.from,C:g.toString(),D:i.message})}),t.push(_),this.exportService.exportTableElmToExcel(t,"Email message journal data")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(T),n.Y36(h.j),n.Y36(s.Ye))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-messages-journal"]],decls:35,vars:7,consts:[[1,"header","d-flex","align-items-center","mb-4"],[1,"d-flex","align-items-center","cursor","me-3",3,"click"],["mat-icon-button","",1,"me-2","return-link-wrap"],[1,"title-sm"],[1,"title","md"],[1,"bg-white","p-3"],[1,"message","py-3","px-2"],[1,"my-3"],["matInput","",3,"matDatepicker","dateChange"],["ref",""],["matSuffix","",3,"for"],["datepicker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],[4,"ngIf"],[1,"grid","grid--1fr--1fr","gap","mt-5"],["smsMessages",""],["emailMessages",""],[1,"journal"],[1,"d-flex","align-items-center","justify-content-between"],[1,"title","md","pt-3"],[1,"cursor",3,"mat-menu-trigger-for"],["menu","matMenu"],["type","button","mat-menu-item","",3,"click"],["mat-menu-item","",3,"click"],[1,"d-md-flex","align-items-center","justify-content-between","py-3"],[1,""],[1,"d-flex","align-items-center","justify-content-between","py-3"],[4,"ngTemplateOutlet"],[1,"overflow-wrap","_visible"],[1,"table-wrapper","tbl-wrap"],["mat-table","","id","print-sms-messages",1,"table","custom-table","w--100",2,"width","100%",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],[4,"matCellDef"],["mat-cell",""],["class","f12 txt-grey lowercase",4,"ngFor","ngForOf"],[1,"f12","txt-grey","lowercase"],["class","f12",4,"ngIf"],[1,"f12"],["class","tag green",4,"ngIf"],["class","tag red",4,"ngIf"],["class","tag",4,"ngIf"],[1,"tag","green"],[1,"tag","red"],[1,"tag"],[1,"tag","purple"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-table","","id","print-email-messages",1,"table","custom-table","w--100",2,"width","100%",3,"dataSource"]],template:function(t,_){if(1&t){const i=n.EpF();n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.NdJ("click",function(){return _.gotoBack()}),n.TgZ(2,"button",2),n.TgZ(3,"mat-icon"),n._uU(4,"west"),n.qZA(),n.qZA(),n.TgZ(5,"div",3),n._uU(6,"Back"),n.qZA(),n.qZA(),n.TgZ(7,"div",4),n._uU(8,"Messages Journal"),n.qZA(),n.qZA(),n.TgZ(9,"div",5),n.TgZ(10,"section",6),n.TgZ(11,"div",7),n.TgZ(12,"mat-form-field"),n.TgZ(13,"mat-label"),n._uU(14,"Query by date"),n.qZA(),n.TgZ(15,"input",8,9),n.NdJ("dateChange",function(){n.CHM(i);const m=n.MAs(16);return _.getMessageJournal(m.value)}),n.qZA(),n._UZ(17,"mat-datepicker-toggle",10),n.TgZ(18,"mat-datepicker",null,11),n.TgZ(20,"mat-datepicker-actions"),n.TgZ(21,"button",12),n._uU(22,"Cancel"),n.qZA(),n.TgZ(23,"button",13),n._uU(24," Apply "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(25,Xn,2,0,"ng-container",14),n.TgZ(26,"div",15),n.YNc(27,ne,20,1,"ng-container",14),n.YNc(28,ee,20,1,"ng-container",14),n.qZA(),n.qZA(),n.qZA(),n.YNc(29,oe,2,1,"ng-container",14),n.YNc(30,ie,2,1,"ng-container",14),n.YNc(31,Ue,3,1,"ng-template",null,16,n.W1O),n.YNc(33,st,3,1,"ng-template",null,17,n.W1O)}if(2&t){const i=n.MAs(19);n.xp6(15),n.Q6J("matDatepicker",i),n.xp6(2),n.Q6J("for",i),n.xp6(8),n.Q6J("ngIf",_._loading_),n.xp6(2),n.Q6J("ngIf",!_._loading_),n.xp6(1),n.Q6J("ngIf",!_._loading_),n.xp6(1),n.Q6J("ngIf","sms_messages"==_._query),n.xp6(1),n.Q6J("ngIf","email_messages"==_._query)}},directives:[C.lW,d.Hw,u.KE,u.hX,J.Nt,c.hl,c.nW,u.R9,c.Mq,c.M5,c.dp,c.DK,s.O5,A.m,p.p6,p.VK,p.OP,s.tP,a.BZ,s.sg,a.as,a.nj,a.Ee,a.w1,a.fO,a.Dz,a.ge,a.ev,a.XQ,a.Gk,s.mk],pipes:[s.uU],styles:[".message[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{grid-gap:1em;gap:1em}.message[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .journal[_ngcontent-%COMP%]{padding:.5em 1.2em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}.message[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .journal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0;color:#343a4080}"]}),e})();function gt(e,o){if(1&e&&(n.TgZ(0,"div",7),n.TgZ(1,"div",8),n._UZ(2,"img",9),n.TgZ(3,"div",10),n.TgZ(4,"span"),n.TgZ(5,"mat-icon"),n._uU(6,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(7,"mat-menu",null,11),n.TgZ(9,"button",12),n._uU(10," View report "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"h3",13),n._uU(12),n.qZA(),n.TgZ(13,"p",14),n._uU(14),n.qZA(),n.qZA()),2&e){const t=o.$implicit,_=n.MAs(8);n.xp6(2),n.Q6J("src","assets/img/svg/"+t.icon+".svg",n.LSH)("alt",t.title),n.xp6(1),n.Q6J("mat-menu-trigger-for",_),n.xp6(6),n.Q6J("routerLink",t.url),n.xp6(3),n.Oqu(t.title),n.xp6(2),n.Oqu(t.desc)}}const mt=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-reporting"]],decls:1,vars:0,template:function(t,_){1&t&&n._UZ(0,"router-outlet")},directives:[f.lC],styles:[""]}),e})(),children:[{path:"",component:(()=>{class e{constructor(){this.reportsItems=[]}ngOnInit(){this.getReportsItems()}getReportsItems(){return this.reportsItems=[{title:"Membership Journal",desc:"Find more insight on regular members, first timers, new converts and much more",url:"/portal/reporting/membership-journal",icon:"plus-heart"},{title:"Financial Journal",desc:"Find all your balance sheet information and more",url:"/portal/reporting/financial-journal",icon:"reconciliation"},{title:"Messages Journal",desc:"Text Messages and Email Messages",url:"/portal/reporting/messages-journal",icon:"message-mail"},{title:"Member Connect",desc:"Web connect and mobile connect report",url:"/portal/reporting/member-connect",icon:"message-mail"},{title:"Login Activity",desc:"User management timeline",url:"/portal/reporting/login-activity",icon:"login-svgrepo-com"}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-overview"]],decls:12,vars:1,consts:[[1,"report-overview"],[1,"header","d-flex","align-items-center","justify-content-between","mb-2"],[1,"title"],[1,"welcome-note","f12","txt-grey"],[1,"card-list-wrap"],[1,"items-wrap","grid","grid--1fr--1fr"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"d-flex","justify-content-between","align-items-center"],[1,"icon",3,"src","alt"],[1,"cursor",3,"mat-menu-trigger-for"],["menu","matMenu"],["type","button","mat-menu-item","",3,"routerLink"],[1,"title","md","mt-4"],[1,"f14","txt-grey"]],template:function(t,_){1&t&&(n.TgZ(0,"section",0),n.TgZ(1,"div",1),n.TgZ(2,"h2",2),n._uU(3,"Church Records Reporting"),n.qZA(),n.qZA(),n.TgZ(4,"div"),n.TgZ(5,"p",3),n._uU(6," You can view, and download reports for church leaders at a time so you save time and "),n._UZ(7,"br"),n._uU(8,"focus on what really matters, your firm and clients "),n.qZA(),n.qZA(),n.TgZ(9,"div",4),n.TgZ(10,"div",5),n.YNc(11,gt,15,6,"div",6),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(11),n.Q6J("ngForOf",_.reportsItems))},directives:[s.sg,p.p6,d.Hw,p.VK,p.OP,f.rH],styles:[".report-overview[_ngcontent-%COMP%]   .card-list-wrap[_ngcontent-%COMP%]   .items-wrap[_ngcontent-%COMP%]{grid-gap:1em;gap:1em}.report-overview[_ngcontent-%COMP%]   .card-list-wrap[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:1em;height:208px;border:none;border-radius:10px;box-shadow:0 1px 15px 2px #d2daf5}.report-overview[_ngcontent-%COMP%]   .card-list-wrap[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px}"]}),e})()},{path:"financial-journal",component:S},{path:"membership-journal",component:Gn},{path:"messages-journal",component:lt},{path:"**",redirectTo:""}]}];let pt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[f.Bz.forChild(mt)],f.Bz]}),e})();var ut=r(6314),ft=r(8824);let dt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez,pt,ft.h,ut.a]]}),e})()}}]);