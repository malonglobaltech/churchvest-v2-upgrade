"use strict";(self.webpackChunkchurchvest_v2=self.webpackChunkchurchvest_v2||[]).push([[270],{1270:(ee,C,a)=>{a.r(C),a.d(C,{AuthModule:()=>$t});var u=a(8583),l=a(4655),F=a(7388),t=a(7716);let P=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auth"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[l.lC],styles:[""]}),n})();var r=a(3679),Y=a(2340),p=a(3498),m=a(2290),_=a(5245),T=a(7446),d=a(7423),h=a(773);function Q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function E(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function M(n,i){1&n&&t._UZ(0,"mat-spinner")}const w=function(n){return{"is-invalid":n}};let L=(()=>{class n{constructor(e,o,s,c){this.authServ=e,this.toastr=o,this.fb=s,this.router=c,this.show=!1,this.isBusy=!1,this.isChecked=!0,this.form=new r.cw({}),this.form=this.fb.group({email:["",[r.kI.email,r.kI.required]],password:["",r.kI.required]})}ngOnInit(){}get value(){return this.form.getRawValue()}password(){this.show=!this.show}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.login(this.value).subscribe(e=>{const{data:o}=e;this.form.reset(),localStorage.setItem("token",e.access_token),localStorage.setItem("user_details",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),this.getLink()},e=>{this.toastr.error(e,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}getLink(){this.url=`${Y.N.managementbaseUrl}`;let s,e=window.location.origin;s=window.location.href.replace(`${e}/onboarding/api`,this.url),this.verifyUser(s)}verifyUser(e){this.authServ.verify(e).subscribe(o=>{if(this.isBusy=!1,"success"===o.status){this.toastr.success("Email Verification Successful","Message"),localStorage.setItem("user_details",JSON.stringify(o.data)),localStorage.setItem("isLoggedIn","true");let s=JSON.parse(localStorage.getItem("user_details"));if(0!==s.memberships.length){let c=s.memberships.filter(g=>"admin"===g.role);1===c.length?(localStorage.setItem("user_details",JSON.stringify(o.data)),localStorage.setItem("user_church",JSON.stringify(c[0])),this.router.navigate(["/portal/activity"])):(this.toastr.info("You are an admin in multiple churches. Kindly select a church to continue","Message"),this.router.navigate(["/onboarding/login"]))}}},o=>{o&&this.toastr.error("Oops! Email verification not successful","Message")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.e),t.Y36(m._W),t.Y36(r.qu),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-account-verify"]],decls:37,vars:13,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass"],["placeholder","Enter password","formControlName","password",3,"type","ngClass"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],[1,"d-flex","align-items-center","my-4"],[3,"checked"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],[1,"toggle-btn","txt-grey",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",7),t.TgZ(11,"h2"),t._uU(12," Login To "),t._UZ(13,"br"),t._uU(14," Your Account "),t.qZA(),t.TgZ(15,"p",8),t._uU(16," Kindly complete the email verification process by logging in to your dashboard "),t.qZA(),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"label"),t._uU(19,"Email Address"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"label"),t._uU(23,"Password"),t.qZA(),t._UZ(24,"input",11),t.YNc(25,Q,3,0,"span",12),t.YNc(26,E,3,0,"span",12),t.qZA(),t.TgZ(27,"div",13),t.TgZ(28,"mat-checkbox",14),t._uU(29,"Stay signed in"),t.qZA(),t.qZA(),t.TgZ(30,"button",15),t._uU(31," Login To Account "),t.YNc(32,M,1,0,"mat-spinner",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",17),t.TgZ(34,"div",18),t.TgZ(35,"a",19),t._UZ(36,"img",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngClass",t.VKq(9,w,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),t.xp6(4),t.Q6J("type",o.show?"text":"password")("ngClass",t.VKq(11,w,o.form.controls.password.hasError("required")&&o.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!o.show),t.xp6(1),t.Q6J("ngIf",o.show),t.xp6(2),t.Q6J("checked",o.isChecked),t.xp6(2),t.Q6J("disabled",!o.form.valid),t.xp6(2),t.Q6J("ngIf",o.isBusy))},directives:[l.yS,_.Hw,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,u.mk,u.O5,T.oG,d.lW,h.Ou],styles:[""]}),n})();const x=n=>n==n.toLowerCase(),A=n=>/\d/.test(n),q=n=>!!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(n);var f=a(7970);function B(n,i){1&n&&(t.ynx(0),t.TgZ(1,"span",6),t._uU(2," Verification email sent to:"),t.qZA(),t.BQk())}function O(n,i){1&n&&(t.ynx(0),t.TgZ(1,"span",6),t._uU(2," Password reset link sent to:"),t.qZA(),t.BQk())}let b=(()=>{class n{constructor(e,o){this._bottomSheetRef=e,this.data=o}ngOnInit(){}dismiss(e){this._bottomSheetRef.dismiss(),e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.oL),t.Y36(f.OG))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bottom-sheet"]],decls:13,vars:3,consts:[[1,"center","h-250"],[1,"d-flex","my-2"],[4,"ngIf"],[1,"ms-2"],[1,"d-flex","mt-auto"],["mat-stroked-button","",1,"w-100",3,"click"],[1,"f12","txt-grey"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-nav-list"),t.TgZ(1,"div",0),t.TgZ(2,"h2"),t._uU(3,"Check Your Mail!"),t.qZA(),t.TgZ(4,"div",1),t.YNc(5,B,3,0,"ng-container",2),t.YNc(6,O,3,0,"ng-container",2),t.TgZ(7,"a"),t.TgZ(8,"span",3),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"button",5),t.NdJ("click",function(c){return o.dismiss(c)}),t._uU(12," Dismiss "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf","verification_link"==o.data.type),t.xp6(1),t.Q6J("ngIf","reset_link"==o.data.type),t.xp6(3),t.Oqu(o.data.data))},directives:[u.O5,d.lW],styles:[".center[_ngcontent-%COMP%]{display:flex;padding:2em;flex-direction:column;justify-content:center}.center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:34px;color:#ccc6}.center[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5c278b}.center.h-250[_ngcontent-%COMP%]{height:250px}"]}),n})();var k=a(7322);function R(n,i){if(1&n&&(t.TgZ(0,"div",30),t.TgZ(1,"span",31),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.recordMsg)}}function V(n,i){1&n&&(t.TgZ(0,"mat-icon",38),t._uU(1,"check_circle"),t.qZA())}function H(n,i){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"cancel"),t.qZA())}function D(n,i){1&n&&(t.TgZ(0,"mat-icon",38),t._uU(1,"check_circle"),t.qZA())}function W(n,i){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"cancel"),t.qZA())}function G(n,i){1&n&&(t.TgZ(0,"mat-icon",38),t._uU(1,"check_circle"),t.qZA())}function K(n,i){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"cancel"),t.qZA())}function z(n,i){1&n&&(t.TgZ(0,"mat-icon",38),t._uU(1,"check_circle"),t.qZA())}function X(n,i){1&n&&(t.TgZ(0,"mat-icon",39),t._uU(1,"cancel"),t.qZA())}function $(n,i){if(1&n&&(t.TgZ(0,"div",32),t.TgZ(1,"div",33),t.YNc(2,V,2,0,"mat-icon",34),t.YNc(3,H,2,0,"mat-icon",35),t.TgZ(4,"span",36),t._uU(5,"Password should contain 8 characters or more"),t.qZA(),t.qZA(),t.TgZ(6,"div",33),t.YNc(7,D,2,0,"mat-icon",34),t.YNc(8,W,2,0,"mat-icon",35),t.TgZ(9,"span",36),t._uU(10,"Password should contain at least one upper case character"),t.qZA(),t.qZA(),t.TgZ(11,"div",33),t.YNc(12,G,2,0,"mat-icon",34),t.YNc(13,K,2,0,"mat-icon",35),t.TgZ(14,"span",36),t._uU(15,"Password should contain at least a number"),t.qZA(),t.qZA(),t.TgZ(16,"div",37),t.YNc(17,z,2,0,"mat-icon",34),t.YNc(18,X,2,0,"mat-icon",35),t.TgZ(19,"span",36),t._uU(20,"Password should contain at least one special character"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.validatePassword.length>=8),t.xp6(1),t.Q6J("ngIf",e.validatePassword.length<8),t.xp6(4),t.Q6J("ngIf",!e.upperCaseChar),t.xp6(1),t.Q6J("ngIf",e.upperCaseChar),t.xp6(4),t.Q6J("ngIf",e.numberChar),t.xp6(1),t.Q6J("ngIf",!e.numberChar),t.xp6(4),t.Q6J("ngIf",e.specialChar),t.xp6(1),t.Q6J("ngIf",!e.specialChar)}}function j(n,i){1&n&&(t.TgZ(0,"span",40),t.TgZ(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.qZA())}function tt(n,i){1&n&&t._UZ(0,"mat-spinner")}function et(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateEmail()}),t._uU(2," Verify "),t.YNc(3,tt,1,0,"mat-spinner",15),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.form.controls.email.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function nt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function ot(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function it(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function st(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function rt(n,i){1&n&&(t.TgZ(0,"mat-error",53),t._uU(1," Passwords do not match "),t.qZA())}function at(n,i){1&n&&t._UZ(0,"mat-spinner")}const v=function(n){return{"is-invalid":n}};function ct(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12),t.TgZ(2,"label"),t._uU(3,"Full Name"),t.qZA(),t._UZ(4,"input",42),t.qZA(),t.TgZ(5,"div",12),t.TgZ(6,"label"),t._uU(7,"Password"),t.qZA(),t.TgZ(8,"input",43),t.NdJ("input",function(){t.CHM(e);const s=t.oxw();return s.checkPassword(s.passwordValue)}),t.qZA(),t.YNc(9,nt,3,0,"span",44),t.YNc(10,ot,3,0,"span",44),t.qZA(),t.TgZ(11,"div",12),t.TgZ(12,"label"),t._uU(13,"Confirm Password"),t.qZA(),t._UZ(14,"input",45),t.YNc(15,it,3,0,"span",44),t.YNc(16,st,3,0,"span",44),t.YNc(17,rt,2,0,"mat-error",46),t.qZA(),t.TgZ(18,"div",47),t.TgZ(19,"mat-checkbox",48),t._uU(20,"I agree to the"),t.qZA(),t.TgZ(21,"span",49),t.TgZ(22,"a",50),t._uU(23,"terms & conditions"),t.qZA(),t._uU(24,"of churchvest"),t.qZA(),t.qZA(),t.TgZ(25,"button",51),t._uU(26," Create Account "),t.YNc(27,at,1,0,"mat-spinner",15),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.VKq(13,v,e.form.controls.name.hasError("required")&&e.form.controls.name.touched)),t.xp6(4),t.Q6J("type",e.show?"text":"password")("ngClass",t.VKq(15,v,e.form.controls.password.hasError("required")&&e.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(4),t.Q6J("type",e.show?"text":"password")("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(1),t.Q6J("ngIf",e.form.hasError("notSame")&&e.form.controls.confirmPassword.touched),t.xp6(2),t.Q6J("checked",e.isChecked),t.xp6(6),t.Q6J("disabled",!e.form.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function lt(n,i){1&n&&(t.ynx(0),t.TgZ(1,"p",54),t._uU(2,"This email already exists."),t.qZA(),t.TgZ(3,"div",55),t.TgZ(4,"a",56),t._uU(5,"Login to Existing Church"),t.qZA(),t.qZA(),t.BQk())}let ut=(()=>{class n{constructor(e,o,s,c){this.authServ=e,this.toastr=o,this.fb=s,this.router=c,this.show=!1,this.isBusy=!1,this.validate=!1,this.recordFound=!1,this.isChecked=!0,this.matcher=new U,this._validateCaps=x,this._hasNumber=A,this._checkForSpecialChars=q,this.form=new r.cw({}),this.checkPasswordMatch=g=>g.get("password").value===g.get("confirmPassword").value?null:{notSame:!0},this.form=this.fb.group({email:["",[r.kI.email,r.kI.required]],name:["",r.kI.required],password:["",r.kI.required],confirmPassword:[""]},{validators:this.checkPasswordMatch})}ngOnInit(){}get value(){return this.form.getRawValue()}get passwordValue(){return this.form.controls.password.value}checkPassword(e){this.validatePassword=e,this.upperCaseChar=this._validateCaps(e),this.numberChar=this._hasNumber(e),this.specialChar=this._checkForSpecialChars(e)}get emailCtrInstance(){return this.form.get("email")}password(){this.show=!this.show}resetControl(){"INVALID"==this.emailCtrInstance.status&&(this.recordFound=!1)}validateEmail(){this.isBusy=!0,this.authServ.resolveUser({email:this.emailCtrInstance.value}).subscribe(({message:o,data:s})=>{this.isBusy=!1,0==s.length?(this.recordData=s,this.recordFound=!0):(this.recordFound=!0,this.recordData=s,this.recordMsg=o,this.toastr.info(o,"Message",{timeOut:3e3}))},()=>{this.isBusy=!1,this.recordFound=!1})}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.register(this.value).subscribe(e=>{const{data:o}=e;this.recordFound=!1,this.toastr.success("Registration successful","Message"),this.form.reset(),localStorage.setItem("token",e.access_token),localStorage.setItem("user_details",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user_church",JSON.stringify(this.selectedChurch)),this.navigate(e.data.email)},e=>{this.toastr.error(e,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}navigate(e){this.router.navigate(["/onboarding/verify-email"],{queryParams:{query:e}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.e),t.Y36(m._W),t.Y36(r.qu),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-register"]],decls:75,vars:10,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/login"],["class","mb-3",4,"ngIf"],["class","panel mb-3 p-3",4,"ngIf"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass","input"],["class","toggle-btn txt-grey green",4,"ngIf"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],["id","terms-condition","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-wrapper"],[1,"modal-content-wrap"],[1,"modal-body"],[1,"header-top","d-flex","justify-content-between","align-items-center","px-4","py-3"],[1,"title"],["data-bs-dismiss","modal",1,"cursor"],[1,"scroll","content","mt-2","w--600","p-2"],[1,"f12"],[1,"unordered"],[1,"mb-3"],[1,"f12","txt-green"],[1,"panel","mb-3","p-3"],[1,"d-flex","align-items-center","mb-2"],["class","txt-green",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"f12","text-grey","ms-2"],[1,"d-flex","align-items-center"],[1,"txt-green"],[1,"text-danger"],[1,"toggle-btn","txt-grey","green"],["type","submit","mat-stroked-button","",1,"w-100",3,"disabled","click"],["type","text","placeholder","Enter full name","formControlName","name",3,"ngClass"],["placeholder","Enter password","formControlName","password",3,"type","ngClass","input"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],["formControlName","confirmPassword","placeholder","Confirm password",3,"type","errorStateMatcher"],["class","f12 my-2",4,"ngIf"],[1,"d-flex","align-items-center","my-4"],[3,"checked"],[1,"link"],["data-bs-toggle","modal","data-bs-target","#terms-condition"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[1,"toggle-btn","txt-grey",3,"click"],[1,"f12","my-2"],[1,"f12","text-danger","my-3"],[1,"panel","d-flex","align-items-center","justify-content-center"],["routerLink","/onboarding/login",1,"f12"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",7),t.TgZ(11,"h2"),t._uU(12," Sign Up To "),t._UZ(13,"br"),t._uU(14," Use Churchvest "),t.qZA(),t.TgZ(15,"p",8),t._uU(16," I have an account already. "),t.TgZ(17,"a",9),t._uU(18,"LOGIN HERE"),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,R,3,1,"div",10),t.YNc(20,$,21,8,"div",11),t.TgZ(21,"div",12),t.TgZ(22,"label"),t._uU(23,"Email Address"),t.qZA(),t.TgZ(24,"input",13),t.NdJ("input",function(){return o.resetControl()}),t.qZA(),t.YNc(25,j,3,0,"span",14),t.qZA(),t.YNc(26,et,4,2,"ng-container",15),t.YNc(27,ct,28,17,"ng-container",15),t.YNc(28,lt,6,0,"ng-container",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",16),t.TgZ(30,"div",17),t.TgZ(31,"a",18),t._UZ(32,"img",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",20),t.TgZ(34,"div",21),t.TgZ(35,"div",22),t.TgZ(36,"div",23),t.TgZ(37,"div",24),t.TgZ(38,"div",25),t._uU(39,"Terms & Conditions"),t.qZA(),t.TgZ(40,"mat-icon",26),t._uU(41,"close"),t.qZA(),t.qZA(),t.TgZ(42,"div",2),t.TgZ(43,"div",27),t.TgZ(44,"p",28),t._uU(45,"Last modified on 1 August 2021"),t.qZA(),t.TgZ(46,"p"),t.TgZ(47,"strong"),t._uU(48,"Note"),t.qZA(),t._uU(49," \u2013 These terms are applicable to the Churchvest trade site, where you can buy and sell your products. If you require Terms for the Churchvest (where you can buy/sell products) please go to www.churchvest/terms-conditions Welcome to Churchvest Please read these website Terms & Conditions carefully before using this website (the \u201cWebsite\u201d or \u201cChurchvest\u201d) and the services and tools offered by Haningburg Dreams Limited. (\u201cChurchvest\u201d). These Website Terms & Conditions (the \u201cTerms & Conditions\u201d) govern your access to and use of the Website, Churchvest products and services, and Churchvest.com mobile applications (together, \u201cChurchvest Services\u201d). Churchvest\u2019s Privacy Statement and its Consent to Arbitration and Governing Law are incorporated in the Terms & Conditions by reference and form part of the Terms & Conditions. Please read the Terms & Conditions carefully. By clicking as indicated below, you accept and agree to be bound by these Terms & Conditions. If you do not agree to be bound by these Terms & Conditions, you must not access or use the Website or any Churchvest Services. "),t.qZA(),t.TgZ(50,"h3"),t._uU(51,"General"),t.qZA(),t.TgZ(52,"p"),t._uU(53," Churchvest Services are for the use of persons who are 18 years of age or older only. When using Churchvest Services, you agree that: "),t.qZA(),t.TgZ(54,"ul",29),t.TgZ(55,"li"),t._uU(56," You are the legal owner or have permission of the owner to sell the items you are attempting to sell through Churchvest; "),t.qZA(),t.TgZ(57,"li"),t._uU(58," You are at least 18 years of age and reside in the Nigeria or one of its territories or possessions. If you do not meet these eligibility requirements, you must not access or use the Website; "),t.qZA(),t.TgZ(59,"li"),t._uU(60," You will not violate any laws, third party rights or our Terms & Conditions or other policies; "),t.qZA(),t.TgZ(61,"li"),t._uU(62," The information you provide will be truthful and accurate; "),t.qZA(),t.TgZ(63,"li"),t._uU(64," You will not impersonate any individual or provide false registration information; You will not transfer your account or user ID to another party without Churchvest\u2019s consent; "),t.qZA(),t.TgZ(65,"li"),t._uU(66," You will open and use no more than one account with Churchvest (multiple accounts are not permitted); "),t.qZA(),t.TgZ(67,"li"),t._uU(68," You are responsible for maintaining the confidentiality of your account information including your password; and "),t.qZA(),t.TgZ(69,"li"),t._uU(70,' You will not copy, modify, creative derivative works of, distribute, publicly perform or display, or otherwise exploit any content from Churchvest Services, except as explicitly permitted by these Terms & Conditions (see the section below titled "License" for more detail). '),t.qZA(),t.qZA(),t.TgZ(71,"p"),t._uU(72," We may transfer, assign, sub-contract or otherwise dispose of this contract, or any of our rights or obligations arising under it, at any time during the term of the contract at our discretion. You may not transfer, assign, or in any way dispose of this contract or any of your rights or obligations arising under it, without our express written prior consent, which may be electronically communicated by way of email. Churchvest reserves the absolute right to close your account, terminate this agreement, and cease doing business with you at its sole discretion and for any reason it determines. "),t.qZA(),t.TgZ(73,"p"),t._uU(74," Changes To The Terms And Conditions We may revise and update these Terms and Conditions from time to time in our sole discretion. All changes are effective immediately when we post them, and apply to all access to and use of the Website thereafter. Your continued use of the Website following the posting of revised Terms and Conditions means that you accept and agree to the changes. You are expected to check this each time you access this Website so you are aware of any changes, as they are binding on you. "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",o.recordData&&0!==o.recordData.length),t.xp6(1),t.Q6J("ngIf",o.validatePassword),t.xp6(4),t.Q6J("ngClass",t.VKq(8,v,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",o.recordFound),t.xp6(1),t.Q6J("ngIf",!o.recordFound),t.xp6(1),t.Q6J("ngIf",o.recordFound&&o.recordData&&0==o.recordData.length),t.xp6(1),t.Q6J("ngIf",o.recordData&&0!==o.recordData.length))},directives:[l.yS,_.Hw,r._Y,r.JL,r.sg,u.O5,r.Fj,r.JJ,r.u,u.mk,d.lW,h.Ou,T.oG,k.TO],styles:[".panel[_ngcontent-%COMP%]{padding:.5em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}.link[_ngcontent-%COMP%]{line-height:27px;font-size:14px}.link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 6px;cursor:pointer}"]}),n})();class U{isErrorState(i){var e,o,s;const c=!(!(null==i?void 0:i.invalid)||!(null===(e=null==i?void 0:i.parent)||void 0===e?void 0:e.dirty)),g=!(!(null===(o=null==i?void 0:i.parent)||void 0===o?void 0:o.invalid)||!(null===(s=null==i?void 0:i.parent)||void 0===s?void 0:s.dirty));return c||g}}function gt(n,i){1&n&&(t.TgZ(0,"span",19),t.TgZ(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.qZA())}function mt(n,i){1&n&&t._UZ(0,"mat-spinner")}const I=function(n){return{"is-invalid":n}};function pt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",10),t.TgZ(2,"form",11),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onResetEmail()}),t.TgZ(3,"div",12),t.TgZ(4,"h2"),t._uU(5,"Claim Back "),t._UZ(6,"br"),t._uU(7,"Your Account"),t.qZA(),t.TgZ(8,"p",13),t._uU(9," I remember my password now. "),t.TgZ(10,"a",14),t._uU(11,"LOGIN HERE"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",15),t.TgZ(13,"label"),t._uU(14,"Email Address"),t.qZA(),t._UZ(15,"input",16),t.YNc(16,gt,3,0,"span",17),t.qZA(),t.TgZ(17,"button",18),t._uU(18," Send Reset Link "),t.YNc(19,mt,1,0,"mat-spinner",5),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.resetEmailForm),t.xp6(13),t.Q6J("ngClass",t.VKq(5,I,e.resetEmailForm.controls.email.hasError("required")&&!e.resetEmailForm.controls.email.valid&&e.resetEmailForm.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",e.recordFound),t.xp6(1),t.Q6J("disabled",!e.resetEmailForm.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function _t(n,i){1&n&&(t.TgZ(0,"mat-icon",31),t._uU(1,"check_circle"),t.qZA())}function dt(n,i){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"cancel"),t.qZA())}function ht(n,i){1&n&&(t.TgZ(0,"mat-icon",31),t._uU(1,"check_circle"),t.qZA())}function ft(n,i){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"cancel"),t.qZA())}function Zt(n,i){1&n&&(t.TgZ(0,"mat-icon",31),t._uU(1,"check_circle"),t.qZA())}function Tt(n,i){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"cancel"),t.qZA())}function vt(n,i){1&n&&(t.TgZ(0,"mat-icon",31),t._uU(1,"check_circle"),t.qZA())}function yt(n,i){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"cancel"),t.qZA())}function Ct(n,i){if(1&n&&(t.TgZ(0,"div",25),t.TgZ(1,"div",26),t.YNc(2,_t,2,0,"mat-icon",27),t.YNc(3,dt,2,0,"mat-icon",28),t.TgZ(4,"span",29),t._uU(5,"Password should contain 8 characters or more"),t.qZA(),t.qZA(),t.TgZ(6,"div",26),t.YNc(7,ht,2,0,"mat-icon",27),t.YNc(8,ft,2,0,"mat-icon",28),t.TgZ(9,"span",29),t._uU(10,"Password should contain at least one upper case character"),t.qZA(),t.qZA(),t.TgZ(11,"div",26),t.YNc(12,Zt,2,0,"mat-icon",27),t.YNc(13,Tt,2,0,"mat-icon",28),t.TgZ(14,"span",29),t._uU(15,"Password should contain at least a number"),t.qZA(),t.qZA(),t.TgZ(16,"div",30),t.YNc(17,vt,2,0,"mat-icon",27),t.YNc(18,yt,2,0,"mat-icon",28),t.TgZ(19,"span",29),t._uU(20,"Password should contain at least one special character"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.validatePassword.length>=8),t.xp6(1),t.Q6J("ngIf",e.validatePassword.length<8),t.xp6(4),t.Q6J("ngIf",!e.upperCaseChar),t.xp6(1),t.Q6J("ngIf",e.upperCaseChar),t.xp6(4),t.Q6J("ngIf",e.numberChar),t.xp6(1),t.Q6J("ngIf",!e.numberChar),t.xp6(4),t.Q6J("ngIf",e.specialChar),t.xp6(1),t.Q6J("ngIf",!e.specialChar)}}function wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function xt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function At(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function qt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function bt(n,i){1&n&&(t.TgZ(0,"mat-error",34),t._uU(1," Passwords do not match "),t.qZA())}function kt(n,i){1&n&&t._UZ(0,"mat-spinner")}function Ut(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",10),t.TgZ(2,"form",11),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onResetPassword()}),t.TgZ(3,"div",12),t.TgZ(4,"h2"),t._uU(5,"Enter Your "),t._UZ(6,"br"),t._uU(7,"New Password"),t.qZA(),t.qZA(),t.YNc(8,Ct,21,8,"div",20),t.TgZ(9,"div",15),t.TgZ(10,"label"),t._uU(11,"Password"),t.qZA(),t.TgZ(12,"input",21),t.NdJ("input",function(){t.CHM(e);const s=t.oxw();return s.checkPassword(s.passwordTrueValue)}),t.qZA(),t.YNc(13,wt,3,0,"span",22),t.YNc(14,xt,3,0,"span",22),t.qZA(),t.TgZ(15,"div",15),t.TgZ(16,"label"),t._uU(17,"Confirm Password"),t.qZA(),t._UZ(18,"input",23),t.YNc(19,At,3,0,"span",22),t.YNc(20,qt,3,0,"span",22),t.YNc(21,bt,2,0,"mat-error",24),t.qZA(),t.TgZ(22,"button",18),t._uU(23," Reset Password "),t.YNc(24,kt,1,0,"mat-spinner",5),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.resetPasswordForm),t.xp6(6),t.Q6J("ngIf",e.validatePassword),t.xp6(4),t.Q6J("type",e.show?"text":"password")("ngClass",t.VKq(13,I,e.resetPasswordForm.controls.password.hasError("required")&&e.resetPasswordForm.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(4),t.Q6J("type",e.show?"text":"password")("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(1),t.Q6J("ngIf",e.resetPasswordForm.hasError("notSame")&&e.resetPasswordForm.controls.password_confirmation.touched),t.xp6(1),t.Q6J("disabled",!e.resetPasswordForm.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}let J=(()=>{class n{constructor(e,o,s,c,g,y){this.authService=e,this.route=o,this.router=s,this.fb=c,this.toastr=g,this._bottomSheet=y,this.showContentType=!1,this.show=!1,this.isBusy=!1,this.matcher=new U,this._validateCaps=x,this._hasNumber=A,this._checkForSpecialChars=q,this.resetEmailForm=new r.cw({}),this.resetPasswordForm=new r.cw({}),this.checkPasswordMatch=Z=>Z.get("password").value===Z.get("password_confirmation").value?null:{notSame:!0},this.resetEmailForm=this.fb.group({email:[null,[r.kI.required,r.kI.email]]}),this.resetPasswordForm=this.fb.group({email:[null],password:["",r.kI.required],password_confirmation:[],token:[null]},{validators:this.checkPasswordMatch})}ngOnInit(){this.getRoutes()}get emailValue(){return this.resetEmailForm.getRawValue()}get emailTrueValue(){return this.resetEmailForm.controls.email.value}get passwordValue(){return this.resetPasswordForm.getRawValue()}get passwordTrueValue(){return this.resetPasswordForm.controls.password.value}password(){this.show=!this.show}checkPassword(e){this.validatePassword=e,this.upperCaseChar=this._validateCaps(e),this.numberChar=this._hasNumber(e),this.specialChar=this._checkForSpecialChars(e)}getRoutes(){this.router.url.includes("reset-password")?(this.showContentType=!0,this.route.paramMap.subscribe(e=>{this.token=e.get("token")}),this.route.queryParamMap.subscribe(e=>{this.reset_email=e.get("email")})):this.showContentType=!1}navigate(e){this.router.navigate(["/onboarding/verify-email"],{queryParams:{query:e}})}onResetEmail(){this.isBusy=!0,this.resetEmailForm.invalid?this.isBusy=!1:this.resetEmailForm.valid&&this.authService.resetEmail(this.emailValue).subscribe(e=>{this.isBusy=!1,this.toastr.success(e.message,"Message"),this.openBottomSheet(this.emailTrueValue),this.resetEmailForm.reset()},e=>{this.isBusy=!1,this.toastr.error(e,"Message")},()=>{this.isBusy=!1,this.resetEmailForm.reset()})}onResetPassword(){this.isBusy=!0,this.resetPasswordForm.invalid?this.isBusy=!1:(this.resetPasswordForm.patchValue({email:this.reset_email,token:this.token}),this.resetPasswordForm.valid&&this.authService.resetPassword(this.passwordValue).subscribe(e=>{this.isBusy=!1,this.toastr.success(e.message,"Message"),this.autoLogUserIn()},e=>{this.isBusy=!1,this.toastr.error(e,"Message")}))}autoLogUserIn(){this.authService.login({email:this.reset_email,password:this.passwordTrueValue}).subscribe(o=>{const{data:s}=o;"success"===o.status&&(this.toastr.success("Login successful","Message"),localStorage.setItem("token",o.access_token),localStorage.setItem("user_details",JSON.stringify(s)),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("user_church",JSON.stringify(o.data.memberships[0])),null!==o.data.email_verified_at&&o.data.email_verified_at?this.router.navigate(["/portal/activity"]):this.navigate(o.data.email))},o=>{this.toastr.error(o,"Message"),this.isBusy=!1},()=>{this.isBusy=!1})}openBottomSheet(e){this._bottomSheet.open(b,{data:{data:e,type:"reset_link"}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.e),t.Y36(l.gz),t.Y36(l.F0),t.Y36(r.qu),t.Y36(m._W),t.Y36(f.ch))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-forgot-password"]],decls:14,vars:2,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/login"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass"],["class","toggle-btn txt-grey green",4,"ngIf"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],[1,"toggle-btn","txt-grey","green"],["class","panel mb-3 p-3",4,"ngIf"],["placeholder","Enter password","formControlName","password",3,"type","ngClass","input"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],["formControlName","password_confirmation","placeholder","Confirm password",3,"type","errorStateMatcher"],["class","f12 my-2",4,"ngIf"],[1,"panel","mb-3","p-3"],[1,"d-flex","align-items-center","mb-2"],["class","txt-green",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"f12","text-grey","ms-2"],[1,"d-flex","align-items-center"],[1,"txt-green"],[1,"text-danger"],[1,"toggle-btn","txt-grey",3,"click"],[1,"f12","my-2"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.YNc(8,pt,20,7,"ng-container",5),t.YNc(9,Ut,25,15,"ng-container",5),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"a",8),t._UZ(13,"img",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngIf",!o.showContentType),t.xp6(1),t.Q6J("ngIf",o.showContentType))},directives:[l.yS,_.Hw,u.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,u.mk,d.lW,h.Ou,k.TO],styles:[".panel[_ngcontent-%COMP%]{padding:.5em;border-radius:10px;background:#fff;transition:.5s ease-in-out;box-shadow:0 1px 15px 2px #e0e0e0}"]}),n})();var It=a(4107),Jt=a(8908);function St(n,i){if(1&n&&(t.TgZ(0,"div",19),t.TgZ(1,"span",20),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.recordMsg)}}function Nt(n,i){1&n&&(t.TgZ(0,"span",21),t.TgZ(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.qZA())}function Ft(n,i){1&n&&t._UZ(0,"mat-spinner")}function Pt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateEmail()}),t._uU(2," Verify "),t.YNc(3,Ft,1,0,"mat-spinner",14),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.form.controls.email.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}function Yt(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",23),t.TgZ(2,"p",24),t._uU(3," No record found: "),t.TgZ(4,"a",9),t._uU(5,"Signup here"),t.qZA(),t.qZA(),t.qZA(),t.BQk())}function Qt(n,i){if(1&n&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.church),t.xp6(1),t.Oqu(e.church.name)}}function Et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"label"),t._uU(2,"Select Church"),t.qZA(),t.TgZ(3,"mat-select",32),t.NdJ("selectionChange",function(s){return t.CHM(e),t.oxw(2).onChurchSelect(s)}),t.TgZ(4,"mat-option",33),t._uU(5," Select church "),t.qZA(),t.YNc(6,Qt,2,2,"mat-option",34),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("ngForOf",e.recordData.memberships)}}function Mt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t.qZA()}}function Lt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).password()}),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t.qZA()}}function Bt(n,i){1&n&&t._UZ(0,"mat-spinner")}const S=function(n){return{"is-invalid":n}};function Ot(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,Et,7,1,"div",25),t.TgZ(2,"div",11),t.TgZ(3,"label"),t._uU(4,"Password"),t.qZA(),t._UZ(5,"input",26),t.YNc(6,Mt,3,0,"span",27),t.YNc(7,Lt,3,0,"span",27),t.qZA(),t.TgZ(8,"div",28),t.TgZ(9,"mat-checkbox",29),t._uU(10,"Stay signed in"),t.qZA(),t.TgZ(11,"a",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearStorage()}),t._uU(12,"Reset password"),t.qZA(),t.qZA(),t.TgZ(13,"button",31),t._uU(14," Login "),t.YNc(15,Bt,1,0,"mat-spinner",14),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!==e.recordData.memberships.length),t.xp6(4),t.Q6J("type",e.show?"text":"password")("ngClass",t.VKq(8,S,e.form.controls.password.hasError("required")&&e.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",!e.show),t.xp6(1),t.Q6J("ngIf",e.show),t.xp6(2),t.Q6J("checked",e.isChecked),t.xp6(4),t.Q6J("disabled",!e.form.valid),t.xp6(2),t.Q6J("ngIf",e.isBusy)}}let Rt=(()=>{class n{constructor(e,o,s,c){this.authServ=e,this.toastr=o,this.fb=s,this.router=c,this.show=!1,this.isBusy=!1,this.validate=!1,this.recordFound=!1,this.isChecked=!0,this.form=new r.cw({}),this.form=this.fb.group({email:["",[r.kI.email,r.kI.required]],password:["",r.kI.required]})}ngOnInit(){}get value(){return this.form.getRawValue()}get emailCtrInstance(){return this.form.get("email")}password(){this.show=!this.show}onChurchSelect(e){this.selectedChurch=e.value}clearStorage(){localStorage.clear()}resetControl(){"INVALID"==this.emailCtrInstance.status&&(this.recordFound=!1)}validateEmail(){this.isBusy=!0,this.authServ.resolveUser({email:this.emailCtrInstance.value}).subscribe(({message:o,data:s})=>{this.isBusy=!1,0==s.length?(this.recordData=s,this.toastr.error(o,"Message",{timeOut:3e3})):(this.recordFound=!0,this.recordData=s,this.recordMsg=o,0!==this.recordData.memberships.length&&this.toastr.info(o,"Message",{timeOut:3e3}))},()=>{this.isBusy=!1,this.recordFound=!1})}navigate(e){this.router.navigate(["/onboarding/verify-email"],{queryParams:{query:e}})}onSubmit(){this.isBusy=!0,this.form.valid&&this.authServ.login(this.value).subscribe(e=>{const{data:o}=e;"success"===e.status&&(this.recordFound=!1,this.toastr.success("Login successful","Message"),this.form.reset(),localStorage.setItem("token",e.access_token),localStorage.setItem("user_details",JSON.stringify(o)),localStorage.setItem("isLoggedIn","true"),this.selectedChurch&&(localStorage.setItem("user_church",this.selectedChurch),this.router.navigate(["/portal/activity"])),(null===e.data.email_verified_at||!e.data.email_verified_at)&&this.navigate(e.data.email),null!==e.data.email_verified_at&&!this.selectedChurch&&this.router.navigateByUrl("get-started/pricing"))},e=>{this.toastr.error(e,"Message"),this.isBusy=!1},()=>{this.isBusy=!1,this.form.reset()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.e),t.Y36(m._W),t.Y36(r.qu),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:32,vars:9,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-400","pt-5"],["routerLink","/",1,"return-link"],[1,"form-wrap","w-400"],[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","mb-3"],[1,"f12","txt-grey"],["routerLink","/onboarding/register"],["class","panel mb-3",4,"ngIf"],[1,"input"],["type","email","placeholder","Enter email","formControlName","email",3,"ngClass","input"],["class","toggle-btn txt-grey green",4,"ngIf"],[4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],[1,"panel","mb-3"],[1,"f12","txt-green"],[1,"toggle-btn","txt-grey","green"],["type","submit","mat-stroked-button","",1,"w-100",3,"disabled","click"],[1,"d-flex","my-3"],[1,"f12","text-danger"],["class","input",4,"ngIf"],["placeholder","Enter password","formControlName","password",3,"type","ngClass"],["class","toggle-btn txt-grey",3,"click",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","my-4"],[3,"checked"],["routerLink","/onboarding/forgot-password",1,"f12",3,"click"],["type","submit","mat-flat-button","",1,"w-100",3,"disabled"],["placeholder","Connect to church",1,"select",3,"selectionChange"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"toggle-btn","txt-grey",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(10,"div",7),t.TgZ(11,"h2"),t._uU(12,"Log Back Into "),t._UZ(13,"br"),t._uU(14,"Your Account"),t.qZA(),t.TgZ(15,"p",8),t._uU(16," I don\u2019t have an account yet. "),t.TgZ(17,"a",9),t._uU(18,"GET STARTED"),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,St,3,1,"div",10),t.TgZ(20,"div",11),t.TgZ(21,"label"),t._uU(22,"Email Address"),t.qZA(),t.TgZ(23,"input",12),t.NdJ("input",function(){return o.resetControl()}),t.qZA(),t.YNc(24,Nt,3,0,"span",13),t.qZA(),t.YNc(25,Pt,4,2,"ng-container",14),t.YNc(26,Yt,6,0,"ng-container",14),t.YNc(27,Ot,16,10,"ng-container",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"div",16),t.TgZ(30,"a",17),t._UZ(31,"img",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",o.recordData&&o.recordFound&&0!==o.recordData.memberships.length),t.xp6(4),t.Q6J("ngClass",t.VKq(7,S,o.form.controls.email.hasError("required")&&!o.form.controls.email.valid&&o.form.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",o.recordFound),t.xp6(1),t.Q6J("ngIf",!o.recordFound),t.xp6(1),t.Q6J("ngIf",o.recordData&&0==o.recordData.length),t.xp6(1),t.Q6J("ngIf",o.recordFound))},directives:[l.yS,_.Hw,r._Y,r.JL,r.sg,u.O5,r.Fj,r.JJ,r.u,u.mk,d.lW,h.Ou,T.oG,It.gD,Jt.ey,u.sg],styles:[""]}),n})();var Vt=a(5435);function Ht(n,i){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"p",6),t._uU(2," We sent a verification email to "),t.TgZ(3,"span",16),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"div",17),t.TgZ(6,"p",18),t._uU(7," Please check your email to confirm your account and complete your account creation process. "),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.hij("",e.queryString,",")}}function Dt(n,i){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"p",18),t._uU(2,"You have not verified your email."),t.qZA(),t.TgZ(3,"p",18),t._uU(4," Please check your email to confirm your account or click on the text below to resend the verification link "),t.qZA(),t.qZA())}function Wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",19),t._uU(1," Didn\u2019t get the email? "),t.TgZ(2,"a",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().resend()}),t._uU(3," Resend it"),t.qZA(),t.qZA()}}function Gt(n,i){1&n&&(t.TgZ(0,"p",21),t._uU(1," Sending another email... "),t.qZA())}const zt=[{path:"",component:P,canActivate:[F.d],children:[{path:"api/email/verify/:*/:*",component:L,data:{title:"ChurchVest - Account Verification"}},{path:"login",component:Rt,data:{title:"ChurchVest - Login"}},{path:"forgot-password",component:J,data:{title:"ChurchVest - Forgot Password"}},{path:"register",component:ut,data:{title:"ChurchVest - Create Account"}},{path:"reset-password/:token",component:J,data:{title:"ChurchVest - Reset Your Password"}},{path:"verify-email",component:(()=>{class n{constructor(e,o,s,c){this.authService=e,this.route=o,this.router=s,this._bottomSheet=c,this.loading=!1}ngOnInit(){this.getRoutes(),this.token=localStorage.getItem("token")}getRoutes(){this.route.queryParams.pipe((0,Vt.h)(e=>e.query)).subscribe(e=>{this.queryString=e.query}),""===this.queryString&&this.router.navigate(["/onboarding/register"])}resend(){this.loading=!0,this.authService.resendVerificationEmail().subscribe(e=>{this.loading=!1,"success"===e.status&&this.openBottomSheet()},()=>{this.loading=!1})}openBottomSheet(){this._bottomSheet.open(b,{data:{data:this.queryString,type:"verification_link"}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.e),t.Y36(l.gz),t.Y36(l.F0),t.Y36(f.ch))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-verify-email"]],decls:23,vars:4,consts:[[1,"auth"],[1,"grid","grid--1fr--2fr"],[1,"container"],[1,"d-flex","w-450","pt-5"],["routerLink","/",1,"return-link"],[1,"content","w-450","mt-5","d-flex","flex-column"],[1,"txt-grey","my-2"],[1,"my-3"],["src","assets/img/svg/mail.svg","alt","mail"],[4,"ngIf"],["class","txt-grey d-flex",4,"ngIf"],["class","f12 txt-grey",4,"ngIf"],[1,"banner"],[1,"center"],["routerLink","/"],["src","assets/img/png/light-logo.png","alt","logo"],[1,"f12","text-success"],[1,"my-5"],[1,"txt-grey"],[1,"txt-grey","d-flex"],[1,"ms-2","cursor",3,"click"],[1,"f12","txt-grey"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.TgZ(5,"mat-icon"),t._uU(6,"keyboard_backspace"),t.qZA(),t._uU(7,"Home Page"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"h2"),t._uU(10,"Verify Your Account"),t.qZA(),t.TgZ(11,"p",6),t._uU(12,"Hello there, welcome to Churchvest!"),t.qZA(),t.TgZ(13,"div",7),t._UZ(14,"img",8),t.qZA(),t.YNc(15,Ht,8,1,"div",9),t.YNc(16,Dt,5,0,"div",9),t.YNc(17,Wt,4,0,"p",10),t.YNc(18,Gt,2,0,"p",11),t.qZA(),t.qZA(),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"a",14),t._UZ(22,"img",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(15),t.Q6J("ngIf",!o.token),t.xp6(1),t.Q6J("ngIf",o.token),t.xp6(1),t.Q6J("ngIf",o.token&&!o.loading),t.xp6(1),t.Q6J("ngIf",o.token&&o.loading))},directives:[l.yS,_.Hw,u.O5],styles:[".grid[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:0 auto}.grid[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;color:#080730;font-weight:300;font-size:48px}.grid[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{position:relative;background:url(/assets/img/png/keyboard-keys.png);background-position:center}"]}),n})(),data:{title:"ChurchVest - Email Verification"}},{path:"",redirectTo:"login"}]}];let Xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.Bz.forChild(zt)],l.Bz]}),n})();var N=a(3946);let $t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:m._W}],imports:[[u.ez,Xt,N.h,N.h,r.UX,r.u5,m.Rh.forRoot()]]}),n})()}}]);